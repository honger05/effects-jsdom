{
"success": true,
"data": [
{
"id": "575e70ef4a43c1cb159ffe25",
"author_id": "4f19795e817ae4105c01cc1f",
"tab": "share",
"content": "<div class=\"markdown-text\"><p>JSConf China å·²ç»äº”å¹´äº†ï¼Œè¿™äº”å¹´æ¥æˆ‘ä»¬ä¸€ç›´ç§‰æŒç€ç»™å›½å†…JSå¼€å‘è€…å¸¦æ¥é«˜è´¨é‡çš„æŠ€æœ¯ä¼šè®®çš„å®—æ—¨ã€‚\n5å¹´æ¥æœ‰è¶…è¿‡1700ä½å¼€å‘è€…å‚åŠ è¿‡æˆ‘ä»¬çš„æ´»åŠ¨ï¼Œä¹Ÿæœ‰è¶…è¿‡80ä½è®²å¸ˆç»™æˆ‘ä»¬å¸¦æ¥äº†ç²¾å½©çš„åˆ†äº«ã€‚\nä»Šå¹´çš„JSConf China åˆæ¥äº†ï¼Œä»Šå¹´ä¹æœˆæˆ‘ä»¬å°†åœ¨å—äº¬ä¸¾åŠå®JSã€‚\næˆ‘ä»¬ä¹Ÿå¸Œæœ›ä»Šå¹´ä¾ç„¶èƒ½å¤Ÿç»™å¤§å®¶å¸¦æ¥ä¸€ä¸ªå€¼å›ç¥¨ä»·çš„æŠ€æœ¯å¤§ä¼šã€‚\nç°åœ¨è´­ç¥¨é€šé“å·²ç»å¼€é€šï¼Œæ—©é¸Ÿ5åˆ†é’Ÿå†…å”®å®Œ :)\n<a href=\"http://www.bagevent.com/event/58905\">http://www.bagevent.com/event/58905</a></p>\n<p>æ„Ÿè°¢å‡ ä½å‘èµ·äººï¼Œå‘èµ·è¿™ä¸ªå›½å†…æœ€å¤§çš„JavaScriptå¼€å‘è€…å¤§ä¼šã€‚\nä¹Ÿæ„Ÿè°¢ä»–ä»¬ä¸€ç›´ä»¥æ¥å¯¹ç»„ç»‡æ´»åŠ¨çš„æ”¯æŒã€‚\n<img src=\"https://cloud.githubusercontent.com/assets/914595/16001382/3ca6953a-3184-11e6-8f52-d22e37eed623.png\" alt=\"image\"></p>\n<p><img src=\"https://cloud.githubusercontent.com/assets/914595/16001470/b949f8f2-3184-11e6-80df-6867d2bc5551.png\" alt=\"image\"></p>\n<p>JavaScript everywhere!</p>\n<p>:)</p>\n</div>",
"title": "ä¸­å›½æœ€å¤§çš„JavaScriptå¼€å‘è€…å¤§ä¼šJSConf China 2016å³å®JS å”®ç¥¨å•¦ï¼",
"last_reply_at": "2016-07-29T09:56:20.458Z",
"good": false,
"top": true,
"reply_count": 50,
"visit_count": 11328,
"create_at": "2016-06-13T08:38:07.230Z",
"author": {
"loginname": "xeodou",
"avatar_url": "//gravatar.com/avatar/dbefd0e4d332a8d252c0251075262e8d?s=48"
}
},
{
"id": "5796d0272d740f7c26637e9f",
"author_id": "542bff0c10ab5791322617c7",
"tab": "share",
"content": "<div class=\"markdown-text\"><h1>TL; DR</h1>\n<blockquote>\n<p>æ¥äº†å¾ˆå¤šå°ä¼™ä¼´</p>\n</blockquote>\n<img src=\"http://7xkeqi.com1.z0.glb.clouddn.com/nodeparty/14th/7.pic.jpg\" width=\"500\" />\n<blockquote>\n<p>Juliet ä»‹ç»æ´»åŠ¨æµç¨‹</p>\n</blockquote>\n<img src=\"http://7xkeqi.com1.z0.glb.clouddn.com/nodeparty/14th/6.pic.jpg\" width=\"500\" />\n<blockquote>\n<p>Berwin åˆ†äº«KoaåŸç†å’Œå®è·µ</p>\n</blockquote>\n<p>ä¸‹è½½Slides: <a href=\"http://7xkeqi.com1.z0.glb.clouddn.com/nodeparty/14th/koa_berwin_20160723.pdf\">koa_berwin_20160723</a></p>\n<img src=\"http://7xkeqi.com1.z0.glb.clouddn.com/nodeparty/14th/2.pic.jpg\" width=\"500\" />\n<blockquote>\n<p>Hain åˆ†äº«äººå·¥æ™ºèƒ½å’ŒèŠå¤©æœºå™¨äºº</p>\n</blockquote>\n<p>ä¸‹è½½Slides: <a href=\"http://7xkeqi.com1.z0.glb.clouddn.com/nodeparty/14th/AI_Chatbot_hain_20160723.pdf\">AI_Chatbot_hain_20160723</a></p>\n<img src=\"http://7xkeqi.com1.z0.glb.clouddn.com/nodeparty/14th/4.pic.jpg\" width=\"500\" />\n<blockquote>\n<p>äºŒæ¥¼çœ‹å®¢</p>\n</blockquote>\n<img src=\"http://7xkeqi.com1.z0.glb.clouddn.com/nodeparty/14th/9.pic.jpg\" width=\"500\" />\n<blockquote>\n<p>æ’¸ä¸²</p>\n</blockquote>\n<img src=\"http://7xkeqi.com1.z0.glb.clouddn.com/nodeparty/14th/8.pic.jpg\" width=\"500\" />\n<h2>å·å¬æåŠ©</h2>\n<p>NodePartyä¸€ç›´åŠªåŠ›æ¨å¹¿ä¼˜ç§€çš„Node.js/JavaScriptæŠ€æœ¯ï¼Œå§‹ç»ˆç§‰æŒç€æ‹¥æŠ±å˜åŒ–ã€åˆ›æ–°å’Œç«­å°½åˆ†äº«çš„æ—¨æ„ã€‚13æ¬¡æ´»åŠ¨å…±è¾“å‡ºäº†32ä¸ªä¸»é¢˜åˆ†äº«ï¼Œå¹¶å»¶ä¼¸äº†å¾®ä¿¡å…¬ä¼—å·å’Œå¤šä¸ªå¾®ä¿¡ç¾¤ï¼Œè¿è¥NodePartyæœ‰å¤šåå¿—æ„¿è€…ï¼Œé‡ç‹—ç§‘æŠ€ã€ç§‘æŠ€å¯ºå’Œç å³°åŸ¹è®­ä¹Ÿå¤§åŠ›æ”¯æŒã€‚ä¸ºäº†èƒ½æ›´å¥½çš„å‘å±•NodePartyå¹¶ä»Webåº”ç”¨å¼€å‘å’Œç§»åŠ¨åº”ç”¨å¼€å‘åŸºç¡€ä¸Šï¼Œå°†ä¸»é¢˜åˆ†äº«èŒƒå›´æ‰©å¤§åˆ°è™šæ‹Ÿç°å®æŠ€æœ¯ã€äººå·¥æ™ºèƒ½æŠ€æœ¯ã€ç‰©è”ç½‘æŠ€æœ¯ï¼Œéœ€è¦æ›´å¤šæ”¯æŒï¼Œå¦‚æœæ‚¨å‚åŠ è¿‡NodePartyï¼Œè®¤åŒæˆ‘ä»¬çš„å·¥ä½œï¼Œè¯·ä¼¸å‡ºæ´åŠ©ä¹‹æ‰‹ã€‚</p>\n<blockquote>\n<p>å¾®ä¿¡æ‰«ä¸€æ‰«</p>\n</blockquote>\n<img src=\"http://7xkeqi.com1.z0.glb.clouddn.com/nodeparty/donate-rmb100.png\" width=\"300\" />\n<h2>åŠ å…¥ BJ NodeJS Club</h2>\n<img src=\"http://7xkeqi.com1.z0.glb.clouddn.com/nodeparty/poster-20160616/poster_M.png\" width=\"600\" /></div>",
"title": "åŒ—äº¬ 7.23 NodeParty æ€»ç»“",
"last_reply_at": "2016-07-27T06:53:12.384Z",
"good": false,
"top": true,
"reply_count": 0,
"visit_count": 1480,
"create_at": "2016-07-26T02:51:19.955Z",
"author": {
"loginname": "Samurais",
"avatar_url": "https://avatars.githubusercontent.com/u/3538629?v=3&s=120"
}
},
{
"id": "579d748e85dba6b12ac58561",
"author_id": "542940f12ca9451e1bf3c24c",
"tab": "job",
"content": "<div class=\"markdown-text\"><p>4å¹´phpç»éªŒï¼Œæ­£åœ¨å­¦ä¹ nodejsï¼æˆ‘çš„å¾®ä¿¡huochai2016</p>\n</div>",
"title": "æ±‚nodejsèŒä½",
"last_reply_at": "2016-08-02T01:52:16.050Z",
"good": false,
"top": false,
"reply_count": 6,
"visit_count": 407,
"create_at": "2016-07-31T03:46:22.601Z",
"author": {
"loginname": "huaiguoguo",
"avatar_url": "https://avatars.githubusercontent.com/u/1888094?v=3&s=120"
}
},
{
"id": "579febd99f22cae71c65429b",
"author_id": "560b957d272b724e5efefd92",
"tab": "ask",
"content": "<div class=\"markdown-text\"><p>å› ä¸ºè¿™ä¸ªåº”ç”¨é¢å¯¹çš„æ˜¯å›½å†…ç”¨æˆ·ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯å›½å†…çš„éƒ¨ç½²æœåŠ¡æä¾›å•†ã€‚</p>\n<p>å¤§å®¶æœ‰ä»€ä¹ˆå¥½æ¨èçš„å—ï¼ŸğŸ˜ƒ</p>\n</div>",
"title": "æœ€è¿‘å¼€å‘äº†ä¸€ä¸ª koa + mongo çš„åº”ç”¨ï¼Œé—®é—®å¤§å®¶å¹³æ—¶éƒ½ç”¨å›½å†…å“ªå®¶çš„éƒ¨ç½²æœåŠ¡ï¼Ÿ",
"last_reply_at": "2016-08-02T01:39:36.951Z",
"good": false,
"top": false,
"reply_count": 1,
"visit_count": 61,
"create_at": "2016-08-02T00:39:53.715Z",
"author": {
"loginname": "xiekw2010",
"avatar_url": "https://avatars.githubusercontent.com/u/1814071?v=3&s=120"
}
},
{
"id": "57980b28f0d4b46026ba5519",
"author_id": "5507e4e053ad0efa46bc502c",
"tab": "job",
"content": "<div class=\"markdown-text\"><p>åŠ å…¥æˆ‘ä»¬ï¼Œå¾…é‡ä»ä¼˜ï¼Œè£…å¤‡é½å…¨ï¼Œä¸€æ¡å¤§è£¤è¡©ï¼Œä¸€åŒäººå­—æ‹–ï¼Œä¸€æŠŠAK47ï¼Œå¤šåŠ³å¤šå¾—ï¼Œåªè¦å¤§å¹²ä¸€ç¥¨ï¼Œ åœ¨å¤§éƒ½å¸‚ä¹°æ¥¼ä¸å†æ˜¯æ¢¦æƒ³ï¼Œå¹²ä¸¤ç¥¨ï¼Œè·»èº«ä¸Šæµç¤¾ä¼šï¼Œç›´æ¥ä¸èŒƒçˆ·ã€å¤§å¹‚å¹‚ç­‰å¤§ç‰Œå¯¹è¯ä¸å†æ˜¯è·ç¦»ã€‚åˆ«å†çŠ¹è±«äº†ï¼Œç»™ä½ ä¸€ç‰‡æµ·åŸŸï¼Œæ¢ä½ ä¸€ç”Ÿå¥‡è¿¹! è¯šæ‹›jsçŒ¿ï¼Œä»¥ä¸‹æ˜¯é€šå¾€ä½ äººç”Ÿå·…å³°çš„åˆ—è½¦ï¼š</p>\n<p>èŒä½è¦æ±‚ï¼š\n1.ç†Ÿæ‚‰macå¼€å‘ç¯å¢ƒï¼›\n2.ç²¾é€šnodejsï¼Œbootstrapï¼ŒHTML5ï¼Œç†Ÿæ‚‰nw.jsï¼›\n3.ç†Ÿæ‚‰JavaScriptï¼Œå¯¹æµè¡Œçš„JavaScriptæ¡†æ¶æœ‰å®é™…ä½¿ç”¨ç»éªŒï¼›\n4.ç†Ÿæ‚‰æ‰‹æœºç«¯å’ŒPCç«¯webå®ç°çš„å·®å¼‚ï¼Œæœ‰ç§»åŠ¨å¹³å°webå‰ç«¯å¼€å‘ç»éªŒï¼Œäº†è§£ç§»åŠ¨äº’è”ç½‘äº§å“å’Œè¡Œä¸šï¼Œæœ‰åœ¨Android,iOSç­‰å¹³å°ä¸‹HTML5+CSS+JavaScriptï¼ˆæˆ–ç§»åŠ¨JSæ¡†æ¶ï¼‰å¼€å‘ç»éªŒè€…ä¼˜å…ˆè€ƒè™‘ï¼›\n5.è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œå›¢é˜Ÿåä½œç²¾ç¥ï¼Œå¯¹ç§»åŠ¨äº’è”ç½‘è¡Œä¸šæœ‰æµ“åšçš„å…´è¶£ï¼Œæœ‰è¾ƒå¼ºçš„ç ”ç©¶èƒ½åŠ›å’Œå­¦ä¹ èƒ½åŠ›ã€‚</p>\n<p>ç”µè¯ï¼š010-62978515\né‚®ç®±ï¼šzhangdp2005@163.com\nåœ°å€ï¼šåŒ—äº¬æµ·æ·€åŒºä¸Šåœ°ä¸‰è¡—å˜‰åå¤§å¦cåº§</p>\n</div>",
"title": "è¯šè˜nodeå¼€å‘å·¥ç¨‹å¸ˆâ€”â€”åŒ—äº¬",
"last_reply_at": "2016-08-02T01:18:58.086Z",
"good": false,
"top": false,
"reply_count": 2,
"visit_count": 670,
"create_at": "2016-07-27T01:15:20.835Z",
"author": {
"loginname": "zhangdp2005",
"avatar_url": "https://avatars.githubusercontent.com/u/11517062?v=3&s=120"
}
},
{
"id": "57812e64ee5f048d54f90800",
"author_id": "535cbb096b02f25e580123e9",
"tab": "share",
"content": "<div class=\"markdown-text\"><h1>Electron</h1>\n<h3>introduction</h3>\n<h4>1.1 Electronæ˜¯ä»€ä¹ˆï¼Ÿ</h4>\n<p>å¼•ç”¨å®˜ç½‘çš„ä¸€å¥è¯ï¼š\n<strong>Build cross platform desktop apps with JavaScript, HTML, and CSS</strong></p>\n<h4>1.2 è¯ç”Ÿ</h4>\n<p><strong>æŠ€æœ¯èƒŒæ™¯ï¼š</strong></p>\n<p>JavaScriptè¿‘å‡ å¹´çš„å…¨é¢†åŸŸå‘å±•ï¼Œä¸ªäººç†è§£JavaScriptæ˜¯æ€æƒ³å¯¹javaçš„å‰è¿›ï¼Œä»<strong>compile once,run everywhere</strong>è½¬å˜ä¸º<strong>code once,run everywhere</strong>ï¼Œç”±äºJavaScriptæœ¬èº«çš„æ˜¯ä¸€é—¨è§£é‡Šæ€§çš„è„šæœ¬è¯­è¨€ï¼Œè¿™è®©å®ƒé€æ¸çš„æˆä¸ºå…¨å®‡å®™ä½¿ç”¨æœ€å¹¿æ³›çš„è¯­è¨€ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚</p>\n<p>JavaScriptåªæ˜¯JavaScriptï¼Œåœ¨æµè§ˆå™¨ä¸­ï¼Œå®ƒæ“ä½œDOMå’ŒBOMï¼Œåœ¨æœåŠ¡å™¨ç«¯å®ƒæ“ä½œFileSystemï¼ŒHTTPï¼Œæ‰€ä»¥åœ¨ä»»ä½•ç¯å¢ƒï¼Œä»–éƒ½å¯ä»¥æ‰§è¡Œï¼Œå³ä½¿æ˜¯åœ¨å‡ Mçš„å†…å­˜ç¯å¢ƒï¼Œè¿™ç‚¹å¯¹ç‰©è”ç½‘æ¥è¯´å¾ˆé‡è¦ã€‚</p>\n<p><strong>è°ƒç”¨éœ€æ±‚ï¼š</strong></p>\n<p>ä¼ ç»Ÿçš„PCè½¯ä»¶å¼€å‘æˆæœ¬å¤ªé«˜ï¼Œå’Œç½‘ç»œçš„å…´èµ·ï¼Œè®©ä¼ ç»Ÿçš„å¼€å‘é€æ¸è¢«åœ¨çº¿ç³»ç»ŸåŠæ‰“ï¼Œé«˜æˆæœ¬å¿…ç„¶é€æ¸çš„èµ°ä¸‹å¡è·¯ï¼Œè¿™æ˜¯ç¬¦åˆç»æµä¸Šå‘å±•çš„è¶‹åŠ¿ï¼Œä½†æ˜¯ç”±äºæ€§èƒ½çš„é—®é¢˜ï¼Œä¸ç®¡æ˜¯VRè¿˜æ˜¯ç›´æ’­ï¼Œéœ€è¦é‡‡é›†è§†é¢‘ï¼ŒéŸ³é¢‘ï¼Œç½‘å¡ä¿¡æ¯ï¼Œè€Œè¿™äº›æ¨¡å—å¤§å¤šæ•°è¿˜æ˜¯Cã€C++æ¥è·å–</p>\n<p><strong>ä¼ ç»Ÿå±€é™ï¼š</strong>\nåœ¨æµè§ˆå™¨é‡Œï¼ŒWebé¡µé¢é€šå¸¸è¿è¡Œåœ¨ä¸€ä¸ªæ²™ç›’ç¯å¢ƒé‡Œï¼Œå®ƒä¸èƒ½è®¿é—®æœ¬åœ°çš„èµ„æºã€‚\næ¯”å¦‚åœ¨Webé¡µé¢é‡Œï¼Œè°ƒç”¨æœ¬åœ°GUIæ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸ºåœ¨Webé¡µé¢é‡Œç®¡ç†æœ¬åœ°GUIèµ„æºæ˜¯éå¸¸å±é™©çš„è€Œä¸”éå¸¸å®¹æ˜“å¯¼è‡´èµ„æºæ³„éœ²ã€‚å¦‚æœä½ æƒ³åœ¨Webé¡µé¢è¿›è¡ŒGUIæ“ä½œï¼Œè¯¥Webé¡µé¢çš„æ¸²æŸ“è¿›ç¨‹å¿…é¡»é€šè¿‡å’Œä¸»è¿›ç¨‹é€šä¿¡æ¥è¯·æ±‚ä¸»è¿›ç¨‹å¤„ç†è¿™äº›æ“ä½œã€‚</p>\n<h4>1.3 Electronçš„ç»„æˆ</h4>\n<p><strong>1.è½¯ä»¶æˆåˆ†ï¼š</strong>\nElectron: 1.2.6\tNode: 6.1.0\tChromium: 51.0.2704.106\tV8: 5.1.281.65\nï¼ˆå„æ–¹é¢éƒ½è¶³å¤Ÿæ–°ï¼ŒESå’ŒTSéƒ½å¯ä»¥æ’¸ä»£ç ï¼‰</p>\n<p><strong>2.å·¥å…·æ”¯æŒï¼šï¼ˆå®˜æ–¹æä¾›ï¼‰</strong>\nåŠŸèƒ½ä¸Šæ”¯æŒï¼š\nAutomatic updates\nNative menus &amp; notifications\nApp crash reporting\nDebugging &amp; profiling\nWindows installers</p>\n<p>å†™ä»£ç &amp;éƒ¨ç½²ï¼š\nElectron Packager â€” Package your apps<br>\nElectron Builder â€” Deploy your apps\nSpectron â€” Test your apps Devtron â€”\nDebug your apps Electron\nPrebuilt â€” Install Electron<br>\nMenubar â€” Create menubar apps</p>\n<p><strong>3.èŒæ–°çš„å­¦ä¹ ææ–™ï¼š</strong>\nå®˜ç½‘æä¾›ä¸€ä¸ªæ¯”è¾ƒå…¨é¢çš„DEMOï¼ŒåŒ…æ‹¬å¸¸è§„çš„ç³»ç»Ÿçº§åˆ«æ“ä½œï¼Œé€šä¿¡ï¼Œæˆªå›¾ï¼Œè°ƒç”¨PDFç­‰ä¾‹å­\nAPIæ”¯æŒå¤šè¯­è¨€ï¼Œå·²ç»ç¿»è¯‘å¥½ï¼Œä¸ªåˆ«ç¿»è¯‘ä¼šè®©è¯»è€…æ‡µé€¼\nAPIä¸­æœ‰ä¸å°‘ä¾‹å­ï¼Œä½†æ˜¯ä¸æ˜¯å¾ˆå…¨ï¼Œä¸ªäººè§‰å¾—æ˜¯ç”¨çš„äººæ¯”è¾ƒå°‘ï¼Œæœ‰å¯èƒ½ä¼šæœ‰å¡«å‘çš„æƒ…å†µ</p>\n<p><strong>4.æˆç†Ÿäº§å“ï¼š</strong>\nå®˜ç½‘ä¸Šåˆ—ä¸¾äº†å¾ˆå¤šï¼Œä¸ªäººè§‰å¾—åšçš„æ¯”è¾ƒå¥½çš„æ˜¯ï¼šVSCå’Œç™½é¹­çš„IDE\nï¼ˆç”±äºç™½é¹­çš„IDEä¸»è¦ä½œè€…æ˜¯æˆ‘å¸ˆå“¥ï¼Œä¹‹å‰è·Ÿä»–å­¦ä¹ äº†ä¸€ä¸‹ï¼Œæ•´ä¸ªä¸‹åˆéƒ½æ˜¯åœ¨å§æ§½ï¼ï¼çš„çŠ¶æ€ï¼‰</p>\n<h3>quick start</h3>\n<h4>2.1 æ­å»ºå¼€å‘ç¯å¢ƒ</h4>\n<p>1.å®˜ç½‘æ˜¯æœ‰ä¸ªä¸€ä¸ªquick startçš„ä¾‹å­çš„ï¼Œæˆ‘æ¨èå…ˆä¸‹è½½demoç‚¹ç‚¹çœ‹çœ‹ï¼Œ<a href>ä¼ é€é—¨</a></p>\n<p>2.ä¸‹è½½å®˜æ–¹çš„quick startçš„ä¾‹å­:</p>\n<pre class=\"prettyprint\"><code># Clone the Quick Start repository\n$ git clone https:&#x2F;&#x2F;github.com&#x2F;electron&#x2F;electron-quick-start\n\n# Go into the repository\n$ cd electron-quick-start\n\n# Install the dependencies and run\n$ npm install &amp;&amp; npm start\n</code></pre><p>ä½†æ˜¯å¦‚æœæœ‰å°ä¼™ä¼´æ²¡ç¿»å¢™ï¼Œè¢«æ‹¦åœ¨çš„å¯¡å¦‡ç½‘å†…ï¼Œnpm installå¤±è´¥äº†ï¼Œé‚£å°±ç”¨ä¸‹é¢è¿™ä¸ªåŠæ³•å§\nï¼ˆæ¢äº†æºä¹Ÿä¸å¥½ä½¿çš„è¯ï¼‰</p>\n<p>æ ¹æ®ç³»ç»Ÿå»æ·˜å®çš„é•œåƒä¸Šä¸‹è½½æœ€æ–°çš„ElectronåŒ…ï¼Œ<a href>ä¼ é€é—¨</a></p>\n<p>æˆ‘æ˜¯windows,è§£å‹ä¹‹åå¯ä»¥ç‚¹å‡»electron.exeå°±å¯ä»¥çœ‹åˆ°æç¤º</p>\n<pre class=\"prettyprint\"><code>To run your app with Electron, execute the following command in your Console (or Terminal):\nC:\\Users\\carlos\\Desktop\\electron\\electron.exe path-to-your-app\n</code></pre><p>æŠŠå·¥ç¨‹çš„æ–‡ä»¶å¤¹æ‹–è¿›æ¥ï¼Œæˆ–è€…æ‰§è¡Œcmdå‘½ä»¤å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ï¼Œæˆ‘æ˜¯è§‰å¾—è¿™é‡Œå¯ä»¥åŠ åˆ°ç¯å¢ƒå˜é‡é‡Œï¼Œä½†æ˜¯æ²¡å®ŒæˆåŠŸï¼Œç•™ä¸ªå°å‘ä»¥åå¡«</p>\n<p><strong>æ³¨æ„ï¼ŒElectronçš„Console.log()æ˜¯è¾“å‡ºåˆ°æ§åˆ¶å°çš„ï¼Œæ‰€ä»¥å½“ä½ concoleä¸€ä¸ªä¸œè¥¿çœ‹ä¸åˆ°çš„æ—¶å€™ï¼Œè¯•è¯•CMDå¯åŠ¨</strong></p>\n<p>ç°åœ¨</p>\n<ul>\n<li>api âˆš</li>\n<li>demo âˆš</li>\n<li>quick-start âˆš</li>\n<li>run environmentâˆš</li>\n<li>Hello world âˆš</li>\n</ul>\n<p>æ­å–œä½ å·²ç»å…¥å‘äº†</p>\n<h3>First Electron</h3>\n<p>å¦‚æœä½ æ˜¯ä¸€ä¸ªå¥½å­¦çš„åŒå­¦ï¼Œé‚£ä½ åº”è¯¥è‡ªå·±ç¢ç£¨quick-startï¼Œå¦‚æœä½ æ˜¯æ‡’ç™Œæ™šæœŸï¼Œé‚£å°±ç»§ç»­å¬æˆ‘é€¼é€¼</p>\n<h4>3.1 è¯·å»ºç«‹ä»¥ä¸‹ç›®å½•</h4>\n<pre class=\"prettyprint\"><code>your-app\n- main.js\n- index.html\n- package.json\n</code></pre><h4>3.2 è¯´æ˜</h4>\n<p>package.json çš„æ ¼å¼ä¸Nodeçš„æ¨¡å—æ ¼å¼æ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥å¼•å…¥ä¾èµ–</p>\n<pre class=\"prettyprint\"><code>{\n &quot;name&quot;: &quot;electron-quick-start&quot;,\n &quot;version&quot;: &quot;1.0.0&quot;,\n &quot;description&quot;: &quot;A minimal Electron application&quot;,\n &quot;main&quot;: &quot;main.js&quot;\n}\n</code></pre><p><strong>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œç°åœ¨çš„Electronå·²ç»ä¸æŒ‡å®šmain.jsåšä¸ºå…¥å£äº†ï¼Œåœ¨package.jsonä¸­å¯ä»¥è®¾ç½®å¯åŠ¨å…¥å£</strong></p>\n<p>main å°±æ˜¯ä½ åº”ç”¨çš„å¯åŠ¨è„šæœ¬ï¼Œè¯¥è„šæœ¬å°†è¿è¡Œåœ¨ä¸»è¿›ç¨‹ä¸­,è¯·ä¿è¯ä½ æ‹–è¿›Electronçš„æ–‡ä»¶å¤¹ä¸‹èƒ½æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F;å¼•å…¥electron\nconst electron = require(&#x27;electron&#x27;);\n&#x2F;&#x2F;appæ§åˆ¶æ•´ä¸ªElectronçš„å£°æ˜å‘¨æœŸ\nconst app =electron.app;\n&#x2F;&#x2F;åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„çª—å£\nconst BrowserWindow = electron.BrowserWindow\n&#x2F;&#x2F;ä¿æŒä¸€ä¸ªå…¨å±€çš„çª—å£å¯¹è±¡ï¼Œå¯ä»¥ä¸æ˜¾ç¤ºï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå¯¹è±¡ï¼Œçª—å£ç‚¹å‡»å…³é—­çš„æ—¶å€™ï¼Œjså¯¹è±¡ä¼šè¢«gcå¹²æ‰\nlet mainWindow;\n\nfunction createWindow(){\n mainWindow = new BrowserWindow({\n width: 800, \n height: 600\n })\n &#x2F;&#x2F;åŠ è½½é™æ€èµ„æº\n mainWindow.loadURL(&#x27;file:&#x2F;&#x2F;&#x27; + __dirname + &#x27;&#x2F;index.html&#x27;);\n\n mainWindow.on(&quot;closed&quot;,function(){\n mainWindow = null\n })\n}\n\n&#x2F;&#x2F;ç”Ÿå‘½å‘¨æœŸçš„å‡½æ•°å®šä¹‰\n&#x2F;&#x2F;è¿™é‡Œå¥½å¥½çœ‹api http:&#x2F;&#x2F;electron.atom.io&#x2F;docs&#x2F;api&#x2F;app&#x2F;\napp.on(&quot;ready&quot;,createWindow)\n\napp.on(&#x27;window-all-closed&#x27;, function () {\n if (process.platform !== &#x27;darwin&#x27;) {\n app.quit()\n }\n})\n\napp.on(&#x27;activate&#x27;, function () {\n if (mainWindow === null) {\n createWindow()\n }\n})\n</code></pre><p>index.htmlåšä¸ºé™æ€èµ„æºè¢«åŠ è½½ï¼Œå¯ä»¥å¼•ç”¨ä¸€äº›mvvmï¼Œæ¯”å¦‚ä¸€ä¼šå„¿æˆ‘ä¼šå¼•å…¥vueï¼Œä¹Ÿå¯ä»¥å¼•å…¥three.js</p>\n<pre class=\"prettyprint\"><code>&lt;!doctype html&gt;\n&lt;html&gt;\n\t&lt;head&gt;\n\t\t&lt;meta charset=&quot;utf-8&quot;&gt;\n\t&lt;&#x2F;head&gt;\n\t&lt;body&gt;\n\t\t&lt;h1&gt;Hello world&lt;&#x2F;h1&gt;\n\n\t&lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;\n\n</code></pre><h4>3.3.å¯åŠ¨</h4>\n<p>æ‹–æ‹½æ–‡ä»¶å¤¹åˆ°electron.exeä¸­ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„æ•ˆæœ</p>\n<p><img src=\"//dn-cnode.qbox.me/FrsUUhtzRJrNm5nxeC4oti5SovX_\" alt=\"electron1.jpg\"></p>\n<h4>3.4.æç‚¹äº‹</h4>\n<p>å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œåœ¨package.jsonä¸­æ·»åŠ ä¾èµ–ï¼Œæˆ–è€…åœ¨index.htmlä¸­</p>\n<pre class=\"prettyprint\"><code>mainWindow = new BrowserWindow({\n width: 800, \n height: 600,\n frame: false\n})\n</code></pre><h3>API</h3>\n<h4>4.1 MENU &amp; è®¾ç½®å¿«æ·é”®</h4>\n<p>å¼•å…¥menuæœ‰ä¸¤ç§æ–¹æ³•ï¼Œå†™åœ¨HTMlé‡Œï¼Œæˆ–è€…å†™åœ¨main.jsè¿™æ ·çš„æ–‡ä»¶é‡Œ\næˆ‘ä¸ªäººå–œæ¬¢åè€…ï¼Œå› ä¸ºHTMLè¯´ä¸å®šä¼šåˆ«çš„åœ°æ–¹ä¼šç”¨ï¼Œä¸Šæ¥å°±æŠ¥é”™ä¸å¤ªå¥½\næ¨èé˜…è¯»menuå’Œmenuiteamçš„å®˜æ–¹APIå’Œä¾‹å­\n<a href=\"http://electron.atom.io/docs/api/menu/\">http://electron.atom.io/docs/api/menu/</a>\n<a href=\"http://electron.atom.io/docs/api/menu-item/\">http://electron.atom.io/docs/api/menu-item/</a></p>\n<p>å…ˆçœ‹ä»£ç </p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F;å¼•å…¥menu\nlet Menu = electron.Menu;\n&#x2F;&#x2F;å¼•å…¥menuIteam\nlet MenuItem = electron.MenuItem\n&#x2F;&#x2F;åˆ›å»ºä¸€ä¸ªmenuIteam\nconst menuIteam_first = new MenuItem({\n\tlabel:&quot;Electron&quot;,\n\tsubmenu: [\n\t\t{\n \t&#x2F;&#x2F;éœ€è¦é€šè¿‡cmdæ¥å¯åŠ¨\n\t\t\tlabel:&quot;show sth in cmd&quot;,\n\t\t\tclick(){\n\t\t\t\tconsole.log(&quot;clickLabel&quot;)\n\t\t\t}\n\t\t},\n\t\t{\n \t&#x2F;&#x2F;åˆ›å»ºä¸€ä¸ªæ–°çš„çª—å£\n\t\t\tlabel:&quot;new window&quot;,\n\t\t\taccelerator:&quot;CmdOrCtrl+N&quot;,\n\t\t\trole:&quot;&quot;,\n\t\t\tclick(){\n\t\t\t\tlet newwindow = new BrowserWindow({\n\t\t\t\t\twidth: 400, \n \t\t\t\theight: 300,\n\t\t\t\t\tresizable:false\n\t\t\t\t})\n\t\t\t\tnewwindow.loadURL(&#x27;file:&#x2F;&#x2F;&#x27; + __dirname + &#x27;&#x2F;source&#x2F;electron1.jpg&#x27;);\n\t\t\t\tnewwindow.on(&quot;closed&quot;,function(){\n\t\t\t\t\tnewwindow = null\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t{\n \t&#x2F;&#x2F;å¯ä»¥çœ‹åˆ°ä¸€ä¸ªé€‰ä¸­çš„é€‰é¡¹\n\t\t\tlabel: &#x27;checked&#x27;, \n\t\t\ttype: &#x27;checkbox&#x27;, \n\t\t\tchecked: true\n\t\t},\n\t\t{\n \t&#x2F;&#x2F;æ‰€æœ‰menuIteamçš„labeléƒ½å¯ä»¥æœ‰submenu\n\t\t\tlabel: &#x27;Gender&#x27;, \n\t\t\tsubmenu:[\n\t\t\t\t{\n\t\t\t\t\tlabel:&quot;male&quot;,\n\t\t\t\t\ttype:&quot;radio&quot;,\n\t\t\t\t\tchecked:true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel:&quot;female&quot;,\n\t\t\t\t\ttype:&quot;radio&quot;,\n\t\t\t\t\tchecked:false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel:&quot;computer&quot;,\n\t\t\t\t\ttype:&quot;radio&quot;,\n\t\t\t\t\tchecked:true\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\n\t\t{\n \t&#x2F;&#x2F;åªå†™roleå¯ä»¥è°ƒç”¨ä¸€äº›é»˜è®¤çš„è®¾ç½®ï¼Œæ¯”å¦‚è¿™ä¸ªæ˜¯å…¨å±\n\t\t\trole: &#x27;togglefullscreen&#x27;\n\t\t},\n\t\t{\n \t&#x2F;&#x2F;acceleratoræ˜¯å®šä¹‰å¿«æ·é”®ï¼Œclickå¯ä»¥æŒ‰è‡ªå·±éœ€è¦å†™\n\t\t\tlabel: &#x27;Developer Tools&#x27;,\n\t\t\taccelerator: process.platform === &#x27;darwin&#x27; ? &#x27;CmdOrCtrl+I&#x27; : &#x27;CmdOrCtrl+I&#x27;,\n\t\t\tclick(item, focusedWindow) {\n\t\t\tif (focusedWindow)\n\t\t\t\tfocusedWindow.webContents.toggleDevTools();\n\t\t\t}\n\t\t},\n\t\t{\t\n \t&#x2F;&#x2F;å¯ä»¥è°ƒç”¨roleé»˜è®¤çš„åŒæ—¶é‡å†™ä¸€äº›éœ€è¦çš„å†…å®¹\n\t\t\tlabel:&quot;GOODBYE&quot;,\n\t\t\trole:&quot;quit&quot;,\n\t\t\taccelerator:&quot;CmdOrCtrl+Q&quot;\n\t\t}\n\t]\n});\n</code></pre><p>è§£é‡Šä¸€ä¸‹ï¼š\nåˆ›å»ºmenuå¾ˆç®€å•ä¸‰æ­¥å°±èƒ½è¯´æ¸…æ¥š\n1ã€åˆ›å»ºä¸€ä¸ªmenuå¯¹è±¡ï¼Œå®šä¹‰å¥½labelçš„å«ä»€ä¹ˆï¼Œå¾€é‡Œé¢å¡menuIteam\n2ã€å®šä¹‰ä½ çš„menuIteamï¼Œå¯ä»¥ç”¨roleç®€åŒ–ï¼Œä¹Ÿå¯ä»¥ä¸å†™roleï¼Œè‡ªå·±å†™click()å‡½æ•°\n3ã€æŒ‚åœ¨åˆ°ä½ çš„çª—å£ä¸Š</p>\n<p><strong>æ³¨æ„ï¼Œçª—å£çš„å®½å’Œé«˜æ˜¯æ•´ä¸ªè§†çª—çš„ï¼Œé—´è·è¾¹æ¡†å’Œå·¥å…·æ æ‰æ˜¯htmlçš„å®½å’Œé«˜ï¼Œè¦æ˜¯ä¸æƒ³éº»çƒ¦ï¼Œgive upè¿™éƒ¨åˆ†ï¼Œç”¨htmlå†™å¥½ç„¶åè°ƒç”¨ç³»ç»Ÿçš„jsæ¥å£å§</strong></p>\n<h4>4.2 æœ€å°åŒ–å›¾æ ‡</h4>\n<p>QQå¹³æ—¶æ˜¯å¯ä»¥æœ€å°åŒ–åˆ°å³ä¸‹è§’çš„ï¼Œç”¨Electronæ¥å®ç°å¾ˆå®¹æ˜“\nä½†æ˜¯è¯·ç¡®è®¤ä½ å·²ç»è¯»æ‡‚äº†Menuéƒ¨åˆ†</p>\n<p>è¿˜æ˜¯æ¨èå…ˆçœ‹API\n<a href=\"http://electron.atom.io/docs/api/tray\">http://electron.atom.io/docs/api/tray</a></p>\n<p>ç„¶åçœ‹ä»£ç ï¼š</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F;å¼•å…¥Tray\nlet Tray = electron.Tray;\nlet tray = null;\n\nfunction createWindow(){\n\tmainWindow = new BrowserWindow({\n\t\twidth: 800, \n\t\theight: 600\n\t})\n\t&#x2F;&#x2F;åŠ è½½é™æ€èµ„æº\n\tmainWindow.loadURL(&#x27;file:&#x2F;&#x2F;&#x27; + __dirname + &#x27;&#x2F;index.html&#x27;);\n\n\tlet image = nativeImage.createFromPath(&#x27;&#x2F;source&#x2F;electron1.jpg&#x27;);\n\n\ttray = new Tray(image);\n\n\tconst contextMenu = Menu.buildFromTemplate([\n\t\t\n\t\t{\n\t\t\tlabel:&quot;show&quot;,\n\t\t\tclick(){\n\t\t\t\tmainWindow.show()\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tlabel:&quot;Exit&quot;,\n\t\t\trole:&quot;quit&quot;\n\t\t}\n\t]);\n\t&#x2F;&#x2F; tray.setToolTip(&#x27;This is my application.&#x27;)\n\ttray.setContextMenu(contextMenu)\n\n\tmainWindow.on(&quot;closed&quot;,function(){\n\t\tmainWindow = null\n\t})\n\n}\n</code></pre><p>åˆ›å»ºä¸€ä¸ªå³ä¸‹è§’å°å›¾æ ‡å¾ˆç®€å•ï¼Œä¸¤æ­¥å³å¯\n1ã€å£°æ˜ä¸€ä¸ªå…¨å±€çš„trayå¯¹è±¡ï¼Œç„¶ååœ¨ä½ åˆ›å»ºä¸»çª—å£çš„åˆå§‹åŒ–å‡½æ•°ä¸­ï¼Œç»™å®ƒä¸€ä¸ªé»˜è®¤å›¾æ ‡\n2ã€åˆ›å»ºä¸€ä¸ªmenuï¼Œè¿™ä¸ªæ­¥éª¤è·Ÿåˆšæ‰ä¸€æ ·ï¼Œè®°å¾—ç»‘å®šåˆ°trayä¸Š</p>\n<p>æ³¨æ„ä¸€ç‚¹ï¼štrayçš„å›¾ç‰‡éœ€è¦nativeImageæ ¼å¼ï¼Œå…·ä½“ä»€ä¹ˆæ˜¯nativeImage<a href>çœ‹è¿™é‡Œ</a>,å¦‚æœä½ çš„å›¾æ ‡type Erroräº†ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨electronæä¾›çš„ä¸€ä¸ªè½¬æ¢å‡½æ•°æŠŠiçš„å›¾ç‰‡è½¬æ¢ä¸€ä¸‹</p>\n<pre class=\"prettyprint\"><code>const nativeImage = electron.nativeImage;\n</code></pre><h4>4.3 ipcMain</h4>\n<p>ipcMainæ˜¯ç”¨æ¥è®©mainWindowå’Œåˆ›å»ºçš„windowä»¬ä¼ é€’æ•°æ®</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F;main.js\nipcMain.on(&#x27;asynchronous-message&#x27;, (event, arg) =&gt; {\n console.log(arg); &#x2F;&#x2F; prints &quot;ping&quot;\n event.sender.send(&#x27;asynchronous-reply&#x27;, &#x27;pong&#x27;);\n});\n\nipcMain.on(&#x27;synchronous-message&#x27;, (event, arg) =&gt; {\n console.log(arg); &#x2F;&#x2F; prints &quot;ping&quot;\n event.returnValue = &#x27;pong&#x27;;\n});\n\n</code></pre><pre class=\"prettyprint\"><code>&lt;script&gt;\n const {ipcRenderer} = require(&#x27;electron&#x27;);\n\n console.log(ipcRenderer.sendSync(&#x27;synchronous-message&#x27;, &#x27;ping&#x27;)); \n\n ipcRenderer.on(&#x27;asynchronous-reply&#x27;, (event, arg) =&gt; {\n console.log(arg); &#x2F;&#x2F; prints &quot;pong&quot;\n });\n\n ipcRenderer.send(&#x27;asynchronous-message&#x27;, &#x27;ping&#x27;);\n&lt;&#x2F;script&gt;\n</code></pre><p><img src=\"//dn-cnode.qbox.me/Fr8ZiDjawra0bXpaLjw3qag_q_h_\" alt=\"electron2.jpg\"></p>\n<p>è§£é‡Šä¸€ä¸‹ï¼š\n1.åœ¨ä¸»çª—å£ä¸­å®šä¹‰ipcMainï¼Œæ³¨å†Œä¸€äº›åŒæ­¥orå¼‚æ­¥äº‹ä»¶æ¥å¤„ç†æ”¶åˆ°çš„äº‹ä»¶\n2.åœ¨éœ€è¦å‘æ¶ˆæ¯çš„çª—å£ï¼Œå‘é€æ¶ˆæ¯\n3.å¦‚æœæ˜¯å¼‚æ­¥çš„ï¼Œåœ¨å‘é€æ¶ˆæ¯çš„çª—å£ï¼Œå®šä¹‰æ¥æ”¶ä¿¡æ¯äº‹ä»¶</p>\n<h4>4.4 æ¡Œé¢æ•è·</h4>\n<p>å ä½ï¼Œå›°</p>\n<h3>End</h3>\n<p>å°±ä½¿ç”¨ç»“æœæ¥çœ‹ï¼Œè§†é¢‘ï¼ŒéŸ³é¢‘ç­‰æµåª’ä½“çš„è·å–æˆ‘è¿˜åœ¨ç ”ç©¶ï¼Œå…¶ä»–çš„æ¨¡å—Electronçš„è¡¨ç°è¿˜æ˜¯ç›¸å½“ä¸é”™çš„ï¼Œè‡³å°‘æˆ‘æƒ³åˆ°çš„æ¡Œé¢å¼€å‘éœ€æ±‚è¿˜æ˜¯éƒ½æœ‰çš„ã€‚å³ä½¿æ²¡æœ‰ï¼Œå’±ä»¬è¿˜æœ‰nodeå˜›ï¼Œå¤šèµ°ä¸€å±‚å°±æ˜¯äº†ã€‚</p>\n<p>éœ€æ±‚åœºæ™¯æˆ‘è§‰å¾—è¿˜æ˜¯è›®å¤šçš„ï¼Œæ¯”å¦‚ERPï¼ŒCMSéƒ½è¿™ç§é€šè¿‡ç½‘ç«™æ‰“å¼€çš„åœ¨çº¿åŠå…¬ç³»ç»Ÿæ¯”è¾ƒä¾èµ–ç½‘ç«™ï¼Œç”¨è¿™ä¸ªå°è£…ä¸€ä¸‹ï¼Œå¯ä»¥å…å»å¾ˆå¤šåˆçº§ç”¨æˆ·ï¼ˆäº¤äº’å®šä¹‰ä¸Šçš„ï¼‰çš„ä½¿ç”¨é£é™©</p>\n<p>å¼ºäº¤äº’çš„åœºæ™¯è¿˜æ˜¯æ¯”è¾ƒéœ€è¦æ¡Œé¢ç‰ˆçš„ï¼Œæ¯”å¦‚Towerã€é’‰é’‰è¿™æ ·çš„éƒ½æœ‰éœ€æ±‚</p>\n<p>æˆ‘å»ºè®®ç¨‹åºå‘˜ä»¬ç°åœ¨å¯ä»¥ä¸Šæ‰‹ç©ï¼Œè‡ªå·±åšä¸€ä¸ªé›†æˆè½¯ä»¶ï¼Œæ¯”å¦‚æˆ‘æ¥ä¸‹æ¥ä¼šå°†ç›‘æ§&amp;ç®¡ç†å·¥ç¨‹æ–‡ä»¶ï¼Œmdçš„ä¸€äº›æ–‡æ¡£çš„é¢„è§ˆï¼Œå‘å‘¨æŠ¥çš„è„šæœ¬ï¼Œçˆ¬è™«ç­‰ç­‰é›†æˆåˆ°ä¸€èµ·ï¼Œåšä¸€ä¸ªç»Ÿä¸€å…¥å£</p>\n<p><strong>æ¬¢è¿å„ä½æŒ‡æ­£&amp;äº¤æµ</strong></p>\n<p><strong>æœç»æ— è„‘é»‘</strong></p>\n<p>æ¨èé˜…è¯»\n<a href>å®˜ç½‘çš„ä¸€ç¯‡demoçš„ä»‹ç»</a></p>\n</div>",
"title": "Electronç®€ä»‹",
"last_reply_at": "2016-08-02T00:52:45.789Z",
"good": true,
"top": false,
"reply_count": 15,
"visit_count": 1735,
"create_at": "2016-07-09T17:03:32.535Z",
"author": {
"loginname": "CarlosRen",
"avatar_url": "https://avatars.githubusercontent.com/u/6012322?v=3&s=120"
}
},
{
"id": "579e341885dba6b12ac58583",
"author_id": "532a80b757287ed35700da1e",
"tab": "share",
"content": "<div class=\"markdown-text\"><h2>Javascript å®šä¹‰</h2>\n<ul>\n<li>å•çº¿ç¨‹</li>\n<li>å¼‚æ­¥ IO</li>\n<li>å¹¶å‘</li>\n<li>åŸºäºåŸå‹çš„é¢å‘å¯¹è±¡</li>\n<li>è„šæœ¬è¯­è¨€</li>\n</ul>\n<h2>Javascript å¼•æ“ä¸è¿è¡Œæ—¶ç¯å¢ƒ</h2>\n<p>Javascript å¼•æ“å’Œè¿è¡Œæ—¶ç¯å¢ƒè¿™ä¸¤ä¸ªæ¦‚å¿µå¾ˆå®¹æ˜“è¢«å¼„æ··ï¼Œä½†å®ƒä¿©çœŸä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚Javascript å¼•æ“åšçš„äº‹æƒ…æ˜¯å®ç° ECMAScript æ ‡å‡†ï¼Œè§£é‡Šï¼ˆæˆ–ç¼–è¯‘ï¼‰ Javascript ä»£ç ï¼›è€Œè¿è¡Œç¯å¢ƒæ˜¯åŒ…æ‹¬å¼•æ“å¹¶æä¾›ä¸€äº›ç±»åº“è®© Javascript ä»£ç èƒ½å¤Ÿåœ¨å…¶ä¸Šè¿è¡Œï¼Œä¾‹å¦‚ Chrome, Nodeã€‚</p>\n<h2>ä¸ºä»€ä¹ˆè®¾è®¡ä¸ºå•çº¿ç¨‹ï¼Ÿ</h2>\n<blockquote>\n<p>JavaScriptè¯­è¨€çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯å•çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆJavaScriptä¸èƒ½æœ‰å¤šä¸ªçº¿ç¨‹å‘¢ï¼Ÿè¿™æ ·èƒ½æé«˜æ•ˆç‡å•Šã€‚\nJavaScriptçš„å•çº¿ç¨‹ï¼Œä¸å®ƒçš„ç”¨é€”æœ‰å…³ã€‚ä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ŒJavaScriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œDOMã€‚è¿™å†³å®šäº†å®ƒåªèƒ½æ˜¯å•çº¿ç¨‹ï¼Œå¦åˆ™ä¼šå¸¦æ¥å¾ˆå¤æ‚çš„åŒæ­¥é—®é¢˜ã€‚æ¯”å¦‚ï¼Œå‡å®šJavaScriptåŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨æŸä¸ªDOMèŠ‚ç‚¹ä¸Šæ·»åŠ å†…å®¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åˆ é™¤äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ—¶æµè§ˆå™¨åº”è¯¥ä»¥å“ªä¸ªçº¿ç¨‹ä¸ºå‡†ï¼Ÿ\næ‰€ä»¥ï¼Œä¸ºäº†é¿å…å¤æ‚æ€§ï¼Œä»ä¸€è¯ç”Ÿï¼ŒJavaScriptå°±æ˜¯å•çº¿ç¨‹ï¼Œè¿™å·²ç»æˆäº†è¿™é—¨è¯­è¨€çš„æ ¸å¿ƒç‰¹å¾ï¼Œå°†æ¥ä¹Ÿä¸ä¼šæ”¹å˜ã€‚\nä¸ºäº†åˆ©ç”¨å¤šæ ¸CPUçš„è®¡ç®—èƒ½åŠ›ï¼ŒHTML5æå‡ºWeb Workeræ ‡å‡†ï¼Œå…è®¸JavaScriptè„šæœ¬åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯å­çº¿ç¨‹å®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œä¸”ä¸å¾—æ“ä½œDOMã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ–°æ ‡å‡†å¹¶æ²¡æœ‰æ”¹å˜JavaScriptå•çº¿ç¨‹çš„æœ¬è´¨ã€‚\næ‘˜è‡ª <a href=\"http://www.ruanyifeng.com/blog/2014/10/event-loop.html\">http://www.ruanyifeng.com/blog/2014/10/event-loop.html</a></p>\n</blockquote>\n<h2>å•çº¿ç¨‹å¦‚ä½•å¼‚æ­¥ï¼Œå¦‚ä½•å¹¶å‘ï¼Ÿ</h2>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ä¸€æ®µç¨‹åºä»£ç ä¸­å‘èµ·ä¸€ä¸ªè°ƒç”¨å¹¶ç­‰å¾…ç›´åˆ°è°ƒç”¨è¿”å›ç»“æœå†æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ï¼Œè¿™ä¸ªè°ƒç”¨å¯¹äºè¿™æ®µç¨‹åºæ¥è¯´æ˜¯åŒæ­¥çš„ï¼›è€Œå‘èµ·ä¸€ä¸ªè°ƒç”¨åä¸ç”¨ç­‰å¾…è°ƒç”¨ç»“æœè€Œç›´æ¥æ‰§è¡Œåé¢çš„ä»£ç ï¼Œè¿™ä¸ªè°ƒç”¨å¯¹äºè¿™æ®µç¨‹åºæ¥è¯´å°±æ˜¯å¼‚æ­¥çš„ã€‚</p>\n<p>å¼‚æ­¥æ„å‘³ç€åœ¨ä¸»é€»è¾‘ä¸­è¢«å¼‚æ­¥è°ƒç”¨çš„ä»£ç å’Œä¸»é€»è¾‘ç»§ç»­æ‰§è¡Œçš„ä»£ç ä¼šåŒæ—¶æ‰§è¡Œï¼Œè¿™å…¶å®æ˜¯å®ç°äº†å¹¶å‘ã€‚å›æƒ³ä¸€ä¸‹æˆ‘ä»¬åœ¨ Java æˆ–è€…å…¶å®ƒå¤šçº¿ç¨‹è¯­è¨€ä¸­æ˜¯å¦‚ä½•å®ç°å¼‚æ­¥çš„ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¦åˆ›å»ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ç„¶ååœ¨çº¿ç¨‹ä¸­æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡å’Œåˆ›å»ºå®ƒçš„çº¿ç¨‹å°±å¯ä»¥å¹¶å‘æ‰§è¡Œäº†ã€‚ä½† Javascript å•çº¿ç¨‹çš„ç‰¹æ€§æ˜¾ç„¶å’Œè¿™å¼‚æ­¥ã€å¹¶å‘æ˜¯æœ‰å†²çªçš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¯´ Javascript æ”¯æŒå¼‚æ­¥ï¼Œæ”¯æŒå¹¶å‘å‘¢ï¼Ÿ</p>\n<p>å…¶å®ç†è§£èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼ŒJavascript æœ¬èº«å¹¶ä¸æ˜¯å¼‚æ­¥çš„ï¼Œè€Œ Javascript ç¨‹åºæ˜¯å¼‚æ­¥çš„ã€‚å…·ä½“æ¥è¯´å°±æ˜¯ï¼ŒJavascript ç¼–å†™çš„ä»£ç è‡ªèº«è¿è¡Œäºå•çº¿ç¨‹ä¸­ï¼Œå½“é‡åˆ° IO è°ƒç”¨ï¼Œå°±æŠŠå®ƒä¸¢ç»™è¿è¡Œæ—¶ç¯å¢ƒå¤„ç†ï¼Œè‡ªèº«ç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ï¼Œå½“ IO è°ƒç”¨æœ‰äº†ç»“æœï¼Œä¼šå°†ç»“æœåŠå›è°ƒæ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼ŒJavascript çº¿ç¨‹ä¼šåœ¨åˆé€‚çš„æ—¶æœºå°†å›è°ƒå‡½æ•°å–å‡ºå¹¶æ‰§è¡Œã€‚</p>\n<p>Javascript ç¨‹åºçš„å¼‚æ­¥ç”±å…¶è¿è¡Œæ—¶ç¯å¢ƒæä¾›ï¼Œé€šè¿‡<code>event loop</code>å®ç°å¼‚æ­¥ç¼–ç¨‹ï¼Œå¹¶æä¾›å¹¶å‘æ”¯æŒã€‚</p>\n<p>å®ç°å¼‚æ­¥ç¼–ç¨‹å¯ä»¥æœ‰å¾ˆå¤šç§æ–¹å¼(<code>ç¼–ç¨‹æ¨¡å‹</code>)ï¼Œæƒ³äº†è§£æ›´å¤šå¯ä»¥å…ˆçœ‹çœ‹<a href=\"http://www.jianshu.com/p/c4dc7866eb81\">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>\n<h2>Javascript å…·ä½“æ˜¯å¦‚ä½•å·¥ä½œçš„</h2>\n<p>å•è¯´<code>Javascript æ˜¯å¦‚ä½•å·¥ä½œçš„</code>å…¶å®ä¸å¤ªå‡†ç¡®ï¼Œåº”è¯¥è¯´<code>Javascript åœ¨å…¶è¿è¡Œæ—¶ç¯å¢ƒä¸Šæ˜¯å¦‚ä½•å·¥ä½œçš„</code>æ‰å¯¹ï¼ŒNode å’Œ Chrome éƒ½æ˜¯ Javascript çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒä»¬ä½¿ç”¨ç›¸åŒçš„ JavaScript å¼•æ“(V8)ï¼Œéƒ½åº”ç”¨åŸºäº <code>event loop</code> çš„å¹¶å‘æ¨¡å‹( Chrome å†…æ ¸ä½¿ç”¨äº† libevent è€Œ Node åˆ™åŸºäº libuv )ï¼Œé‚£ä¹ˆ Javascript åœ¨è¿™æ ·çš„è¿è¡Œæ—¶ç¯å¢ƒä¸‹æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿ</p>\n<p>æ˜¯æ—¶å€™ç¥­å‡ºè¿™å¼ å›¾äº†\n<img src=\"http://img.blog.csdn.net/20160731235811549\" alt>ï¿¼</p>\n<blockquote>\n<p>æ­¤å›¾æ¥è‡ªPhilip Robertsçš„æ¼”è®²<a href=\"http://vimeo.com/96425312\">ã€ŠHelp, Iâ€™m stuck in an event-loopã€‹</a></p>\n</blockquote>\n<p>è¿™å¼ å›¾è®²çš„æ˜¯ Javascript åœ¨æµè§ˆå™¨ä¸­çš„å·¥ä½œåŸç†ï¼Œåœ¨ Node ä¸­ä¹Ÿå·®ä¸å¤šï¼Œå¾ˆå…·æœ‰ä»£è¡¨æ€§ã€‚</p>\n<p><strong>çœ‹å›¾è¯´è¯</strong></p>\n<ol>\n<li>V8 åœ¨ç¼–è¯‘æ‰§è¡Œ Javascript ä»£ç è¿‡ç¨‹ä¸­ä¼šç”Ÿæˆå †( heap ) å’Œæ ˆ ( stack )ï¼Œheap å­˜æ”¾çš„ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸€äº›å¯¹è±¡ï¼Œstack æ˜¯ Javascript æ‰§è¡Œæ ˆï¼Œç¨‹åºä»£ç ä¼šæ ¹æ®è°ƒç”¨å…³ç³»è¢«å‹å…¥æ ˆä¸­æ‰§è¡Œï¼›</li>\n<li>å½“é‡åˆ°è°ƒç”¨ WebAPIsï¼ˆIO æˆ–è€… å®šæ—¶å™¨ï¼‰æ—¶ï¼Œæµè§ˆå™¨ä¼šå“åº”è°ƒç”¨å¹¶ç›´æ¥è¿”å›ï¼Œstack ç»§ç»­æ‰§è¡Œå‰©ä½™ Javascript ä»£ç ï¼›</li>\n<li>å½“ WebAPIs è°ƒç”¨å®Œæˆï¼Œä¼šå°†ç›¸åº”çš„å›è°ƒä¸ç»“æœä¾æ¬¡æ”¾å…¥ <code>callback queue</code> ä¸­ï¼›</li>\n<li>å½“æ‰§è¡Œæ ˆä¸­å¦‚æœæ²¡æœ‰è¦æ‰§è¡Œçš„ Javascript ä»£ç ï¼Œåˆ™ä¼šé€šè¿‡ <code>event loop</code> æ£€æŸ¥å¹¶å–å‡º <code>callback queue</code> ä¸­ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¹¶æ‰§è¡Œå®ƒã€‚</li>\n</ol>\n<p>è¿™æ ·ï¼Œæˆ‘ä»¬æ‰€ç¼–å†™çš„ Javascript ä»£ç ä¼šåœ¨<code>æ‰§è¡Œå¼•æ“</code>çš„æ‰§è¡Œæ ˆä¸­ä»¥å•çº¿ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œè€Œæ‰€æœ‰ IO æˆ–å®šæ—¶ä»»åŠ¡ä¼šé€šè¿‡è¿è¡Œç¯å¢ƒå¼‚æ­¥æ‰§è¡Œï¼Œå¹¶å°†æ‰§è¡Œç»“æœæ”¾åœ¨ <code>callback queue</code> ä¸­ç­‰å¾…è¢«è°ƒç”¨ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å•çº¿ç¨‹å¼‚æ­¥çš„å·¥ä½œåŸç†ï¼Œå½“ç„¶ Javascript å®é™…è¿è¡Œç¯å¢ƒçš„å®ç°ä¼šæ¯”è¿™å¤æ‚ä¸€äº›ï¼Œä½†åŸºæœ¬åŸç†å°±æ˜¯è¿™æ ·ï¼›ç†è§£è¿™ä¸ªåŸç†èƒ½å¤Ÿè®©æˆ‘ä»¬æ›´åŠ æ¸…æ¥šæˆ‘ä»¬çš„æ¯ä¸€æ®µä»£ç åœ¨è¿è¡Œç¯å¢ƒä¸­æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Œæœ‰å¾ˆå¤šç–‘æƒ‘ä¾‹å¦‚ï¼šç¨‹åºä»£ç ä¸­çš„å¤šä¸ªå›è°ƒä¼šåœ¨ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨ï¼Ÿä¸ºä»€ä¹ˆå¤æ‚çš„è®¡ç®—é€»è¾‘è¦ä½¿ç”¨ <code>setImmediate(function () { // è®¡ç®—é€»è¾‘ }); æˆ– process.nextTick(function () { // è®¡ç®—é€»è¾‘ });</code> åŒ…èµ·æ¥ï¼Ÿå°±å®¹æ˜“ç†è§£äº†ã€‚</p>\n<h2>å°ç»“</h2>\n<p>æœ¬æ–‡ä¸»è¦è§£é‡Šäº† Javascript ä½œä¸ºå•çº¿ç¨‹è¯­è¨€ï¼Œå…¶ç¨‹åºæ˜¯å¦‚ä½•å®ç°å¼‚æ­¥çš„ï¼ŒåŒæ—¶ä¹Ÿå¤§æ¦‚è®²è§£äº† Javascript åœ¨å…¶è¿è¡Œæ—¶ç¯å¢ƒä¸­çš„å·¥ä½œåŸç†ï¼›åœ¨è§£æƒ‘çš„åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€äº›ç–‘æƒ‘ï¼š</p>\n<ul>\n<li><code>setImmediate å’Œ process.nextTick</code> çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n<li>æ—¢ç„¶ Javascript ç¨‹åºä¹Ÿæ˜¯é€šè¿‡(è¿è¡Œæ—¶ç¯å¢ƒ)åº•å±‚çš„å¤šçº¿ç¨‹å®ç°å¼‚æ­¥ï¼Œé‚£è·Ÿå¤šçº¿ç¨‹è¯­è¨€å®ç°çš„å¼‚æ­¥æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</li>\n<li>ä¸ºä»€ä¹ˆè¯´åŸºäº <code>Event loop</code> å®ç°å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹çš„ <code>Node</code> æ›´é€‚åˆ IO å¯†é›†å‹çš„åº”ç”¨ï¼Œåº•å±‚ä¸éƒ½æ˜¯å¤šçº¿ç¨‹å—ï¼Ÿ</li>\n</ul>\n<p>è¿™äº›é—®é¢˜ä¹Ÿæ˜¯æˆ‘åœ¨åš Javascript å¼€å‘ä¸åŒé˜¶æ®µä¸­çœŸçœŸå®å®é‡åˆ°çš„ç–‘æƒ‘ï¼Œé€šè¿‡è‡ªå·±ä¸€æ­¥ä¸€æ­¥çš„æ¢ç´¢å¾—åˆ°äº†ä¸€äº›è§£é‡Šï¼Œå¸Œæœ›ä¹Ÿèƒ½å¸®åˆ°æ­£é‡åˆ°è¿™äº›ç–‘æƒ‘çš„æœ‹å‹ä»¬ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œè¯·æŒ‡å‡ºã€‚</p>\n<p>ç¯‡å¹…åŸå› ï¼ˆæ‰æ€ªï¼Œå› ä¸ºæ‡’ï¼‰è¿™äº›ç–‘æƒ‘ä¸‹ä¸€ç¯‡å†æ¥æ¢è®¨ã€‚</p>\n<h2>å‚è€ƒ</h2>\n<p><a href=\"http://blog.csdn.net/lin_credible/article/details/40143961\">æœ´çµè¯„æ³¨-JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loop</a>\n<a href=\"http://vimeo.com/96425312\">Help, Iâ€™m stuck in an event-loop</a>\n<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop\">å¹¶å‘æ¨¡å‹ä¸Event Loop</a>\n<a href=\"http://www.cnblogs.com/dolphinX/p/3475090.html\">å…³äºnode.jsçš„è¯¯ä¼š</a>\n<a href=\"https://github.com/goddyZhao/GPosts/blob/master/javascript/%E9%80%9A%E8%BF%87%E4%BB%80%E4%B9%88%E9%80%94%E5%BE%84%E8%83%BD%E5%A4%9F%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3JavaScript%E8%A7%A3%E6%9E%90%E5%BC%95%E6%93%8E%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84%EF%BC%9F.md\">é€šè¿‡ä»€ä¹ˆé€”å¾„èƒ½å¤Ÿæ·±å…¥äº†è§£JavaScriptè§£æå¼•æ“æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</a>\n<a href=\"https://cnodejs.org/topic/4f16442ccae1f4aa2700113b\">nodejså¼‚æ­¥IOçš„å®ç°</a></p>\n</div>",
"title": "Javascript å·¥ä½œåŸç†",
"last_reply_at": "2016-08-02T00:52:18.910Z",
"good": true,
"top": false,
"reply_count": 14,
"visit_count": 658,
"create_at": "2016-07-31T17:23:36.199Z",
"author": {
"loginname": "sweetvvck",
"avatar_url": "https://avatars.githubusercontent.com/u/3828494?v=3&s=120"
}
},
{
"id": "56a3c8f47ec020ed4b96b2cd",
"author_id": "556d9f40bf871b3962efb841",
"tab": "share",
"content": "<div class=\"markdown-text\"><p>æœ¬ç¯‡æ–‡ç« ç¿»è¯‘è‡ªexpressjså®˜æ–¹ç½‘ç«™ï¼Œæºåœ°å€å¦‚ä¸‹ï¼š<a href=\"http://expressjs.com/en/advanced/best-practice-performance.html\">expressæœ€ä½³å®è·µ</a> ,åˆ†åˆ«ä»devè§’åº¦å’Œopsè§’åº¦è®¨è®ºäº†å¦‚ä½•æå‡expressåº”ç”¨çš„è¿è¡Œæ€§èƒ½ä»¥åŠéƒ¨ç½²çš„æœ€ä½³æ–¹å¼ã€‚</p>\n<p>æ¬¢è¿è®¿é—®<a href=\"http://jsmean.com/blog/post/56a3b2947b7d4ff930cc7475\">ä¸ªäººblog</a>æŸ¥çœ‹æœ¬æ–‡å†…å®¹ã€‚</p>\n<h3>é’ˆå¯¹å¼€å‘è€…éœ€è¦æ³¨æ„çš„é—®é¢˜</h3>\n<p>å¯¹äºä¸€ä¸ªexpressåº”ç”¨æˆ‘ä»¬ï¼Œä¸€èˆ¬æœ‰ä»¥ä¸‹çš„å‡ ç§æ–¹æ³•æ¥æå‡åº”ç”¨çš„è¿è¡Œæ•ˆç‡ä»¥åŠå“åº”ç‡ã€‚</p>\n<ol>\n<li>ä½¿ç”¨gzipå‹ç¼©</li>\n<li>ä»£ç ä¸­ä¸è¦ä½¿ç”¨åŒæ­¥å‡½æ•°</li>\n<li>ä½¿ç”¨ä¸­é—´ä»¶å¤„ç†é™æ€æ–‡ä»¶</li>\n<li>åˆç†çš„æ—¥å¿—å¤„ç†æ–¹æ³•</li>\n<li>æ­£ç¡®çš„å¤„ç†å¼‚å¸¸</li>\n</ol>\n<p>ä»¥ä¸‹æˆ‘ä»¬å°†åˆ†åˆ«å¯¹äºæ¯ä¸ªå­é¡¹ç›®è¿›è¡Œå±•å¼€åˆ†æã€‚</p>\n<h5>1.ä½¿ç”¨gzipå‹ç¼©</h5>\n<p>ä½¿ç”¨gzipå‹ç¼©å¯ä»¥æ˜¾è‘—çš„å‡å°å“åº”åŒ…çš„å¤§å°ï¼Œè¿™æ ·å°±æå‡äº†å®¢æˆ·ç«¯çš„å“åº”é€Ÿåº¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨compressionä¸­é—´ä»¶æ¥å¤„ç†gzipçš„å‹ç¼©ã€‚å¯¹äºä¸€ä¸ªå¤§é‡ç”¨æˆ·çš„ç½‘ç«™ï¼Œæœ€ä½³çš„æ–¹å¼æ˜¯åœ¨åå‘ä»£ç†ç«¯è®¾ç½®å‹ç¼©æ–¹å¼ã€‚å¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ä¸“é—¨ä»‹ç»å¦‚ä½•é…ç½®nginxæ¥å¤„ç†å‹ç¼©å’Œé™æ€æ–‡ä»¶çš„ã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬åœ¨ä»£ç ç«¯å°±ä¸ç”¨å†è°ƒç”¨compressionä¸­é—´ä»¶äº†ï¼Œnginxä¼šå¸®åŠ©æˆ‘ä»¬å®Œæˆæ­¤é¡¹å·¥ä½œã€‚</p>\n<pre class=\"prettyprint\"><code>var compression = require(&#x27;compression&#x27;);\nvar express = require(&#x27;express&#x27;);\nvar app = express();\napp.use(compression());\n</code></pre><h5>2.ä¸è¦ä½¿ç”¨åŒæ­¥å‡½æ•°</h5>\n<p>æˆ‘ä»¬çŸ¥é“nodeä¸»è¿›ç¨‹ä¸ºä¸€ä¸ªå•ä¸€çº¿ç¨‹çš„ç¨‹åº(å¼‚æ­¥å¤„ç†ä¸ºå¤šçº¿ç¨‹)ã€‚ä¸»çº¿ç¨‹ä¸­å¦‚æœæˆ‘ä»¬è°ƒç”¨ä¸€äº›åŒæ­¥å‡½æ•°ï¼Œè€Œä¸”è¿™äº›åŒæ­¥å‡½æ•°æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œåˆ™ä¼šå½±å“åç»­ç¨‹åºçš„æ‰§è¡Œç­‰å¾…æ—¶é—´ã€‚é’ˆå¯¹webç«¯åˆ™è¡¨ç°ä¸ºå…¶ä»–ç”¨æˆ·çš„è®¿é—®å»¶è¿Ÿå¢å¤§ã€‚æ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå³ä¾¿ä¸€ä¸ªè¿”å›å‡ ä¸ªå¾®å¦™çš„ç¨‹åºï¼Œå¯¹äºå¤§é‡ç”¨æˆ·çš„è®¿é—®éƒ½å°†ä¼šé€ æˆç§¯ç´¯æ•ˆåº”ã€‚æ‰€ä»¥å°½é‡ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼å»ç¼–å†™ä»£ç ã€‚</p>\n<p>å¦‚æœä½¿ç”¨Node.js 4.0+ æˆ–è€… io.js 2.1.0+,å¯ä»¥ä½¿ç”¨å‚æ•° --trace-sync-io å»æ‰“å°é’ˆå¯¹åŒæ­¥å‡½æ•°çš„å‘Šè­¦ä¿¡æ¯ã€‚</p>\n<h5>3.ä½¿ç”¨ä¸­é—´ä»¶æ¥å¤„ç†é™æ€æ–‡ä»¶</h5>\n<p>æˆ‘ä»¬æœ‰æ—¶å€™è°ƒç”¨res.sendFile()æ¥å¤„ç†é™æ€æ–‡ä»¶ï¼Œä½†æ˜¯ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œè¿™æ ·ä¼šé’ˆå¯¹æ¯ä¸ªè¯·æ±‚éƒ½å»è¯»è¯¥æ–‡ä»¶ï¼Œä¸ä»…æ²¡æœ‰æ•ˆç‡è€Œä¸”å½±å“æ•´ä½“çš„æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨serve-staticä¸­é—´ä»¶æ¥å¤„ç†æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬æ¨èçš„æ›´å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨nginxç­‰åå‘ä»£ç†é™æ€æ–‡ä»¶ã€‚</p>\n<h5>4.åˆç†çš„æ—¥å¿—å¤„ç†æ–¹å¼</h5>\n<p>æˆ‘ä»¬åœ¨å¼€å‘ç¯å¢ƒä¸­æœ‰æ—¶å€™ä¼šé€šè¿‡console.logæˆ–è€…console.erræ ‡è®°ä¸€äº›ç‚¹æˆ–è€…è°ƒè¯•è¾“å‡ºå†…å®¹.ä½†æ˜¯è¿™äº›å‡½æ•°éƒ½æ˜¯åŒæ­¥çš„ï¼Œå°†è¾“å‡ºå†…å®¹è¾“å‡ºåˆ°ç»ˆç«¯ä¸è¾“å‡ºåˆ°æ–‡ä»¶çš„é“ç†æ˜¯ç›¸åŒï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸è¦è¿™æ ·åšã€‚é™¤éä¸å¾—å·²å»è®²è¾“å‡ºä¼ é€’åˆ°å¦ä¸€ä¸ªç¨‹åºä¸­çš„æ—¶å€™ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨debugæ¨¡å—æ¥å®ç°è¾“å‡ºï¼Œè¯¥æ¨¡å—å°†åˆ¤æ–­ç¯å¢ƒå˜é‡æ˜¯å¦æ˜¯å¼€å‘ç¯å¢ƒï¼Œæ‰§è¡Œdebugè¾“å‡ºï¼Œä¿è¯ä½ çš„ç¨‹åºçš„å¼‚æ­¥å¤„ç†ã€‚å¯¹äºè®°å½•æ—¥å¿—çš„è¯ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸€ç¯‡é’ˆå¯¹æ—¥å¿—ç³»ç»Ÿçš„æ¯”è¾ƒæ–‡ç« <a href=\"https://strongloop.com/strongblog/compare-node-js-logging-winston-bunyan/?_ga=1.264536015.1196661681.1453521338\">æ¯”è¾ƒWinstonå’ŒBunyan</a>ã€‚</p>\n<h5>5. æ­£ç¡®çš„å¤„ç†å¼‚å¸¸</h5>\n<p>é¦–å…ˆå¯¹äºnodeç¨‹åºæ¥è¯´ï¼Œä¸€æ—¦é‡åˆ°ä¸å¯å¤„ç†çš„å¼‚å¸¸ï¼Œåˆ™æ•´ä¸ªè¿›ç¨‹å°±ä¼šdownæ‰ï¼Œå¦‚æœæˆ‘ä»¬é…ç½®äº†pm2æˆ–è€…foreverè¿™æ ·çš„è¿›ç¨‹ç®¡ç†å·¥å…·çš„è¯ï¼Œä»–ä¼šå¸®åŠ©æˆ‘ä»¬å»å¤„ç†æˆ‘ä»¬çš„ç¨‹åºå¤±è´¥è‡ªå¯åŠ¨ã€‚</p>\n<p>å¯¹äºä»£ç ä¸­å¼‚å¸¸çš„å¤„ç†æˆ‘ä»¬ä¸€èˆ¬çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>\n<ol>\n<li>ä½¿ç”¨try-catch</li>\n<li>ä½¿ç”¨<a href=\"http://expressjs.com/en/advanced/best-practice-performance.html#promises\">promises</a></li>\n</ol>\n<p>è¿™é‡Œæœ‰ä¸€ç¯‡æ–‡ç« æ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»äº†å¦‚ä½•æ„å»ºå¥å£®çš„ç¨‹åºæ¥å¤„ç†é”™è¯¯å¼‚å¸¸ï¼Œä¾›å‚è€ƒ<a href=\"https://strongloop.com/strongblog/robust-node-applications-error-handling/?_ga=1.24936442.1196661681.1453521338\">é“¾æ¥åœ°å€</a></p>\n<p>ä¸è¦ä½¿ç”¨uncaughtExceptionæ¥å¤„ç†æ‰€æœ‰çš„å¼‚å¸¸ï¼Œè™½ç„¶ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥å¯¼è‡´ä½ çš„ç¨‹åºä¸ä¸­æ–­ï¼Œä½†æ˜¯ç¨‹åºå°†åŒ…å«ä¸ç¨³å®šçš„ä»£ç æŒç»­çš„è¿è¡Œä¸‹å»ï¼Œè¿™æ ·çš„ä»£ç è¿è¡Œåœ¨çº¿ä¸Šå¯èƒ½é€ æˆçš„åæœæ›´åŠ çš„ä¸¥é‡ï¼Œç”šè‡³æœ‰è¿‡å»ºè®®å°†è¯¥é”™è¯¯å¤„ç†æ–¹å¼ç§»é™¤nodeå†…æ ¸ã€‚</p>\n<p>ä¹Ÿä¸è¦ä½¿ç”¨domainsæ¥å¤„ç†é”™è¯¯ï¼Œè¯¥æ¨¡å—å·²è¢«æ ‡è®°ä¸ºå¾…ç§»é™¤æ¨¡å—ã€‚</p>\n<p>ä½¿ç”¨try-catchæ˜¯ä¸€ç§æ¯”è¾ƒç®€å•çš„é”™è¯¯å¤„ç†æ–¹å¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>\n<pre class=\"prettyprint\"><code>app.get(&#x27;&#x2F;search&#x27;, function (req, res) {\n &#x2F;&#x2F; Simulating async operation\n setImmediate(function () {\n var jsonStr = req.query.params;\n try {\n var jsonObj = JSON.parse(jsonStr);\n res.send(&#x27;Success&#x27;);\n } catch (e) {\n res.status(400).send(&#x27;Invalid JSON string&#x27;);\n }\n });\n});\n</code></pre><p>ä½†æ˜¯æˆ‘ä»¬çŸ¥é“try-catchåªèƒ½åº”ç”¨åœ¨åŒæ­¥çš„ä»£ç ä¸Šé¢ï¼Œå¯¹äºå¼‚æ­¥çš„ä»£ç å¤„ç†æˆ‘ä»¬æ— æ³•ä½¿ç”¨è¯¥æ–¹å¼è¿›è¡Œå¤„ç†ã€‚å¯¹äºå¼‚æ­¥ä»£ç çš„å¼‚å¸¸å¤„ç†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨promisesæ¥å®Œæˆã€‚åªéœ€è¦å¢åŠ ä¸€ä¸ªcatch()æ–¹æ³•å°±å¯ä»¥æ•è·æµç¨‹ä¸­çš„æ•´ä¸ªä»£ç å—çš„å¼‚å¸¸ã€‚</p>\n<pre class=\"prettyprint\"><code>app.get(&#x27;&#x2F;&#x27;, function (req, res, next) {\n &#x2F;&#x2F; do some sync stuff\n queryDb()\n .then(function (data) {\n &#x2F;&#x2F; handle data\n return makeCsv(data)\n })\n .then(function (csv) {\n &#x2F;&#x2F; handle csv\n })\n .catch(next);\n});\n\napp.use(function (err, req, res, next) {\n &#x2F;&#x2F; handle error\n});\n</code></pre><p>å½“ç„¶äº†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªä»£ç å—ä¸­éƒ½åŠ å…¥promisesè¿”å›ã€‚æ›´å¤šçš„ä¿¡æ¯å¯ä»¥å‚è€ƒä¸€ä¸‹é“¾æ¥<a href=\"https://strongloop.com/strongblog/async-error-handling-expressjs-es7-promises-generators/?_ga=1.235763905.1196661681.1453521338\">Asynchronous Error Handling in Express with Promises, Generators and ES7</a>ã€‚</p>\n<h3>ç”Ÿäº§ç¯å¢ƒå®‰è£…éƒ¨ç½²</h3>\n<p>ä»¥ä¸‹æˆ‘ä»¬è®¨è®ºçš„æ˜¯é’ˆå¯¹ç”Ÿäº§ç¯å¢ƒä¸­expressåº”ç”¨å®‰è£…éƒ¨ç½²ä¸Šéœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚</p>\n<ol>\n<li>è®¾ç½®NODE_ENVä¸ºâ€œproductionâ€</li>\n<li>ç¡®ä¿åº”ç”¨çš„è‡ªåŠ¨é‡å¯</li>\n<li>å°†åº”ç”¨éƒ¨ç½²ä¸€ä¸ªé›†ç¾¤ä¸­</li>\n<li>ç¼“å­˜è¯·æ±‚ç»“æœ</li>\n<li>ä½¿ç”¨è´Ÿè½½å‡è¡¡</li>\n<li>ä½¿ç”¨åå‘ä»£ç†</li>\n</ol>\n<h5>1. è®¾ç½®è¿è¡Œç¯å¢ƒå˜é‡</h5>\n<p>ä¸€èˆ¬æˆ‘ä»¬è®¾ç½®nodeç¯å¢ƒå˜é‡æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯ development å’Œ productionã€‚è®¾ç½®ç¯å¢ƒå˜é‡ä¸ºproductionå°†ä¼šä½¿å¾—expressåº”ç”¨</p>\n<ol>\n<li>ç¼“å­˜è§†å›¾æ¨¡æ¿</li>\n<li>ç¼“å­˜cssæ–‡ä»¶</li>\n<li>ç”Ÿæˆæ›´å°‘çš„å†—ä½™é”™è¯¯ä¿¡æ¯</li>\n</ol>\n<p>å¦å¤–å¦‚æœå¤§å®¶æ„Ÿå…´è¶£çš„è¯å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« <a href=\"http://apmblog.dynatrace.com/2015/07/22/the-drastic-effects-of-omitting-node_env-in-your-express-js-applications/\">ç¯å¢ƒå˜é‡æµ‹è¯•</a>ï¼Œè¿™é‡Œä½œè€…å¯¹äºè®¾ç½®è¯¥å˜é‡å‰ååšäº†ä¸€äº›æ€§èƒ½ä¸Šçš„å¯¹æ¯”ï¼Œéå¸¸è¯¦ç»†ã€‚</p>\n<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨upstartæ¥ç®¡ç†åº”ç”¨çš„è¯æˆ‘ä»¬éœ€è¦é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ç¯å¢ƒå˜é‡</p>\n<pre class=\"prettyprint\"><code># &#x2F;etc&#x2F;init&#x2F;env.conf\nenv NODE_ENV=production\n</code></pre><p>å¦‚æœæ˜¯ä½¿ç”¨systemdæ¥ç®¡ç†çš„è¯ï¼Œåˆ™ä¿®æ”¹é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint\"><code># &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;myservice.service\nEnvironment=NODE_ENV=production\n</code></pre><h5>2.ç¡®ä¿è‡ªå¯åŠ¨</h5>\n<p>è¿™é‡Œè‡ªå¯åŠ¨ä¸ä»…ä»…æŒ‡çš„æ˜¯å¦‚ä½•åœ¨ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ä¹‹åå¯åŠ¨è€Œä¸”è¿˜è¦ä¿è¯ç¨‹åºåœ¨æ“ä½œç³»ç»Ÿé‡å¯ä¹‹åèƒ½è‡ªå¯åŠ¨ã€‚è¿™é‡Œæˆ‘ä»¬åˆ†åˆ«ä»‹ç»ä¸‹ä¸¤ç§æƒ…å†µã€‚</p>\n<ol>\n<li>ä½¿ç”¨ä¸€ä¸ªè¿›ç¨‹ç®¡ç†å™¨</li>\n</ol>\n<p>è¿›ç¨‹ç®¡ç†å™¨ä¸€èˆ¬å¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼Œè·å¾—è¿›ç¨‹çš„è¿è¡Œæ€§èƒ½å’Œèµ„æºçš„æ¶ˆè€—ï¼ŒåŠ¨æ€çš„ä¿®æ”¹é…ç½®æå‡æ€§èƒ½ï¼Œé›†ç¾¤æ§åˆ¶ã€‚è¿™é‡Œæˆ‘ä¹ˆæ¨èçš„ä¸€èˆ¬å¯ä»¥ä½¿ç”¨strongloop process manageræˆ–è€…pm2è¿˜æœ‰foreverï¼ŒåŒæ ·è¯¦ç»†çš„å‚è€ƒå¦‚ä¸‹é“¾æ¥<a href=\"http://strong-pm.io/compare/?_ga=1.20403576.1196661681.1453521338\">è¿›ç¨‹ç®¡ç†å™¨æ¯”è¾ƒ</a>\né€šè¿‡ä¸Šè¿°çš„æ¯”è¾ƒæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œstrongloopçš„è¿›ç¨‹ç®¡ç†å™¨æ”¯æŒçš„ç‰¹æ€§æ›´ä¸°å¯Œä¸€äº›ï¼Œç‰¹åˆ«æ˜¯æŸ¥çœ‹cpuå ç”¨å †å ç”¨ï¼Œé›†æˆæ“ä½œç³»ç»Ÿè„šæœ¬ï¼Œè¿œç¨‹ç®¡ç†é›†ç¾¤ç­‰ç­‰ã€‚</p>\n<ol>\n<li>éšç³»ç»Ÿå¯åŠ¨çš„ç¨‹åºè‡ªå¯åŠ¨</li>\n</ol>\n<p>éšç³»ç»Ÿå¯åŠ¨çš„ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹‹å‰çš„è¿›ç¨‹ç®¡ç†å™¨ï¼Œforeveråº”è¯¥æ˜¯ä¸æ”¯æŒçš„ã€‚å…¶ä»–çš„éƒ½å¯ä»¥ç”Ÿæˆå¯¹åº”çš„å¯åŠ¨è„šæœ¬ï¼Œå½“æ“ä½œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œè¿›ç¨‹ç®¡ç†å™¨å¯åŠ¨ï¼Œå¹¶å¸¦åŠ¨ç¨‹åºçš„å¯åŠ¨ã€‚æˆ–è€…æˆ‘ä»¬å¯ä»¥ç›´æ¥é…ç½®ä½¿ç”¨systemdç­‰æ–¹å¼æ¥ç®¡ç†è¿›ç¨‹çš„å¼€æœºå¯åŠ¨ã€‚\næˆ‘ä»¬è¿™é‡Œç®€å•çš„é€šè¿‡ä»‹ç»systemdçš„æ–¹å¼æ¥ä»‹ç»å¦‚ä½•è®¾ç½®ç¨‹åºçš„éšç³»ç»Ÿå¯åŠ¨ã€‚systemdæ˜¯ä¸€ä¸ªlinuxç³»ç»Ÿçš„æœåŠ¡ç®¡ç†å™¨ã€‚ä¸€ä¸ªsystemdçš„é…ç½®æ–‡ä»¶è¢«ç§°ä½œä¸ºunit file.ä»¥.serviceä¸ºåç¼€ã€‚</p>\n<pre class=\"prettyprint\"><code>[Unit]\nDescription=Awesome Express App\n\n[Service]\nType=simple\nExecStart=&#x2F;usr&#x2F;local&#x2F;bin&#x2F;node &#x2F;projects&#x2F;myapp&#x2F;index.js\nWorkingDirectory=&#x2F;projects&#x2F;myapp\n\nUser=nobody\nGroup=nogroup\n\n# Environment variables:\nEnvironment=NODE_ENV=production\n\n# Allow many incoming connections\nLimitNOFILE=infinity\n\n# Allow core dumps for debugging\nLimitCORE=infinity\n\nStandardInput=null\nStandardOutput=syslog\nStandardError=syslog\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n</code></pre><h5>3. å°†appè¿è¡Œåœ¨ä¸€ä¸ªé›†ç¾¤ä¸­</h5>\n<p>åœ¨å¤šæ ¸å¿ƒå¤„ç†ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨clusteræ¨¡å—å¯åŠ¨å¤šä¸ªå®ä¾‹è¿è¡Œåœ¨ä¸åŒçš„å¤„ç†å™¨ä¸Šã€‚å¹¶åœ¨å¤šä¸ªå®ä¾‹ä¸Šå®ç°â€œè´Ÿè½½å‡è¡¡â€ã€‚\n<img src=\"http://expressjs.com/images/clustering.png\" alt=\"image\">\nä½†æ˜¯å¯¹äºä¸åŒçš„å®ä¾‹ï¼Œç”±äºå†…å­˜ç©ºé—´çš„éš”ç¦»ï¼Œå¯¼è‡´æ‰€æœ‰çš„ç¨‹åºå¯¹è±¡éƒ½æ˜¯æœ¬åœ°çš„ï¼Œæ— æ³•å®ç°å…±äº«ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å€ŸåŠ©äºredisè¿™æ ·çš„å·¥å…·å®ç°å¯¹è±¡çš„å…±äº«ã€‚å¹¶ä¸”å¯¹äºæŸä¸ªè¿›ç¨‹çš„ç»ˆç«¯ä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹çš„å¤„ç†ï¼Œåªéœ€è¦åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™è®°å½•æ­¤æ¬¡ç»ˆç«¯å¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„å®ä¾‹å³å¯ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨nodeçš„clusteræ¨¡å—ï¼ˆéœ€è¦ç¼–å†™ä»£ç å®ç°ï¼‰æˆ–è€…æ˜¯strongloopçš„è¿›ç¨‹ç®¡ç†å™¨æ¥å¤„ç†ï¼Œå¹¶ä¸”ä¸éœ€è¦ä¿®æ”¹ä»£ç ã€‚strongloop PMå°†æ ¹æ®cpuçš„æ•°ç›®è‡ªåŠ¨çš„ç”Ÿæˆå¤šä¸ªè¿›ç¨‹ï¼Œå¹¶ä¸”å¯ä»¥æ‰‹åŠ¨è°ƒæ•´è¯¥å€¼ã€‚</p>\n<h5>4. ç¼“å­˜è¯·æ±‚</h5>\n<p>ä½¿ç”¨ç¼“å­˜ï¼Œå¯ä»¥æå¤§çš„æå‡å“åº”é€Ÿåº¦ï¼Œè€Œä¸éœ€è¦å¯¹äºé‡å¤çš„è¯·æ±‚åšé‡å¤çš„æ“ä½œã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨nginx<a href=\"https://serversforhackers.com/nginx-caching/\">ç¼“å­˜é…ç½®</a>æ¥é…ç½®ç¼“å­˜</p>\n<h5>5. ä½¿ç”¨è´Ÿè½½å‡è¡¡</h5>\n<p>å•ä¸€çš„expressè¿›ç¨‹æœåŠ¡ï¼Œä¸ç®¡å¦‚ä½•ä¼˜åŒ–éƒ½æ— æ³•è¾¾åˆ°ä¸€ä¸ªå¾ˆé«˜çš„æ€§èƒ½éœ€æ±‚ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸€ä¸ªæ‹¥æœ‰å¾ˆå¤šç”¨æˆ·çš„webåº”ç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨æ¥å®Œæˆåº”ç”¨çš„æ°´å¹³çš„æ‰©å±•ã€‚æ¯”å¦‚ä½¿ç”¨nginxæˆ–è€…HAProxyæ¥å®Œæˆè´Ÿè½½å‡è¡¡ã€‚åœ¨ä½¿ç”¨è´Ÿè½½å‡è¡¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç¡®ä¿æ¯ä¸€ä¸ªè¯·æ±‚å…³è”ç›¸å¯¹åº”çš„ä¼šè¯IDè½åˆ°åŒä¸€ä¸ªè¿›ç¨‹ä¸Šã€‚è¿™é‡Œæœ‰ä¸€ç¯‡æ–‡ç« å¯ä»¥ä¾›å‚è€ƒï¼Œäº†è§£å¦‚ä½•é…ç½®è´Ÿè½½å‡è¡¡<a href=\"http://socket.io/docs/using-multiple-nodes/\">socket.ioé…ç½®è´Ÿè½½å‡è¡¡</a></p>\n<p>å¦å¤–strongloop pmå¯ä»¥å¾ˆå¥½çš„ä¸nginxé…åˆè®¾ç½®è´Ÿè½½å‡è¡¡ã€‚</p>\n<h5>6. åå‘ä»£ç†æœåŠ¡</h5>\n<p>åå‘ä»£ç†æœåŠ¡å™¨ä¸€èˆ¬è®¾ç½®åœ¨è¯·æ±‚å…¥å£å¤„ï¼Œå®Œæˆé”™è¯¯é¡µé¢å¤„ç†ï¼Œå‹ç¼©å¤„ç†ï¼Œç¼“å­˜å’Œé™æ€æ–‡ä»¶å¤„ç†ï¼Œè´Ÿè½½å‡è¡¡æ“ä½œç­‰ç­‰ã€‚å…·ä½“çš„å¯å‚è€ƒnginxæˆ–è€…HAProxyçš„é…ç½®æ¥å®Œæˆåå‘ä»£ç†æœåŠ¡çš„æ­å»ºã€‚</p>\n<p>PS: ä¸ªäººç½‘ç«™ <a href=\"http://www.jsmean.com\">www.jsmean.com</a> ã€‚åŸºäºmean stack å¼€å‘ã€‚ä¸»è¦æ˜¯è®¨è®ºä¸€äº›jsç›¸å…³å†…å®¹ï¼Œæ¬¢è¿å¤§å®¶è®¿é—®</p>\n</div>",
"title": "Express å¼€å‘ä¸éƒ¨ç½²æœ€ä½³å®è·µ",
"last_reply_at": "2016-08-02T00:35:29.388Z",
"good": true,
"top": false,
"reply_count": 52,
"visit_count": 6423,
"create_at": "2016-01-23T18:39:48.809Z",
"author": {
"loginname": "zhangmingkai4315",
"avatar_url": "https://avatars.githubusercontent.com/u/8868334?v=3&s=120"
}
},
{
"id": "5785a43049e4faa95429c6f3",
"author_id": "5567cd27070e73ca2c4d922f",
"tab": "ask",
"content": "<div class=\"markdown-text\"><p>èƒ½ä¸èƒ½æœ‰ä¸ªè½»ä¾¿æ˜“ç”¨çš„å›¾å½¢éªŒè¯ç åŒ…å•Šï¼Œ\nccapé‚£ä¸ªå¥½éš¾å®‰è£…æˆåŠŸï¼Œå¯¹nodeç‰ˆæœ¬ä¹Ÿæœ‰é™åˆ¶ï¼Œæœ‰ä»€ä¹ˆåˆ«çš„å¥½ç”¨çš„å—</p>\n</div>",
"title": "èƒ½ä¸èƒ½æœ‰ä¸ªè½»ä¾¿æ˜“ç”¨çš„å›¾å½¢éªŒè¯ç åŒ…å•Š",
"last_reply_at": "2016-08-02T00:08:09.147Z",
"good": false,
"top": false,
"reply_count": 14,
"visit_count": 797,
"create_at": "2016-07-13T02:15:12.033Z",
"author": {
"loginname": "xiashulin",
"avatar_url": "https://avatars.githubusercontent.com/u/11418033?v=3&s=120"
}
},
{
"id": "579e8e74da05b9e92af325ad",
"author_id": "50b5bc5d637ffa4155091236",
"tab": "ask",
"content": "<div class=\"markdown-text\"><pre class=\"prettyprint\"><code>var swig = require(&#x27;swig&#x27;);\nvar template = swig.compileFile(&#x27;&#x2F;absolute&#x2F;path&#x2F;to&#x2F;template.html&#x27;);\nvar output = template({\n pagename: &#x27;awesome people&#x27;,\n authors: [&#x27;Paul&#x27;, &#x27;Jim&#x27;, &#x27;Jane&#x27;]\n});\n\n</code></pre></div>",
"title": "swigæ¨¡æ¿æœ‰äººç”¨å—ï¼Ÿ",
"last_reply_at": "2016-08-02T00:06:44.908Z",
"good": false,
"top": false,
"reply_count": 8,
"visit_count": 217,
"create_at": "2016-07-31T23:49:08.919Z",
"author": {
"loginname": "yakczh",
"avatar_url": "https://avatars.githubusercontent.com/u/6591466?v=3&s=120"
}
},
{
"id": "535601a20d7d0faf140303d8",
"author_id": "5333889a5432b1822f016b2d",
"content": "<div class=\"markdown-text\"><h1>é€šè¿‡ nodeclub é¡¹ç›®æºç æ¥è®²è§£å¦‚ä½•åšä¸€ä¸ª nodejs + express + mongodb é¡¹ç›®</h1>\n<hr>\n<h2>##1. About</h2>\n<ul>\n<li>1.1 <strong>what</strong>:\nnodeclub æ˜¯ <a href=\"http://cnodejs.org\">cnodejs.org</a> çš„æºç ï¼ŒCNode ç®—æ˜¯ä¸€ä¸ªåŸºæœ¬çš„åšå®¢ç³»ç»Ÿï¼ŒåŒ…å«æ–‡ç« å‘å¸ƒï¼Œ å…³æ³¨ï¼Œè¯„è®ºç­‰åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½å¯ä»¥è¯´æ˜¯ä»»ä½•ä¸€ä¸ªç½‘ç«™çš„åŸºç¡€ã€‚ä» nodeclub é‡Œå¯ä»¥å­¦åˆ°ä»€ä¹ˆï¼Ÿ\n<ul>\n<li>1.åŸºæœ¬çš„æ¶æ„</li>\n<li>2.å¼€å‘æµ‹è¯•è¿‡ç¨‹</li>\n<li>3.MVC çš„è®¾è®¡</li>\n<li>4.middleware çš„æ­£ç¡®ç”¨æ³•</li>\n<li>5.å¦‚ä½•è®¾è®¡ Mongodb schema</li>\n<li>6.å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨ Mongoose</li>\n<li>7.å¦‚ä½•å®ç°ä¸€ä¸ªæ ‡ç­¾ç³»ç»Ÿ</li>\n<li>8.plugins? services ?</li>\n<li>9.å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨ EJS helper</li>\n<li>10.åˆ°åº•è¯¥æ€æ ·å†™è·¯ç”±ï¼Œ restfulï¼Ÿ</li>\n<li>11.å¦‚ä½•åšåŸºæœ¬çš„æ§åˆ¶éªŒè¯</li>\n<li>12.å¦‚ä½•å‘é‚®ä»¶</li>\n<li>13.session</li>\n<li>14.GitHub ç”¨æˆ·ç™»å½•</li>\n<li>15.å›¾ç‰‡ä¸Šä¼ </li>\n<li>16.æ¶ˆæ¯å‘é€</li>\n</ul>\n</li>\n</ul>\n<p>é™¤äº† nodeclub æºç çš„å­¦ä¹ ç¬”è®°ä»¥å¤–ï¼Œ è¿˜ä¼šæœ‰ä¸€ç‚¹æœ€è¿‘æ£é¼“è¿™ä¸€å—çš„ç»éªŒåˆ†äº«</p>\n<ul>\n<li>1.ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯è®¢é˜…è®¾è®¡</li>\n<li>2.æ¶ˆæ¯æ¨é€, socket + express å¦‚ä½•åˆä½œ?</li>\n<li>3.åŒ…è£… action</li>\n<li>4.è›‹ç–¼çš„å¼‚æ­¥å›è°ƒå¦‚ä½•å¤„ç†</li>\n</ul>\n<p><a href=\"https://github.com/cnodejs/nodeclub\">nodeclubæºç </a></p>\n<ul>\n<li>1.2 <strong>why</strong>:</li>\n</ul>\n<p>å¯¹äºæƒ³ç”¨ nodejs + express + mongodb æ¥åšç½‘ç«™æŠ€æœ¯åŸºç¡€çš„é¡¹ç›®ï¼Œ nodeclub å¯ä»¥è¯´æ˜¯å¾ˆå¥½çš„æºç çº§æŒ‡å—ï¼Œå½“ç„¶ä¹Ÿæ˜¯æˆ‘çš„æŒ‡å—ï¼Œè¿™ç¯‡æ–‡ç« æƒå½“åšä¸ªäººå­¦ä¹  nodeclub çš„å­¦ä¹ ç¬”è®°ã€‚</p>\n<ul>\n<li>1.3 <strong>who</strong></li>\n</ul>\n<pre class=\"prettyprint language-coffee\"><code>who = ä¸€åæœ¬åº”è¯¥åœ¨å†™å‰ç«¯çš„ä½†ä¸çŸ¥æ€çš„ä¸€ç›´åœ¨å†™åç«¯çš„é©¬è„“ -&gt; \n [@echo](&#x2F;user&#x2F;echo) &#x27;github: https:&#x2F;&#x2F;github.com&#x2F;6174&#x27;\n [@echo](&#x2F;user&#x2F;echo) &#x27;weibo: http:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;2254313183&#x27;\n [@echo](&#x2F;user&#x2F;echo) &#x27;email: 57017125[@qq](&#x2F;user&#x2F;qq).com&#x27;\n [@echo](&#x2F;user&#x2F;echo) &#x27;ps: ä¸€ç›´åœ¨æ±‚åç«¯partnerä¸­ï¼Œæœ‰æ„è€…è”ç³»æˆ‘&#x27; \n [@send](&#x2F;user&#x2F;send)()\n</code></pre><h2>2. nodeclub ä¸­ç”¨åˆ°äº†å“ªäº›å¼€æºæŠ€æœ¯</h2>\n<hr>\n<ul>\n<li>\n<p>2.1 Node.js é¡¹ç›®ä¸€å¤§ä¼˜ç‚¹å°±æ˜¯æœ‰ä¸€ä¸ª <code>package.json</code>, é‡Œè¾¹çš„ <code>dependencies</code> &amp; <code>devDependencies</code> å¯ä»¥çœ‹åˆ°è¿™ä¸ªé¡¹ç›®æ‰€æœ‰çš„ä¾èµ–ã€‚ å¯¹äºæœ‰ç»éªŒçš„å¼€å‘è€…æ¥è¯´ï¼Œ çœ‹å®Œ <code>package.json</code> åŸºæœ¬å°±èƒ½çŸ¥é“é¡¹ç›®çš„æ¶æ„æ˜¯æ€æ ·ã€‚</p>\n</li>\n<li>\n<p>2.2 <strong>dependencies</strong></p>\n</li>\n</ul>\n<ul>\n<li><code>express</code>: åŸºç¡€æ¡†æ¶ï¼š</li>\n<li><code>mongodb</code>: æ•°æ®å­˜å‚¨</li>\n<li><code>mongoose</code>: orm</li>\n<li><code>connect-mongo</code>: session ï¼ˆå¯¹äºredisï¼Œ å¯ä»¥ä½¿ç”¨connect-redisï¼‰</li>\n<li><code>nodemailer</code>ï¼šé‚®ä»¶</li>\n<li><code>validator</code>ï¼šéªŒè¯</li>\n<li><code>passport</code>ï¼Œ<code>passport-github</code>ï¼š passportï¼Œ</li>\n<li><code>loader</code>: ejs-view-helper, é™æ€èµ„æºåŠ è½½å¤„ç†</li>\n<li>å…¶ä»–ï¼š <code>event-proxy</code>, <code>node-markdown</code>, <code>ndir</code></li>\n</ul>\n<ul>\n<li>2.3 <strong>devDependencies</strong></li>\n</ul>\n<ul>\n<li>æµ‹è¯•æ¡†æ¶ï¼š<code>mocha</code>, <code>should</code></li>\n<li>è¿è¡Œï¼š <code>forever</code></li>\n<li>è¯·æ±‚æ¨¡æ‹Ÿ: <code>supertest</code></li>\n</ul>\n<ul>\n<li>2.4 nodeclub ä»¥ express + mongodb + mongoose ä½œä¸ºåŸºæœ¬æ¡†æ¶, å…¸å‹çš„ MVC åº”ç”¨</li>\n</ul>\n<ul>\n<li><strong>Model</strong>: å¯¹åº”mongoose ormï¼Œ modelsç›®å½•</li>\n<li><strong>view</strong>ï¼š ejsæ¨¡æ¿ï¼Œ viewsç›®å½•</li>\n<li><strong>controler</strong>ï¼šexpress middleware , contollersç›®å½•</li>\n</ul>\n<ul>\n<li>2.5 ç›®å½•ç»“æ„ï¼š</li>\n</ul>\n<pre class=\"prettyprint\"><code>- common&#x2F;\n- controllers&#x2F;\n- libs&#x2F;\n# expressä¸­é—´ä»¶ï¼Œ åŸºæœ¬çš„authï¼Œ session éªŒè¯\n- middlewares&#x2F;\n- models&#x2F;\n#æ¶ˆæ¯ï¼Œ é‚®ä»¶æœåŠ¡\n- services&#x2F;\n- plugins&#x2F;\n#å¯ä»¥çœ‹åšæ˜¯å¯¹modelå¤„ç†çš„åŠ å·¥åº“\n- proxy&#x2F;\n- test&#x2F;\n- views&#x2F;\n- app.js\n- route.js\n- config.js\n</code></pre><h2>3. åº”ç”¨å…¥å£ <code>app.js</code></h2>\n<hr>\n<p>ç¥åœ£çš„å…¥å£æ–‡ä»¶ï¼Œå‡ ä¹æ¯ä¸ªé¡¹ç›®éƒ½ä¼šæœ‰ä¸€ä¸ª entryï¼Œå¯¹äºäº†è§£ä¸€ä¸ªåº”ç”¨ç†Ÿæ‚‰å…¥å£é€»è¾‘å¾ˆé‡è¦ã€‚ ä¸‹é¢å°†åˆ†æ­¥æ¥çœ‹çœ‹ï¼Œnodeclub çš„ <code>app.js</code> åšäº†ä»€ä¹ˆï¼š</p>\n<h3>3.1 <code>require(./config)</code></h3>\n<ul>\n<li>3.1.1 åº”ç”¨ç›¸å…³çš„é…ç½®çš„è®¾ç½®ï¼Œ ä¸»è¦åˆ†ä¸º</li>\n</ul>\n<ul>\n<li>1.åº”ç”¨å…¨å±€æ•°æ®é…ç½®</li>\n<li>2.æ•°æ®åº“è¿æ¥é…ç½®</li>\n<li>3.sessionï¼Œauth ç›¸å…³é…ç½®</li>\n<li>4.rssé…ç½®</li>\n<li>5.mailé…ç½®</li>\n<li>6.ç¬¬ä¸‰æ–¹è¿æ¥ç›¸å…³é…ç½®ï¼Œ githubï¼Œ weibo</li>\n</ul>\n<p>é…ç½®æ–‡ä»¶ä¹Ÿæ˜¯äº†è§£åº”ç”¨çš„ä¸€ä¸ªå¥½åœ°æ–¹ï¼Œ åœ¨ <code>config.default.js</code> ä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯, è¿™äº›å¾ˆå¯èƒ½æ˜¯æˆ‘ä»¬å¹³æ—¶åšåº”ç”¨å¼€å‘çš„æ—¶å€™æ²¡æœ‰ç•™æ„åˆ°çš„åœ°æ–¹</p>\n<pre class=\"prettyprint language-javascript\"><code>&#x2F;&#x2F;--åº”ç”¨æ•°æ®ç»Ÿè®¡\ngoogle_tracker_id: &#x27;UA-41753901-5&#x27;,\n\n&#x2F;&#x2F;--é™æ€æ–‡ä»¶å¾ˆå¯èƒ½ä½¿ç”¨cdnæ¥åš\nsite_static_host: &#x27;&#x27;, &#x2F;&#x2F; é™æ€æ–‡ä»¶å­˜å‚¨åŸŸå\n\n&#x2F;&#x2F;--æ±‚è§£é‡Š\nsite_enable_search_preview: false, &#x2F;&#x2F; å¼€å¯google search preview\nsite_google_search_domain: &#x27;cnodejs.org&#x27;, &#x2F;&#x2F; google search previewä¸­è¦æœç´¢çš„åŸŸå\n\n&#x2F;&#x2F;--è¿è¥æ•°æ®\nlist_topic_count: 20,\npost_interval: 10000,\nadmins: { admin: true },\nside_ads:[]\nallow_sign_up: true,\n\n&#x2F;&#x2F;--æ’ä»¶æ¨¡å¼\nplugins: []\n</code></pre><ul>\n<li>3.1.2 å½“ç„¶è¿™é‡Œçš„é…ç½®æ–‡ä»¶æ˜¯ default çš„ï¼Œé…ç½®æ–‡ä»¶å¯ä»¥æ”¾åœ¨ä¸€ä¸ª <code>config</code> çš„æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œå¤šä¸ªæ–‡ä»¶çš„æ–¹å¼æ¥æ•´ç†ã€‚æ¯”å¦‚è¿è¥æ•°æ®é…ç½®å’Œå…¶ä»–æ•°æ®é…ç½®åˆ†å¼€ï¼Œå› ä¸ºå¾ˆæœ‰å¯èƒ½éœ€è¦åšä¸€ä¸ªå°çš„å·¥å…·æ¥è®©éæŠ€æœ¯äººå‘˜é…ç½®ç›¸å…³å‚æ•°ã€‚è¿™æ—¶å€™å¯ä»¥ç”¨ä¸€ä¸ª <code>index.js</code> ä½œä¸º facadeï¼Œç›¸å½“äºä¸€ä¸ªå¤§çš„ node moduleã€‚</li>\n</ul>\n<h3>3.2 <code>require('./models')</code></h3>\n<ul>\n<li>3.2.1 ä¹‹å‰å·²ç»è®²äº† <code>models/</code> ç›®å½•å¯¹åº” MVC çš„ M éƒ¨åˆ†ã€‚</li>\n<li>3.2.2 <code>models/</code> ç›®å½•ä¸‹é¢æœ‰ <code>index.js</code>, <code>require('./models')</code> ç›¸å½“äº <code>require('./models/index')</code></li>\n</ul>\n<p>index ç›¸å½“äºä¸€ä¸ªæ¨¡å‹çš„ facade, <code>index.js</code> åšå¾—äº‹æƒ…åˆ†åˆ«æ˜¯</p>\n<ul>\n<li>1.connect mongodb</li>\n<li>2.require å„ä¸ª model æ¨¡å—</li>\n<li>3.exports æ‰€æœ‰çš„ model</li>\n</ul>\n<p>ç®€å•è€Œè¨€å°±æ˜¯åˆå§‹åŒ–äº†åº”ç”¨ model å±‚ã€‚</p>\n<ul>\n<li>3.2.3 æ¨¡å‹ä½¿ç”¨ orm æ¡†æ¶ mogoose æ¥å†™ï¼Œäº†è§£ mogoose è¿‡åï¼Œ models éƒ¨åˆ†çš„ä»£ç ä¹Ÿå°±æ˜¯ç§’æ‡‚äº†</li>\n</ul>\n<p>ï¼Œ æˆ‘è¯´çš„åªæ˜¯ä»£ç ï¼Œliteraly, ä¸€ä¸ªé¡¹ç›®çš„æ ¸å¿ƒå°±æ˜¯ model çš„è®¾è®¡ï¼Œä»¥å‰åšè¿‡çš„ä»»ä½•é¡¹ç›®éƒ½æ˜¯ä¸€æ ·ï¼Œ æ•°æ®åº“ table çš„è®¾è®¡å¥½åç›´æ¥å½±å“åº”ç”¨çš„å¼€å‘ä»¥åŠæ€§èƒ½ã€‚ ä¸‹é¢æ¥çœ‹çœ‹å„ä¸ª model çš„ schema è®¾è®¡(å‡ ä¹ç›´æ¥ ctr+c, ctr+v åŠ ä¸Šäº†ä¸€ç‚¹ç‚¹æ³¨é‡Š) :</p>\n<ul>\n<li>3.2.4 user</li>\n</ul>\n<pre class=\"prettyprint language-javascript\"><code>var UserSchema = new Schema({\n &#x2F;&#x2F;--åŸºæœ¬ç”¨æˆ·ä¿¡æ¯ï¼Œ indexè¡¨ç¤ºåœ¨mongodbä¸­ä¼šå»ºç«‹ç´¢å¼•\n &#x2F;&#x2F;--unique: true å”¯ä¸€æ€§è®¾ç½®\n name: { type: String, index: true },\n loginname: { type: String, unique: true },\n pass: { type: String },\n email: { type: String, unique: true },\n url: { type: String },\n profile_image_url: {type: String},\n location: { type: String },\n signature: { type: String },\n profile: { type: String },\n weibo: { type: String },\n avatar: { type: String },\n githubId: { type: String, index: true },\n githubUsername: {type: String},\n is_block: {type: Boolean, default: false},\n \n &#x2F;&#x2F;--ç”¨æˆ·äº§ç”Ÿæ•°æ®meta\n score: { type: Number, default: 0 },\n topic_count: { type: Number, default: 0 },\n reply_count: { type: Number, default: 0 },\n follower_count: { type: Number, default: 0 },\n following_count: { type: Number, default: 0 },\n collect_tag_count: { type: Number, default: 0 },\n collect_topic_count: { type: Number, default: 0 },\n create_at: { type: Date, default: Date.now },\n update_at: { type: Date, default: Date.now },\n is_star: { type: Boolean },\n level: { type: String },\n active: { type: Boolean, default: true },\n \n &#x2F;&#x2F;-mail\n receive_reply_mail: {type: Boolean, default: false },\n receive_at_mail: { type: Boolean, default: false },\n from_wp: { type: Boolean },\n retrieve_time : {type: Number},\n retrieve_key : {type: String}\n});\n</code></pre><ul>\n<li>3.2.5 topic è¯é¢˜</li>\n</ul>\n<pre class=\"prettyprint language-javascript\"><code>&#x2F;&#x2F;1 &lt;- å¤š\n&#x2F;&#x2F;tag &lt;- topic &lt;- collect \nvar TopicSchema = new Schema({\n title: { type: String },\n content: { type: String },\n author_id: { type: ObjectId },\n top: { type: Boolean, default: false },\n reply_count: { type: Number, default: 0 },\n visit_count: { type: Number, default: 0 },\n collect_count: { type: Number, default: 0 },\n create_at: { type: Date, default: Date.now },\n update_at: { type: Date, default: Date.now },\n &#x2F;&#x2F;--è¿™é‡Œreplyçš„è®¾è®¡æ–¹å¼ä¸çŸ¥é“æ˜¯å¦åˆé€‚ï¼Œ å› ä¸ºmongdbä¸åŒäºå…³ç³»å‹æ•°æ®åº“ï¼Œè¿™é‡Œæ¯æ¬¡è¯»å–æ–‡ç« éƒ½éœ€è¦é‡replyé›†åˆé‡Œè¾¹æŸ¥æ‰¾éå†ä¸€è¾¹ï¼Œæ–‡ç« æ˜¯è¯»ç¹å¿™çš„ã€‚\n &#x2F;&#x2F;-- ä¸€ä¸ªdocumentçš„å¤§å°ä¸º5Mbï¼Œ ä¸€æœ¬ç‰›æ´¥è¯å…¸çš„å†…å®¹ï¼Œ æˆ‘è§‰å¾—å°†replyæ”¾åœ¨è¿™é‡Œåº”è¯¥ä¸ä¼šæœ‰å¤ªå¤§é—®é¢˜ã€‚ å³ä¾¿ä¸å­˜æ”¾reply å†…å®¹ï¼Œ å­˜æ”¾ä¸€ä¸ªidæ•°ç»„ä¹Ÿä¼šå¥½å¾ˆå¤šã€‚\n &#x2F;&#x2F;-- å®¢å®˜ä»¬æ€ä¹ˆçœ‹? \n last_reply: { type: ObjectId },\n last_reply_at: { type: Date, default: Date.now },\n content_is_html: { type: Boolean }\n});\n\nvar ReplySchema = new Schema({\n content: { type: String },\n topic_id: { type: ObjectId, index: true },\n author_id: { type: ObjectId },\n reply_id : { type: ObjectId },\n create_at: { type: Date, default: Date.now },\n update_at: { type: Date, default: Date.now },\n content_is_html: { type: Boolean }\n});\n\n&#x2F;&#x2F;--è¯é¢˜é›†åˆ\nvar TopicCollectSchema = new Schema({\n user_id: { type: ObjectId },\n topic_id: { type: ObjectId },\n create_at: { type: Date, default: Date.now }\n});\n\n&#x2F;&#x2F;--è¯é¢˜æ ‡ç­¾\nvar TopicTagSchema = new Schema({\n topic_id: { type: ObjectId },\n tag_id: { type: ObjectId },\n create_at: { type: Date, default: Date.now }\n}); \n</code></pre><ul>\n<li>3.2.6 tag\næ ‡ç­¾ç³»ç»Ÿ</li>\n</ul>\n<pre class=\"prettyprint language-javascript\"><code>&#x2F;&#x2F;tag &lt;- collect\nvar TagSchema = new Schema({\n name: { type: String },\n order: { type: Number, default: 1 },\n description: { type: String },\n background: { type: String },\n topic_count: { type: Number, default: 0 },\n collect_count: { type: Number, default: 0 },\n create_at: { type: Date, default: Date.now }\n});\n\nvar TagCollectSchema = new Schema({\n user_id: { type: ObjectId, index: true },\n tag_id: { type: ObjectId },\n create_at: { type: Date, default: Date.now }\n});\n</code></pre><ul>\n<li>3.2.7 å…³ç³»</li>\n</ul>\n<pre class=\"prettyprint language-javascript\"><code>var RelationSchema = new Schema({\n user_id: { type: ObjectId },\n follow_id: { type: ObjectId },\n create_at: { type: Date, default: Date.now }\n});\n</code></pre><ul>\n<li>3.2.8 æ¶ˆæ¯\næ¶ˆæ¯ model è®¾è®¡ï¼Œ å¯¹äºä¸€ä¸ª blog æ¥è¯´ï¼Œ åŸºæœ¬çš„åªæœ‰å›å¤æ¶ˆæ¯ï¼Œ è¿™é‡ŒåŠ äº†å…³æ³¨å’Œ@æ¶ˆæ¯ã€‚</li>\n</ul>\n<pre class=\"prettyprint language-javascript\"><code>&#x2F;*\n * type:\n * reply: xx å›å¤äº†ä½ çš„è¯é¢˜\n * reply2: xx åœ¨è¯é¢˜ä¸­å›å¤äº†ä½ \n * follow: xx å…³æ³¨äº†ä½ \n * at: xx ï¼ äº†ä½ \n *&#x2F;\nvar MessageSchema = new Schema({\n type: { type: String },\n master_id: { type: ObjectId, index: true },\n author_id: { type: ObjectId },\n topic_id: { type: ObjectId },\n reply_id: { type: ObjectId },\n has_read: { type: Boolean, default: false },\n create_at: { type: Date, default: Date.now }\n});\n</code></pre><p>###3.3 require middlewares</p>\n<ul>\n<li>\n<p>3.3.1 express çš„åŸºç¡€æ˜¯ middlewareï¼Œæˆ–è€…è¯´ express çš„åŸºç¡€æ˜¯ connectï¼Œconnect çš„åŸºç¡€æ˜¯ middlewareã€‚middleware æ¨¡å¼åœ¨ professional nodejs ä¸­æœ‰ä¸€ä¸ªä¸“é—¨çš„ç« èŠ‚æ¥è®²è§£ã€‚ä½•ä¸º middleware å‘¢ï¼Ÿ middleware æ¨¡å¼ ç›¸å½“äºä¸€ä¸ªåŠ å·¥æµæ°´çº¿ï¼ˆå¤§å®¶å« middleware stackï¼‰ï¼Œæ¯ä¸€ä¸ª middleware ç›¸å½“äºä¸€ä¸ªåŠ å·¥æ­¥éª¤ï¼Œå½“å‡ºç°ä¸€ä¸ª http è¯·æ±‚çš„æ—¶å€™ï¼Œhttp è¯·æ±‚ä¼šæŒ¨ç€æ¯ä¸ª middleware æ‰§è¡Œä¸‹å»ã€‚\nexpress é‡Œå¤„ç†ä¸€ä¸ªè¯·æ±‚çš„è¿‡ç¨‹åŸºæœ¬ä¸Šå°±æ˜¯è¯·æ±‚é€šè¿‡ middleware stack çš„è¿‡ç¨‹ï¼š * -&gt; middlewares -&gt; è·¯ç”± -&gt; controllers -&gt; errorhandleringã€‚</p>\n</li>\n<li>\n<p>3.3.2 middleware æ€æ ·åšåˆ°çš„ï¼Œ å¼‚æ­¥çš„æ–¹æ³•å‘¢ï¼Ÿ middleware ä½¿ç”¨ promise çš„æ–¹å¼æ¥å¤„ç†å¼‚æ­¥ï¼Œæ‰€æœ‰æ¯ä¸ª middleware éƒ½æœ‰ä¸‰ä¸ªå‚æ•° <code>req, res, next</code>, å¯¹äºå¼‚æ­¥çš„æƒ…å†µï¼Œ å¿…é¡»è¦è°ƒç”¨ <code>next()</code> æ–¹æ³•ã€‚ä¸ç„¶åç»­çš„ middleware å°±æ— æ³•æ‰§è¡Œã€‚ ps: debug çš„æ—¶å€™æ²¡è°ƒç”¨ <code>next()</code> è¿˜ä¸ä¼šæŠ¥é”™ï¼Œä¸€å®šæ³¨æ„</p>\n</li>\n<li>\n<p>3.3.3 auth.js</p>\n</li>\n</ul>\n<p><code>auth.js</code> exports å‡ºæ¥çš„å‡½æ•°å…¨éƒ¨éƒ½æ˜¯ä¸­é—´ä»¶ï¼Œä»å˜é‡åå°±å®Œå…¨æ¸…æ¥šçš„çŸ¥é“åˆ°åº•åœ¨åšä»€ä¹ˆäº†</p>\n<pre class=\"prettyprint language-javascript\"><code>\n&#x2F;&#x2F;-- éœ€è¦adminæƒé™\nexports.adminRequired = function (req, res, next) {}\n\n&#x2F;&#x2F;-- éœ€è¦æœ‰ç”¨æˆ·\nexports.userRequired = function (req, res, next) {}\n\n&#x2F;&#x2F;-- éœ€è¦æœ‰ç”¨æˆ·å¹¶ç™»å½•\nexports.signinRequired = function (req, res, next) {\n if (!req.session.user) {\n res.render(&#x27;notify&#x2F;notify&#x27;, {error: &#x27;æœªç™»å…¥ç”¨æˆ·ä¸èƒ½å‘å¸ƒè¯é¢˜ã€‚&#x27;});\n return;\n }\n next(); \n}\n\n&#x2F;&#x2F;-- å±è”½ç”¨æˆ· -_-\nexports.blockUser = function (req, res, next) {}\n</code></pre><p>è¿™é‡Œå…¶å®å°±å¯ä»¥çœ‹åˆ°ä¸­é—´ä»¶çš„ä½œç”¨äº†ï¼Œæˆ‘ä»¬ä»¥å‰å†™ php çš„æ—¶å€™æ¯æ¬¡éƒ½éœ€è¦åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œ æ²¡ç™»é™† redirect åˆ° <code>index.php</code> ï¼Œåªä¸è¿‡è¿™é‡Œçš„æ–¹å¼æ˜¯é€šè¿‡ä¸­é—´ä»¶æ¥å¤„ç†ã€‚\næ˜ç™½è¿™é‡Œä»€ä¹ˆæ„æ€ï¼Œå…¶ä»–çš„ä¸­é—´ä»¶æ¨¡å—ä¹Ÿå°±ç§’æ‡‚äº†ã€‚</p>\n<p>###3.4 require(â€™./routesâ€™)</p>\n<ul>\n<li>\n<p>3.4.1 express çš„ä¸–ç•Œé‡Œå¦å¤–ä¸€ä¸ªå¾ˆé‡è¦çš„å°±æ˜¯routeï¼Œ Node.js å¯åŠ¨çš„æ˜¯æœåŠ¡ï¼Œ ç›‘å¬äº†æŸä¸€ç«¯å£ï¼Œ æ¥å— http or https or socket è¯·æ±‚, é‚£ url ä¸­åƒ <code>/index.php?blabla</code> è¿™ä¸€ä¸²çš„å­˜åœ¨æ€ä¹ˆå¤„ç†å‘¢ï¼Œ express çš„ route åŠŸèƒ½å°±å¯ä»¥å¸®æˆ‘ä»¬è§£æã€‚</p>\n</li>\n<li>\n<p>3.4.2 MVC ä¸­å¦‚ä½•å°†ä¸€ä¸ªè¯·æ±‚å’Œ controller è”ç³»èµ·æ¥å‘¢ï¼Œ route å°±æ˜¯è¿™æ ·çš„çº½å¸¦</p>\n</li>\n</ul>\n<pre class=\"prettyprint language-javascript\"><code>&#x2F;&#x2F;--get, post è¯·æ±‚\napp.get(&#x27;&#x2F;signin&#x27;, sign.showLogin);\napp.post(&#x27;&#x2F;signin&#x27;, sign.login);\n&#x2F;&#x2F;--ä½¿ç”¨ä¸­é—´ä»¶\napp.get(&#x27;&#x2F;signup&#x27;, configMiddleware.github, passport.authenticate(&#x27;github&#x27;));\napp.post(&#x27;&#x2F;:topic_id&#x2F;reply&#x27;, auth.userRequired, limit.postInterval, reply.add);\n</code></pre><ul>\n<li>3.4.3 route æ˜¯äº†è§£ä¸€ä¸ªåº”ç”¨æœ€ä½³çš„åœ°æ–¹ï¼Œä¸€ä¸ªè¯·æ±‚å¦‚ä½•å¤„ç†ï¼Œ åˆ°ç›¸åº”çš„ controller å»çœ‹å°±çŸ¥é“äº†ã€‚ ç›¸æ¯”èµ·åœ¨PHPç¯å¢ƒä¸‹é…ç½®æ›´åŠ çµæ´»ã€‚å½“ç„¶ä½ è¯´ä½ é€šè¿‡nginxæ¥é…ç½®ä¹Ÿå¾ˆçµæ´»ï¼Œå¥½å§ï¼Œæˆ‘ä»¬è¯´çš„ä¸æ˜¯ä¸€å›äº‹ã€‚</li>\n</ul>\n<h3>3.5 initialization</h3>\n<ul>\n<li>3.5.1 experess initialize: <code>app.js</code> ä¸­å…¶ä»–å¤§å¤šéƒ¨åˆ†å°±æ˜¯expressçš„åˆå§‹åŒ–äº†ï¼Œ åˆå§‹åŒ–æµç¨‹å¦‚ä¸‹ï¼š</li>\n</ul>\n<ul>\n<li>1.é…ç½®ä¸Šä¼  upload_dir</li>\n<li>2.æ¨¡æ¿å¼•æ“è®¾ç½®</li>\n<li>3.express é€šç”¨ä¸­é—´ä»¶è®¾ç½®</li>\n<li>4.pasport ä¸­é—´ä»¶</li>\n<li>5.è‡ªå®šä¹‰ä¸­é—´ä»¶\n<ul>\n<li>1.auth_user</li>\n<li>2.block_user</li>\n<li>3.staticfile: upload</li>\n<li>4.staticfile: user_data</li>\n</ul>\n</li>\n<li>6.csrf</li>\n<li>7.errorhandler</li>\n<li>8.set view cache</li>\n</ul>\n<p><code>[@Note](/user/Note)</code>ï¼šé…ç½®çš„é¡ºåºå¾ˆé‡è¦ï¼Œ ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯æŒ‰ç…§å®šä¹‰é¡ºåºæ¥æ‰§è¡Œçš„ï¼Œ å¦‚æœä¸€ä¸ªä¸­é—´ä»¶ä¾èµ–å¦å¤–çš„ä¸­é—´ä»¶ï¼Œ è€Œè‡ªå·±å…ˆæ‰§è¡Œäº†ï¼Œ è¿™ç§æƒ…å†µå°±ä¼šé”™è¯¯ã€‚ å¸¸è§çš„é—®é¢˜å°±æ˜¯sessioné…ç½®ï¼Œ ä¸€å®šè¦è®°å¾—é…ç½® session ä¸­é—´ä»¶çš„æ—¶å€™ï¼Œ è¦å…ˆé…ç½® cookieParserã€‚</p>\n<ul>\n<li>3.5.2 session è®¾ç½®</li>\n</ul>\n<p>è¿™ä¸ªæ­¥éª¤åœ¨ initialize é‡Œè¾¹å·²ç»æœ‰äº†ï¼Œ ä¸è¿‡å†å•ç‹¬è®²ä¸€ä¸‹ï¼Œ nodeclub ä½¿ç”¨çš„æ˜¯ connect-mongo æ¥ä½œä¸º session çš„å­˜å‚¨</p>\n<pre class=\"prettyprint language-javascript\"><code> &#x2F;&#x2F;--cookieParserä¸€å®šè¦åœ¨å‰é¢ï¼Œ å› ä¸ºsessionçš„è®¾ç½®ä¾èµ–cookie\n app.use(express.cookieParser());\n app.use(express.session({\n secret: config.session_secret,\n store: new MongoStore({\n db: config.db_name,\n }),\n }));\n</code></pre><ul>\n<li>3.5.3 view helpers</li>\n</ul>\n<p>ä½¿ç”¨è¿‡ ejs çš„è‚¯å®šçŸ¥é“ï¼Œ ejs é‡Œè¾¹ view helper è®¾ç½®å¾ˆç®€å•ï¼Œ å°±åƒèµ‹å€¼å˜é‡ä¸€æ ·ã€‚ å½“å¯¹äºä¸€äº›é€šç”¨çš„ helper å¯ä»¥è¿™æ ·è®¾ç½®ï¼š</p>\n<pre class=\"prettyprint language-javascript\"><code> app.helpers({\n config: config,\n Loader: Loader,\n assets: assets\n });\n app.dynamicHelpers(require(&#x27;.&#x2F;common&#x2F;render_helpers&#x27;));\n</code></pre><ul>\n<li>3.5.4 github pasport initialize</li>\n</ul>\n<pre class=\"prettyprint language-javascript\"><code> &#x2F;&#x2F; github oauth\n passport.serializeUser(function (user, done) {\n done(null, user);\n });\n passport.deserializeUser(function (user, done) {\n done(null, user);\n });\n passport.use(new GitHubStrategy(config.GITHUB_OAUTH, githubStrategyMiddleware));\n</code></pre><ul>\n<li>3.5.5 start app</li>\n</ul>\n<h2>##4. ç”¨æˆ·æ³¨å†Œ</h2>\n<ul>\n<li>4.1 user æ˜¯æ¯ä¸ªåº”ç”¨éƒ½ä¼šå¤„ç†çš„åŸºæœ¬ï¼Œ æ³¨å†Œç™»å½•ç™»å‡ºï¼Œ çœ‹çœ‹ nodeclub åšäº†å“ªäº›äº‹æƒ…ï¼š</li>\n<li>4.2 è·¯ç”±ï¼š</li>\n</ul>\n<pre class=\"prettyprint language-javascript\"><code>&#x2F;&#x2F;--è®¾ç½®èƒ½å¦ç›´æ¥æ³¨å†Œï¼Œ ä¸èƒ½çš„è¯é€šè¿‡githubæ³¨å†Œ\nif (config.allow_sign_up) {\n app.get(&#x27;&#x2F;signup&#x27;, sign.showSignup);\n app.post(&#x27;&#x2F;signup&#x27;, sign.signup);\n} else {\n app.get(&#x27;&#x2F;signup&#x27;, configMiddleware.github, passport.authenticate(&#x27;github&#x27;));\n}\napp.post(&#x27;&#x2F;signout&#x27;, sign.signout);\napp.get(&#x27;&#x2F;signin&#x27;, sign.showLogin);\napp.post(&#x27;&#x2F;signin&#x27;, sign.login);\n</code></pre><ul>\n<li>4.3 controller &amp; modelï¼šsign.signup</li>\n</ul>\n<pre class=\"prettyprint language-javascript\"><code>sanitize = validator.sanitize;\ncheck = validator.check;\nexports.signup = function (req, res, next) {\n &#x2F;&#x2F;--xss æ¶ˆæ¯’\n var name = sanitize(req.body.name).trim();\n name = sanitize(name).xss();\n ...\n &#x2F;&#x2F;--validations\n try {\n check(name, &#x27;ç”¨æˆ·ååªèƒ½ä½¿ç”¨0-9ï¼Œa-zï¼ŒA-Zã€‚&#x27;).isAlphanumeric();\n } catch (e) {\n res.render(&#x27;sign&#x2F;signup&#x27;, {error: e.message, name: name, email: email});\n return;\n }\n ...\n &#x2F;&#x2F;--ç”¨ç”¨æˆ·åç™»å½•æˆ–è€…emailç™»å½•\n query = {&#x27;$or&#x27;: [{&#x27;loginname&#x27;: loginname}, {&#x27;email&#x27;: email}]}\n User.getUserByQuery(query, {}, function(){\n ...\n pass = md5(pass);\n ...\n User.newAndSave(name, loginname, pass, email, avatar_url, false, function (err) {\n ...\n &#x2F;&#x2F; å‘é€æ¿€æ´»é‚®ä»¶\n mail.sendActiveMail(email, md5(email + config.session_secret), name);\n res.render(&#x27;sign&#x2F;signup&#x27;, {\n success: &#x27;æ¬¢è¿åŠ å…¥ &#x27; + config.name + &#x27;ï¼æˆ‘ä»¬å·²ç»™æ‚¨çš„æ³¨å†Œé‚®ç®±å‘é€äº†ä¸€å°é‚®ä»¶ï¼Œè¯·ç‚¹å‡»é‡Œé¢çš„é“¾æ¥æ¥æ¿€æ´»æ‚¨çš„å¸å·ã€‚&#x27;\n });\n })\n })\n} \n</code></pre><h2>##5. mongoose çš„ä½¿ç”¨</h2>\n<ul>\n<li>5.1 ä½¿ç”¨User.newAndSaveï¼Œ</li>\n<li>5.2 å¼‚æ­¥ callback pyramid</li>\n</ul>\n<p>ä¸€ä¸ªåº”ç”¨é€šå¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…æ™¯ï¼Œ ä¸€ä¸ªé¡µé¢éœ€è¦çš„æ•°æ®åŒ…æ‹¬ï¼Œ æ–‡ç« åˆ—è¡¨ï¼Œ è¯„è®ºåˆ—è¡¨ï¼Œç”¨æˆ·æ•°æ®ï¼Œå¹¿å‘Šæ•°æ®ï¼Œ other stuffâ€¦ é—®é¢˜æ˜¯æ¯ä¸ªéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œ æ€ä¹ˆåŠã€‚ user æ•°æ®è·å–è¿‡åçš„ callback è°ƒç”¨æ–‡ç« åˆ—è¡¨è·å–ï¼Œ æ–‡ç« åˆ—è¡¨è·å–çš„ callback è°ƒç”¨è¯„è®ºåˆ—è¡¨çš„è·å–â€¦ è¿™æ ·å°±å¤ªè›‹ç–¼äº†ã€‚ nodeclub ä½¿ç”¨äº† eventproxy æ¨¡å—ä¼˜é›…çš„è§£å†³è¿™æ ·çš„é—®é¢˜ï¼š</p>\n<pre class=\"prettyprint language-javascript\"><code> render = function(){}\n var proxy = EventProxy.create(&#x27;tags&#x27;, &#x27;topics&#x27;, &#x27;hot_topics&#x27;, &#x27;stars&#x27;, &#x27;tops&#x27;, &#x27;no_reply_topics&#x27;, &#x27;pages&#x27;, render);\n proxy.fail(next);\n Tag.getAllTags(proxy.done(&#x27;tags&#x27;));\n Topic.getTopicsByQuery(query, options, proxy.done(&#x27;topics&#x27;));\n User.getUsersByQuery({ is_star: true }, { limit: 5 }, proxy.done(&#x27;stars&#x27;));\n</code></pre><p>çœ‹å®Œä»£ç ä¸è¨€è€Œå–»ã€‚ã€‚ã€‚\nå½“ç„¶å¼‚æ­¥å¤„ç†çš„æ–¹æ³•æœ‰å¾ˆå¤š:</p>\n<ul>\n<li>1.åŸºäºäº‹ä»¶çš„ï¼ševentProxy</li>\n<li>2.åŸºäºpromiseçš„ï¼šAsync.js Q.js, when.js</li>\n<li>3.åŸºäºç¼–è¯‘çš„ï¼šcontinuation, wind</li>\n<li>4.åŸºäºè¯­è¨€è¯­æ³•çš„ï¼šyieldï¼Œ livescript</li>\n</ul>\n<p>æ–‡ç« æœ€åä¼šè®²ä¸€ä¸‹æˆ‘æˆ‘çš„å¼‚æ­¥é€‰æ‹©æ–¹æ¡ˆ</p>\n<h2>##6. æ¶ˆæ¯</h2>\n<ul>\n<li>6.1 åŸå…ˆä»¥ä¸ºæœ‰åŠ¨æ€çš„æ¶ˆæ¯æ¨é€ï¼Œ æœ‰é˜Ÿåˆ—å¤„ç†ï¼Œ é”™äº†ï¼Œ æœ¨æœ‰</li>\n<li>6.2 åœ¨ Sublime text é‡Œè¾¹å…¨å±€æœç´¢ <code>sendReply2Message</code> ä¼šå‘ç°æ˜¯åœ¨ <code>controller/reply.js</code> é‡Œè¾¹è°ƒç”¨çš„ï¼Œ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¶ˆæ¯æ˜¯ç›´æ¥è§¦å‘çš„ã€‚</li>\n<li>6.3 å¥½å§ï¼Œ è¿™éƒ¨åˆ†å¤§æ¦‚å¤§å®¶éƒ½èƒ½ç§’æ‡‚ã€‚ã€‚</li>\n</ul>\n<h2>##7. å¼€å‘</h2>\n<p>###7.1 æµ‹è¯•</p>\n<ul>\n<li>7.1.1 ä¸€ä¸ªé¡¹ç›®å¿…å®šç¦»ä¸å¼€æµ‹è¯•ï¼Œ nodeclubåŸºäºmocha BDDæµ‹è¯•æ¡†æ¶ï¼Œ ä¸€åˆ‡çš„å‰æå‡è®¾è‡³å°‘èƒ½çœ‹æ‡‚jasmineæˆ–è€…mochaæˆ–è€…ä»»ä½•ä¸€ä¸ªBDDé£æ ¼çš„æµ‹è¯•ä»£ç ã€‚</li>\n<li>7.1.2 æ‰“å¼€å³çœ‹åˆ°app.js</li>\n</ul>\n<pre class=\"prettyprint language-javascript\"><code>var app = require(&#x27;..&#x2F;app&#x27;);\ndescribe(&#x27;app.js&#x27;, function () {\n &#x2F;&#x2F;--beforeï¼Œ æ‰§è¡Œitçš„å‰é¢ä¼šæ‰§è¡Œ\n before(function (done) {\n &#x2F;&#x2F;--done, å¼‚æ­¥æ–¹æ³•\n app.listen(3001, done);\n });\n after(function () {\n app.close();\n });\n it(&#x27;should &#x2F; status 200&#x27;, function (done) {\n &#x2F;&#x2F;--ä½¿ç”¨ app.request()å°±å¯ä»¥æ¨¡æ‹Ÿè¯·æ±‚äº†ï¼Ÿ è¿™ä¸ªapiå“ªé‡Œæ¥çš„ï¼Œ æ±‚è§£é‡Šï¼Ÿ\n app.request().get(&#x27;&#x2F;&#x27;).end(function (res) {\n res.should.status(200);\n done();\n });\n });\n});\n&#x2F;&#x2F;--æŒ‰ç†è¯´åº”è¯¥æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œäº†ä½†æ˜¯æˆ‘ä¸€ç›´å‡ºç°è¿™ä¸ªé”™è¯¯:\n&#x2F;&#x2F;--connect ADDRNOTAVAIL çŸ¥é“çš„æ±‚è§£é‡Š\n&#x2F;&#x2F;--æˆ‘å°è¯•ç”¨supertestç›´æ¥æµ‹è¯•ï¼Œ ä½†æ˜¯ä¹Ÿæ˜¯ä¸€ç›´timeoutï¼Œ mocha\n&#x2F;&#x2F;--é‡Œè¾¹åŠ å¤§timeoutæ—¶é—´ï¼Œ ç»“æœå°±æ˜¯ä¸€ç›´æ²¡ååº”ã€‚ \n\n&#x2F;&#x2F;--åˆ†æåŸå› ï¼Œ expressç‰ˆæœ¬é—®é¢˜ï¼Œ nodeclubä¸­expressçš„ç‰ˆæœ¬è¿˜æ˜¯2.x, æ‰€ä»¥æ‰ä¼šæœ‰\n&#x2F;&#x2F;--app.request(), app.close()è¿™äº›api\n&#x2F;&#x2F;--ç¬¬äºŒä¸ªåŸå› ï¼Œ åˆ°supertestå®˜ç½‘ï¼Œ å‘ç°äººå®¶éƒ½å·²ç»è½¬æˆ˜åˆ°superagenté¡¹ç›®äº†ï¼Œ äºæ˜¯æˆ‘å†™äº†ä¸‹é¢è¿™ä¸ªæµ‹è¯•è„šæœ¬ï¼Œ å¯ä»¥é€šè¿‡äº†\nvar express = require(&#x27;express&#x27;);\nvar should = require(&#x27;should&#x27;);\nvar path = require(&#x27;path&#x27;);\nvar superagent = require(&#x27;superagent&#x27;);\nvar app = express()\napp.get(&#x27;&#x2F;user&#x27;, function(req, res, next) {\n res.send(200, {\n name: &#x27;tobi&#x27;\n })\n})\ndescribe(&#x27;myapp.js&#x27;, function() {\n this.timeout(5000)\n before(function(done) {\n app.listen(21, done);\n })\n after(function() {\n &#x2F;&#x2F; app.close()\n })\n it(&#x27;should &#x2F;status 200&#x27;, function(done) {\n agent = superagent.agent()\n agent.get(&#x27;http:&#x2F;&#x2F;localhost:21&#x2F;user&#x27;).end(function(err, res) {\n console.log(err, res)\n res.should.have.status(200);\n res.text.should.include(&#x27;tobi&#x27;);\n return done();\n });\n })\n})\n</code></pre><p>###7.2 è¿è¡Œ</p>\n<ul>\n<li>nodejsæ˜¯å•çº¿ç¨‹åº”ç”¨ï¼Œ å¦‚æœæˆ‘ä»¬ç”¨nodeå‘½ä»¤æ¥è¿è¡Œæˆ‘ä»¬çš„åº”ç”¨ï¼Œ å½“å‡ºç°ä¸€ä¸ªå°é”™è¯¯ï¼Œ å®ƒå°±æŒ‚äº†ã€‚ ç„¶åæ²¡æœ‰ç„¶åäº†ã€‚ é¿å…è¿™ç§é—®é¢˜çš„æ–¹æ³•æœ‰å¦‚ä¸‹å·¥å…·ï¼š</li>\n</ul>\n<ul>\n<li>1.forever</li>\n<li>2.nodemon</li>\n<li>3.supervisor\nnodeclub ä½¿ç”¨ forever æ¥è¿è¡Œé¡¹ç›®ï¼Œ ä½¿ç”¨è¿™ç±»å·¥å…·çš„å¥½å¤„å°±æ˜¯ï¼Œ å½“æœ‰ä»£ç æ”¹åŠ¨è¿‡åï¼Œ ä¼šè‡ªåŠ¨çš„é‡å¯åº”ç”¨ã€‚ ä¸å¿…æ¯æ¬¡è‡ªå·±å»è¿è¡Œ <code>node *.js</code></li>\n</ul>\n<h2>##8. è¯´è¯´è‡ªå·±çš„ç»éªŒ</h2>\n<p>å¾…ç»­â€¦\n###8.1 æ¶ˆæ¯è®¢é˜…è®¾è®¡\n###8.2 express + socket\n###8.3 å¼‚æ­¥\n###8.4 Action</p>\n</div>",
"title": "é€šè¿‡ nodeclub é¡¹ç›®æºç æ¥è®²è§£å¦‚ä½•åšä¸€ä¸ª nodejs + express + mongodb é¡¹ç›®",
"last_reply_at": "2016-08-01T23:48:49.923Z",
"good": true,
"top": false,
"reply_count": 76,
"visit_count": 26930,
"create_at": "2014-04-22T05:44:02.557Z",
"author": {
"loginname": "6174",
"avatar_url": "https://avatars.githubusercontent.com/u/3872872?v=3&s=120"
}
},
{
"id": "577d8646abe833170602610e",
"author_id": "577d81cce538b3ee7889ffce",
"tab": "job",
"content": "<div class=\"markdown-text\"><p>èŒä½è¦æ±‚:\nç†Ÿç»ƒè¿ç”¨Node.js, React, Redux, ES6, Webpack, ç†Ÿæ‚‰UIå¼€å‘åŠåç«¯NoSql (mongodbç­‰)\næœ‰ä»¥ä¸‹ç»éªŒæ›´ä½³: Graphql, Elastic Search, Relay, ES7, KOA, Reactive programming ,SQL , Python\nå¼¹æ€§å·¥ä½œæ—¶é—´, å¯è¿œç¨‹\nå®ä¹ ç”Ÿ300-800/å¤©, å¯è½¬æ­£\nå…¨èŒè–ªé…¬æ ¹æ®æŠ€æœ¯ç¨‹åº¦è€Œå®š, ä¸è®¾ä¸Šé™\nè¯·email ç®€å†è‡³ newadev At <a href=\"http://unidt.com\">unidt.com</a> , å½“å¤©å›å¤</p>\n<p>å…¬å¸: åé™¢æ•°æ®åœ¨å¤§æ•°æ®åˆ†æã€æŒ–æ˜åŠåº”ç”¨é¢†åŸŸæ·±è€•åå‡ å¹´ï¼ŒæˆåŠŸå¸®åŠ©ç”µä¿¡ã€ç”µå•†ã€é›¶å”®ã€é‡‘èã€åˆ¶é€ ç­‰é¢†åŸŸçš„å®¢æˆ·åˆ©ç”¨å¤§æ•°æ®æå‡æ•ˆç‡ã€é™ä½æˆæœ¬å’Œå¢åŠ è¥æ”¶ã€‚ç›®æ ¸å¿ƒä¸šåŠ¡ä¸ºï¼šäº§ä¸šå¤§æ•°æ®åº”ç”¨ã€æ·±åº¦å­µåŒ–(æ•°æ®å®éªŒå®¤)ã€æ•°æ®äº’è”å’Œæ™ºèƒ½å¼•æ“ã€‚</p>\n<p>åœ°ç‚¹: å¯åœ¨ä¸Šæµ·, æ­å·, åŒ—äº¬, è¥¿å®‰æˆ–æˆéƒ½å…¥èŒ, æˆ–è¿œç¨‹å·¥ä½œ</p>\n</div>",
"title": "[ä¸Šæµ· æ­å· åŒ—äº¬ è¥¿å®‰ æˆéƒ½ *è¿œç¨‹*] Node.js React å®ä¹ ç”Ÿ(3), å…¨èŒ(2)",
"last_reply_at": "2016-08-01T19:13:09.820Z",
"good": false,
"top": false,
"reply_count": 22,
"visit_count": 2065,
"create_at": "2016-07-06T22:29:26.570Z",
"author": {
"loginname": "React1010",
"avatar_url": "https://avatars.githubusercontent.com/u/20327783?v=3&s=120"
}
},
{
"id": "579d7261da05b9e92af3258b",
"author_id": "53ac16d8c3ee0b5820b8fcff",
"tab": "share",
"content": "<div class=\"markdown-text\"><p>ç›´æ’­çš„å†…å®¹å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>å¹³æ—¶ä¼šç ”ç©¶ä¸€äº›æ–°çš„å·¥å…·ï¼Œæ¯”å¦‚dockerå•Šï¼Œelastic searchå•Šï¼ŒiOSæˆ–è€…å®‰å“çš„ä¸€äº›æœ‰è¶£çš„åº“å•Šä¹‹ç±»çš„ã€‚</li>\n<li>å¯ä»¥åº”æ°´å‹çš„è¦æ±‚ï¼Œæ¼”ç¤ºä¸€äº›ä»£ç ç¼–å†™ã€‚</li>\n<li>å¦‚æœæ°´å‹æƒ³äº†è§£æŸä¸ªå·¥å…·ï¼Œä½†åˆæ‡’å¾—è‡ªå·±å»ç ”ç©¶ï¼Œå¯ä»¥å‘æˆ‘æå‡ºï¼Œæœ‰è¶£çš„è¯æˆ‘ä¼šç›´æ’­ç ”ç©¶ã€‚</li>\n</ol>\n<p>ç›´æ’­æ—¶é—´ï¼š\næ¯å‘¨ä¸€ä¸‰äº”æ™š8ï¼š00~10ï¼š30</p>\n<p>æœ‰å…´è¶£çš„äººæ¬¢è¿æ¥çœ‹å“ˆï¼Œç›´æ’­åœ°å€ï¼š\n<a href=\"http://www.douyu.com/kilik52\">http://www.douyu.com/kilik52</a></p>\n<p>ä¸ªäººä»‹ç»ï¼š\næŠ€æœ¯æ ˆï¼š\niOSï¼ˆOBJCï¼Œswiftï¼‰ã€å®‰å“ï¼ˆJAVAï¼‰ã€NodeJSã€ AngularJS</p>\n<p>è‡ªå·±å¼€äº†ä¸ªå…¬å¸åšè‡ªä¸»äº§å“å’Œå¤–åŒ…ã€‚ å¹³æ—¶æ²¡æœ‰ç»´æŠ¤ä»€ä¹ˆå¼€æºåº“ä»€ä¹ˆçš„ã€‚ä¸è¿‡æœ‰ä¸€ä¸ªäº§å“ï¼š\n<a href=\"http://shaozi.info\">http://shaozi.info</a>ï¼Œ è¿™ä¸ªäº§å“çš„å‰ç«¯ã€åç«¯ã€iOSå’Œå®‰å“éƒ½æ˜¯æˆ‘ä¸€ä¸ªäººå¼€å‘çš„ï¼ˆåæ¥æ‹›äº†ä¸¤ä¸ªäººç”¨æ¥åŠ å¿«è¿›åº¦ï¼‰</p>\n</div>",
"title": "æ‰“ç®—ç›´æ’­ç¼–ç¨‹ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰äººæœ‰å…´è¶£",
"last_reply_at": "2016-08-01T15:27:15.802Z",
"good": false,
"top": false,
"reply_count": 8,
"visit_count": 482,
"create_at": "2016-07-31T03:37:05.660Z",
"author": {
"loginname": "kilik52",
"avatar_url": "https://avatars.githubusercontent.com/u/37238?v=3&s=120"
}
},
{
"id": "579f4ce59f22cae71c654290",
"author_id": "579f4a749f22cae71c65428f",
"tab": "job",
"content": "<div class=\"markdown-text\"><p>å…¬å¸ä¸šåŠ¡é£é€Ÿå‘å±•ï¼Œéœ€è¦node+mongodbæŠ€æœ¯äººæ‰ï¼Œå¾…é‡ä¼˜åšã€‚</p>\n<p>å…¬å¸ç½‘ç«™ï¼š<a href=\"http://www.i-xiaoqu.com\">www.i-xiaoqu.com</a></p>\n<p>æ‚¨å¯ä»¥åœ¨å¾®ä¿¡ä¸­æœç´¢â€œæ™ºå–ç®¡å®¶â€å…¬ä¼—å· ï¼Œå…³æ³¨äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p>\n<p>å¾®ä¿¡å·ã€æ‰‹æœºå·ï¼š13968125683</p>\n<p>ç‹å…ˆç”Ÿã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>\n</div>",
"title": "ã€æ­å·ã€‘--ç¤¼é‚»ç½‘ç»œ node + mongodbé«˜çº§å·¥ç¨‹å¸ˆ",
"last_reply_at": "2016-08-01T13:21:41.193Z",
"good": false,
"top": false,
"reply_count": 0,
"visit_count": 110,
"create_at": "2016-08-01T13:21:41.193Z",
"author": {
"loginname": "chunlianwang",
"avatar_url": "https://avatars.githubusercontent.com/u/20772872?v=3&s=120"
}
},
{
"id": "579f12dbda05b9e92af325e6",
"author_id": "5799900b2d740f7c26637f3d",
"tab": "ask",
"content": "<div class=\"markdown-text\"><p>ç½‘ä¸Šè¯´æ˜¯ç‰ˆæœ¬é”ï¼Œæºç é‡Œé¢æ²¡æ‰¾åˆ°å®ƒæ˜¯æ€ä¹ˆæ”¹å˜â€œ__Vâ€œçš„å€¼\né‚£__vçš„å€¼åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ”¹å˜ï¼Ÿ</p>\n</div>",
"title": "mongooseçš„__vå­—æ®µæœ‰ä»€ä¹ˆç”¨ï¼Ÿ",
"last_reply_at": "2016-08-01T12:53:59.392Z",
"good": false,
"top": false,
"reply_count": 2,
"visit_count": 108,
"create_at": "2016-08-01T09:14:03.766Z",
"author": {
"loginname": "yuxinhua0",
"avatar_url": "https://avatars.githubusercontent.com/u/20109390?v=3&s=120"
}
},
{
"id": "579f161541404b052be5daa7",
"author_id": "51d37c80d44cbfa304285441",
"tab": "ask",
"content": "<div class=\"markdown-text\"><p><img src=\"//dn-cnode.qbox.me/Fp46L6xvjXDwAxKPZ6DjTVgMZ38o\" alt=\"12.pic.jpg\">\n<img src=\"//dn-cnode.qbox.me/FiLZunpqX0RTfcffcBHIIUK4jnCq\" alt=\"14.pic.jpg\">\n<img src=\"//dn-cnode.qbox.me/FkbFDDsOTSbAzBKEnitpxZutGT2X\" alt=\"13.pic.jpg\"></p>\n<p>ä»¥ä¸Šæ˜¯ä»£ç å†…å®¹ï¼ŒåŸºæœ¬æ˜¯ <a href=\"https://github.com/moajs/moa2\">moa2</a> çš„ ä»£ç ï¼Œrouter ç”±äºä½¿ç”¨äº† koa-router getæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•° æ˜¯éœ€è¦ä½¿ç”¨Generator å‡½æ•°çš„ï¼Œå·²ä¿®æ”¹ã€‚\nç„¶åå°±æ˜¯ views ä¸­é—´ä»¶ï¼Œæºç æ˜¯</p>\n<pre class=\"prettyprint language-js\"><code>module.exports = views(path.join(__dirname, &#x27;..&#x2F;..&#x2F;app&#x2F;views&#x27;), {\n extension: &#x27;jade&#x27;\n})\n</code></pre><p>å·²æ ¹æ® <a href=\"https://cnodejs.org/topic/557298dac4e7fbea6e9a2f17\">koaå¦‚ä½•ä½¿ç”¨jadeï¼Œå€’é¥¬äº†2å¤©äº†</a> è¿™ç¯‡å†…å®¹ä¿®æ”¹äº†ã€‚\nä½†è¿˜æ˜¯ 404\nrouter å†…ä¿®æ”¹æˆ this.body = â€˜Hello Worldâ€™ å¯ä»¥æ­£å¸¸å‡ºæ¥ï¼Œæ‰€ä»¥å°±å‰©ä¸‹ return this.render(â€˜indexâ€™, {\ntitle: â€˜Hello Worldâ€™\n});</p>\n<p>path.join(__dirname, â€˜â€¦/â€¦/app/viewsâ€™ éƒ¨åˆ† ä½¿ç”¨ è¿‡ â€˜â€¦/app/viewsâ€™ ï¼Œâ€™/app/viewsâ€™ ï¼Œâ€™/viewsâ€™ ï¼Œâ€˜viewsâ€™ éƒ½æ˜¯ 404\nç”šè‡³ æˆ‘åœ¨æ ¹ç›®å½•ä¹Ÿå¼€äº†ä¸€ä¸ªä¸€æ ·çš„views æ–‡ä»¶å¤¹ä¹Ÿæ˜¯ä¸å¯ä»¥</p>\n<p><img src=\"//dn-cnode.qbox.me/FrD2qJrMNPp553aaEyN42MhIHnsi\" alt=\"å±å¹•å¿«ç…§ 2016-08-01 ä¸‹åˆ5.25.29.png\">\n<img src=\"//dn-cnode.qbox.me/FlxkeBXPzthmPhjalDNzk2eszlN6\" alt=\"å±å¹•å¿«ç…§ 2016-08-01 ä¸‹åˆ5.25.16.png\">\nè¿™ä¸¤ä¸ªjade çš„å†…å®¹ ç›®æµ‹ä¹Ÿæ²¡æœ‰é—®é¢˜å§â€¦â€¦</p>\n<p>è¯·äº†è§£çš„å¤§ç‰›æŒ‡å¯¼ä¸€ä¸‹ï¼Œæ€æ ·æ‰ä¸404</p>\n</div>",
"title": "Koa2 ä¸Š å…³äº jade çš„é…ç½®é—®é¢˜",
"last_reply_at": "2016-08-01T12:50:49.462Z",
"good": false,
"top": false,
"reply_count": 3,
"visit_count": 74,
"create_at": "2016-08-01T09:27:49.719Z",
"author": {
"loginname": "thomas0836",
"avatar_url": "//gravatar.com/avatar/b62fb4edd06b28eb30c575af5fed1c61?size=48"
}
},
{
"id": "5771eb20d3baaf401780bc41",
"author_id": "563f17d0b0cedafd38970462",
"tab": "share",
"content": "<div class=\"markdown-text\"><h2>å‰è¨€</h2>\n<p>åŠ å¯†è´§å¸æ˜¯ä¸€ç§æ•°å­—èµ„äº§ï¼Œéšç€åŒºå—é“¾ç­‰ç›¸å…³æŠ€æœ¯çš„åˆ›æ–°å’Œçªç ´ï¼Œå¾ˆå¤šæœ‰å½¢æˆ–æ— å½¢èµ„äº§å®ç°äº†å»ä¸­å¿ƒåŒ–ã€‚æ¯”å¦‚æˆ‘ä»¬è¿™é‡Œåˆ†äº«çš„ <a href=\"http://ebookchain.org/\">äº¿ä¹¦</a> å°±æ˜¯è¦æŠŠæ•°å­—å‡ºç‰ˆç‰©ç‰ˆæƒè¿›è¡Œä¿æŠ¤ï¼Œå®ç°å»ä¸­å¿ƒåŒ–ï¼Œè§£å†³ä¸šç•Œå¤šå¹´æ¥ç‰ˆæƒä¿æŠ¤ä¸åŠ›çš„éš¾é¢˜ã€‚</p>\n<p>æ— è®ºæ•°å­—èµ„äº§ï¼Œè¿˜æ˜¯æ•°å­—å‡ºç‰ˆç‰ˆæƒï¼Œéƒ½æ˜¯æœ‰æ˜ç¡®æ‰€æœ‰æƒçš„ï¼Œå½“å‰å®ç°æ•°å­—èµ„äº§æ‰€å±çš„æŠ€æœ¯æ‰‹æ®µå°±æ˜¯æœ¬ç¯‡è¦ä»‹ç»çš„<code>ç­¾å</code>ã€‚è€Œ<code>å¤šé‡ç­¾å</code>æ˜¯å¯¹<code>ç­¾å</code>çš„æ‰©å±•ä½¿ç”¨ï¼Œç»™æ•°å­—èµ„äº§è½¬ç§»æä¾›äº†å®‰å…¨ä¿éšœå’ŒæŠ€æœ¯æ‰‹æ®µã€‚æœ¬ç¯‡ï¼Œä»åŸºæœ¬æ¦‚å¿µå…¥æ‰‹ï¼Œè¯¦ç»†äº†è§£<code>ç­¾å</code>å’Œ<code>å¤šé‡ç­¾å</code>çš„ä½œç”¨å’Œä»£ç å®ç°ã€‚</p>\n<h2>æºç </h2>\n<p>ä¸»è¦æºç åœ°å€ï¼š</p>\n<p>signatures.js <a href=\"https://github.com/Ebookcoin/ebookcoin/blob/v0.1.3/modules/signatures.js\">https://github.com/Ebookcoin/ebookcoin/blob/v0.1.3/modules/signatures.js</a></p>\n<p>multisignatures.js <a href=\"https://github.com/Ebookcoin/ebookcoin/blob/v0.1.3/modules/multisignatures.js\">https://github.com/Ebookcoin/ebookcoin/blob/v0.1.3/modules/multisignatures.js</a></p>\n<h2>è§£è¯»</h2>\n<h4>ç­¾å</h4>\n<p>ï¼ˆ1ï¼‰ç­¾åçš„ä½œç”¨å’Œç‰¹ç‚¹</p>\n<p><strong>åå­—çš„è§£é‡Š</strong>ã€‚<code>ç­¾å</code>æ˜¯ä»€ä¹ˆï¼Ÿæœ‰äººç¬¬ä¸€ååº”æ˜¯æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ç”¨ç¬”<code>ç­¾å</code>ï¼Œé‚£ä¹ˆæˆ‘ä¼šè¯´ï¼Œä½ çš„ç›´è§‰æ˜¯å¯¹çš„ã€‚ä¸è¿‡ï¼Œå½“å¾ˆå¤šå°ä¼™ä¼´çœ‹åˆ°ç½‘ä¸Šçš„å¾ˆå¤šè§£é‡Šï¼Œå´åˆè¿·æƒ‘äº†ï¼Œäº‹å®ä¸Šä¸åŒæ¦‚å¿µåœ¨ä¸åŒé¢†åŸŸçš„è¡¨è¿°æ˜¯æœ‰å·®åˆ«çš„ï¼Œä½†æœ¬è´¨ç›¸åŒã€‚æˆ‘åšä¿¡ç”Ÿæ´»æ˜¯ä¸€åˆ‡åˆ›ä½œçš„æºæ³‰ï¼Œä»»ä½•ä¸€ä¸ªæ¦‚å¿µéƒ½èƒ½ä»ç”Ÿæ´»ä¸­æ‰¾åˆ°åŸå‹ï¼Œè¿™é‡Œçš„â€œç­¾åâ€ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>\n<p><strong>ç­¾åçš„ä½œç”¨</strong>ã€‚æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå‡¡æ˜¯éœ€è¦ç¡®è®¤å½’å±çš„ï¼ˆæ˜¯ç­¾åäººçš„ï¼Œä¸æ˜¯å…¶ä»–çš„ï¼‰ï¼Œéƒ½éœ€è¦æ‰€æœ‰è€…è¿›è¡Œç­¾åã€‚æ¯”å¦‚ï¼Œæˆ‘ç­¾åäº†ä¸€ä»½æ–‡ä»¶ï¼Œå‡ºäº†é—®é¢˜ï¼Œè´£ä»»æˆ‘è´Ÿï¼Œæˆ‘ç­¾åäº†ä¸€ä¸ªæ”¯ç¥¨ï¼Œå°±ä»£è¡¨å°†ç”±æˆ‘æ”¯ä»˜ã€‚æˆ‘ä»¬æ™®é€šè€ç™¾å§“æœ€å¸¸è§çš„åœºæ™¯ï¼Œå°±æ˜¯å»é“¶è¡ŒåŠä¸šåŠ¡ï¼Œé“¶è¡ŒèŒå‘˜ä¼šè®©ä½ åå¤ç­¾ä¸€å¤§å †çš„å•æ®ï¼Œæƒ³å¿…æ¯ä¸ªäººéƒ½ä¼šæœ‰æ·±åˆ»çš„å°è±¡ã€‚</p>\n<p><strong>ç­¾åçš„ç‰¹ç‚¹</strong>ã€‚äººçš„ç¬”è¿¹æ˜¯å¾ˆä¸ªæ€§åŒ–çš„ï¼Œè¶Šç†Ÿç»ƒçš„å­—ä½“ï¼Œä¸ªæ€§ç‰¹å¾è¶Šå›ºå®šï¼Œå› æ­¤ä¸€ä¸ªäººçš„åå­—ï¼Œä¸åŒçš„äººå†™å‡ºå®Œå…¨ç›¸åŒç¬”è¿¹çš„æ¦‚ç‡éå¸¸å°ï¼Œå³ä¾¿æ˜¯ä¸“ä¸šæ¨¡ä»¿ä¹Ÿå¯ä»¥é€šè¿‡æŠ€æœ¯é‰´åˆ«å‡ºæ¥ï¼Œè¿™æ ·ä¸€æ¥ï¼Œäººçš„<code>ç­¾å</code>å°±å…·æœ‰å”¯ä¸€æ€§ã€å¯éªŒè¯çš„ç‰¹ç‚¹ï¼Œå¹¶è¢«æ³•å¾‹è®¤å¯ã€‚</p>\n<p><strong>ç­¾åçš„éªŒè¯</strong>å¦‚æœï¼Œä½ æ‹¿ç€ä¸€å¼ æ”¯ç¥¨å»é“¶è¡Œå…‘æ¢ï¼Œé“¶è¡ŒèŒå‘˜ä¼šå¯¹æ”¯ç¥¨ä¸Šçš„ç­¾åå’Œå°ç« ä»”ç»†æ¯”å¯¹ï¼Œç¡®ä¿å°ç« å¤§å°ã€æ ·å¼ï¼Œä»¥åŠä»˜æ¬¾äººç­¾åç­‰ï¼Œä¸é“¶è¡Œç•™å­˜çš„ä¿¡æ¯ä¸€è‡´ï¼Œæ‰ä¼šç»™ä½ å…‘ä»˜ï¼Œè¿™å°±æ˜¯<code>ç­¾å</code>éªŒè¯ã€‚</p>\n<p>ï¼ˆ2ï¼‰æ¯”ç‰¹å¸å®¢æˆ·ç«¯ç­¾ååŠŸèƒ½</p>\n<p>æ•°å­—èµ„äº§éœ€è¦ç­¾åã€‚ç±»æ¯”äººç±»ç­¾åï¼Œæ¯”ç‰¹å¸ä¹Ÿæœ‰ç­¾ååŠŸèƒ½ã€‚å¦‚æœäº†è§£æ¯”ç‰¹å¸é’±åŒ…ï¼ˆå®¢æˆ·ç«¯è½¯ä»¶ï¼‰ï¼Œå°±ä¼šå‘ç°å®ƒæä¾›äº†ä¸€ä¸ªæ¶ˆæ¯ç­¾åçš„åŠŸèƒ½ï¼Œå¯ä»¥ç”¨æ¥å¯¹å…¶ä»–ç”¨æˆ·é€šè¿‡æ¯”ç‰¹å¸ç½‘ç»œä¹‹å¤–çš„ä¿¡æ¯è¿›è¡Œç­¾åå’ŒéªŒè¯ã€‚æˆ‘ä¸ªäººä½¿ç”¨çš„æ˜¯ <a href=\"https://www.bitcoin.org/\">æ¯”ç‰¹å¸å®˜æ–¹ç½‘ç«™</a> æä¾›çš„æ¯”å¤ªé’±åŒ…ï¼Œå¦‚å›¾ï¼š</p>\n<p><img src=\"//dn-cnode.qbox.me/FsXV4VnyyFu45QXY0WBB-iSTRfNa\" alt=\"bither-wallet-sign.png\"></p>\n<p>è¿™ä¸ªåŠŸèƒ½å¹²ä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿæœ‰å¥½å¤šå°ä¼™ä¼´ä¸æ¸…æ¥šï¼Œè¿™é‡Œä¸¾ä¸ªç®€å•çš„ä¾‹å­è§£é‡Šä¸€ä¸‹ï¼Œå…·ä½“ä½¿ç”¨çš„æ—¶å€™ç»ä¸é™äºè¿™äº›åº”ç”¨ã€‚</p>\n<p>Aliceå¼€äº†ä¸€ä¸ªç½‘åº—ï¼Œä½†æ²¡æœ‰ç›´æ¥æ¥å…¥æ¯”ç‰¹å¸ç½‘ç»œï¼Œä¸èƒ½è‡ªåŠ¨ç¡®è®¤å’ŒéªŒè¯æ”¯ä»˜è€…ã€‚å®¢æˆ·Imflyè´­ä¹°äº†å¥¹çš„äº§å“ï¼Œå¹¶ç”¨æ¯”ç‰¹å¸æ”¯ä»˜äº†å…¨éƒ¨è´§æ¬¾ã€‚å› ä¸ºæ¯”ç‰¹å¸åœ°å€å’Œäº¤æ˜“éƒ½æ˜¯å…¬å¼€åŒ¿åçš„ï¼Œä¸ºäº†é˜²æ­¢å†’å……å†’é¢†å®ï¼ŒAliceéœ€è¦ç¡®è®¤Imflyæä¾›çš„é‚£ä¸ªä»˜æ¬¾åœ°å€ç¡®å®æ˜¯imflyæœ¬äººçš„ï¼Œå¦åˆ™ä¸èƒ½å‘è´§ã€‚è¿™æ—¶å€™ï¼Œå°±éœ€è¦Imflyå…ˆæŠŠæ”¯ä»˜è´§æ¬¾çš„æ¯”ç‰¹å¸åœ°å€å’Œç›¸å…³äº¤æ˜“<code>ç­¾åä¿¡æ¯</code>ï¼ˆå¦‚å›¾ï¼‰ï¼Œç„¶åé€šè¿‡QQæˆ–é‚®ä»¶ä¼ ç»™Aliceï¼ŒAliceä½¿ç”¨å®¢æˆ·ç«¯<code>éªŒè¯ä¿¡æ¯ç­¾å</code>ï¼Œæ‰èƒ½ç¡®è®¤äº¤æ˜“ç¡®å®æ˜¯Imflyçš„ã€‚</p>\n<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰<code>ç­¾å</code>åŠŸèƒ½ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿå› ä¸ºæ¯”ç‰¹å¸ä»…æ˜¯ä¸€ä¸ªåŒ¿åã€å®‰å…¨çš„æ”¯ä»˜æ‰‹æ®µï¼Œä½†å´æ— æ³•ç¡®è®¤æ”¯ä»˜æ–¹æˆ–æ”¶æ¬¾æ–¹æ˜¯è°ï¼Œä¿¡æ¯çš„ä¸ç¡®å®šæ€§ï¼Œå°†ä½¿å¾—æ¯”ç‰¹å¸ç½‘ç»œä¹‹å¤–çš„äº¤æ˜“æ— æ³•è¾¾æˆã€‚åœ¨ä¸­å¿ƒåŒ–çš„ä¸–ç•Œé‡Œï¼Œè¿™ä¸ªé—®é¢˜æ˜¯é€šè¿‡è¿è¥å¹³å°è¿™ä¸ªç¬¬ä¸‰æ–¹è¾¾æˆçš„ï¼Œæ¯”å¦‚æ”¯ä»˜å®ç­‰ï¼ŒåŒæ–¹çš„å…¨éƒ¨ä¿¡æ¯ï¼Œå¹³å°éƒ½æŒæ¡ï¼Œä»»ä½•ä¸€æ–¹å‡ºç°æ¬ºè¯ˆï¼Œéƒ½éœ€è¦é€šè¿‡å‘å¹³å°æŠ•è¯‰æ¥è§£å†³ã€‚ç”¨æˆ·éœ€è¦å¯¹ç¬¬ä¸‰æ–¹å¹³å°ç»å¯¹ä¿¡ä»»ï¼Œå¹¶é€šè¿‡ç‰ºç‰²ä¸ªäººä¿¡æ¯å®‰å…¨è·å¾—äº¤æ˜“çš„åŸºæœ¬ä¿éšœã€‚</p>\n<p>ï¼ˆ3ï¼‰ç”µå­ç­¾å</p>\n<p>é€šè¿‡ä¸Šè¿°åˆ†æï¼Œå¯ä»¥ç†è§£çš„æ˜¯ï¼Œ<code>ç­¾å</code>çš„ä½œç”¨æ˜¯ç¡®å®šèµ„äº§æ‰€å±ï¼Œå…¶ç‰¹å¾æ˜¯ç®€å•ã€å®‰å…¨ã€å¯éªŒè¯ã€‚æŠŠè¿™ä¸ªæ¦‚å¿µæŠ½è±¡å‡ºæ¥ï¼Œåº”ç”¨åˆ°è®¡ç®—æœºç³»ç»Ÿé‡Œï¼Œä¸ºäº†ç¡®å®šæ•°å­—èµ„äº§æ‰€å±ï¼Œä¹Ÿéœ€è¦è¿›è¡Œ<code>ç­¾å</code>ï¼Œè¿™å°±æ˜¯å¤§å®¶ç»å¸¸çœ‹åˆ°çš„â€œç”µå­ç­¾åâ€çš„æ¦‚å¿µã€‚åœ¨ç½‘ç»œä¸–ç•Œé‡Œï¼Œ<code>ç­¾å</code>å¯ä»¥å¯¹ä»»ä½•éœ€è¦ç¡®è®¤çš„æ•°å­—èµ„äº§è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚æ¯”ç‰¹å¸åœ°å€ã€ç”µå­ä¹¦ç‰ˆæƒç­‰ï¼Œå¹¶ä»¥æ­¤æ¥å®£å‘Šé‡è¦èµ„äº§çš„æ‰€å±ï¼Œè¿™è®©æ— éœ€ç›‘ç®¡çš„å»ä¸­å¿ƒåŒ–äº¤æ˜“æˆä¸ºå¯èƒ½ã€‚</p>\n<p>å…·ä½“å¼€å‘è®¾è®¡ä¸­ï¼Œå°±æ˜¯åŠ å¯†æŠ€æœ¯ä»£æ›¿äººçš„ç¬”è¿¹ï¼Œä¸ç„¶ä»»ä½•ç­¾åæ–¹æ³•éƒ½ä¼šè¢«æ¨¡ä»¿ï¼Œè€Œä¸”æ¨¡ä»¿çš„æˆæœ¬æä½ï¼Œç›¸åï¼ŒéªŒè¯çš„æˆæœ¬å´å¾ˆé«˜ã€‚å…·ä½“çš„åŠ å¯†æˆ–éªŒè¯æŠ€æœ¯ï¼Œè¯·å‚è€ƒå‰é¢çš„ç« èŠ‚ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»äº¿ä¹¦æ˜¯å¦‚ä½•ä½¿ç”¨ç­¾åæŠ€æœ¯çš„ã€‚</p>\n<p>äº¿ä¹¦ä¹Ÿå…·å¤‡ç­¾åèƒ½åŠ›ï¼Œåªä¸è¿‡ï¼Œç›®å‰æ²¡æœ‰å•ç‹¬æä¾›<code>ç­¾åä¿¡æ¯</code>çš„æ“ä½œä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œè€Œæ˜¯é€šè¿‡ç­¾åï¼Œæ·»åŠ äº†<code>æ”¯ä»˜å¯†ç </code>åŠŸèƒ½ï¼Œå¯¹ç”¨æˆ·å¸å·èµ„äº§è¿½åŠ äº†ä¸€å±‚ä¿æŠ¤ã€‚</p>\n<p>ï¼ˆ4ï¼‰äº¿ä¹¦çš„æ”¯ä»˜å¯†ç </p>\n<p><code>ç­¾å</code>æ–¹æ³•åœ¨<code>modules/signatures.js</code>æ–‡ä»¶é‡Œï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>\n<p><img src=\"//dn-cnode.qbox.me/Fjs42b_dNJLS814GIodgr0jZsvjt\" alt=\"signatures-class.png\"></p>\n<p>æˆ‘ä»¬è¿˜æ˜¯ä»Apiå¼€å§‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; modules&#x2F;signatures.jsæ–‡ä»¶\n&#x2F;&#x2F; 179è¡Œ\nrouter.map(shared, {\n &quot;get &#x2F;fee&quot;: &quot;getFee&quot;,\n &quot;put &#x2F;&quot;: &quot;addSignature&quot;\n});\n\n&#x2F;&#x2F; 188è¡Œ\nlibrary.network.app.use(&#x27;&#x2F;api&#x2F;signatures&#x27;, router);\n</code></pre><p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥äº†è§£<code>ç­¾å</code>æä¾›äº†ä¸¤ä¸ªç®€å•çš„å…¬å…±æ¥å£ï¼š</p>\n<pre class=\"prettyprint\"><code>get &#x2F;api&#x2F;signatures&#x2F;fee -&gt; shared.getFee\nput &#x2F;api&#x2F;signatures&#x2F; -&gt; shared.addSignature &#x2F;&#x2F;ç­¾åæ“ä½œ\n</code></pre><p>æ˜¾ç„¶ï¼Œæœ€æ ¸å¿ƒçš„æ–¹æ³•ä¹Ÿå°±æ˜¯<code>shared.addSignature</code>ï¼Œä»£ç ï¼š</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; 215è¡Œ\nshared.addSignature = function (req, cb) {\n\t...\n\tlibrary.scheme.validate(body, {\n\t\tproperties: {\n\t\t\t...\n\t\t},\n\t\trequired: [&quot;secret&quot;, &quot;secondSecret&quot;]\n\t}, function (err) {\n\t\t...\n\n\t\tlibrary.balancesSequence.add(function (cb) {\n\t\t\tif (body.multisigAccountPublicKey &amp;&amp; body.multisigAccountPublicKey != keypair.publicKey.toString(&#x27;hex&#x27;)) {\n\t\t\t\tmodules.accounts.getAccount({publicKey: body.multisigAccountPublicKey}, function (err, account) {\n\t\t\t\t\t...\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tvar transaction = library.logic.transaction.create({\n\t\t\t\t\t\t\t\ttype: TransactionTypes.SIGNATURE, &#x2F;&#x2F; 297è¡Œ\n\t\t\t\t\t\t\t\tsender: account,\n\t\t\t\t\t\t\t\tkeypair: keypair,\n\t\t\t\t\t\t\t\trequester: keypair,\n\t\t\t\t\t\t\t\tsecondKeypair: secondKeypair,\n\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\treturn cb(e.toString());\n\t\t\t\t\t\t}\n ...\t\t\t\n}\n</code></pre><p>æ¯«æ— ç–‘é—®ï¼Œ<code>æ”¯ä»˜å¯†ç </code>ä¹Ÿæ˜¯ä¸€ä¸ªç®€å•çš„äº¤æ˜“ï¼ˆäº¤æ˜“ç±»å‹<code>TransactionTypes.SIGNATURE</code>ï¼Œè§297è¡Œï¼‰ã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬ä¸éš¾æƒ³è±¡ï¼Œæ·»åŠ ç±»ä¼¼æ¯”ç‰¹å¸çš„<code>ç­¾å</code>åŠŸèƒ½ä¹Ÿæ˜¯ä»¶éå¸¸ç®€å•çš„äº‹æƒ…ï¼Œæˆ‘ä»¬ä¼šåœ¨äº¿ä¹¦ä¸‹ä¸€ä¸ªç‰ˆæœ¬é‡Œæ·»åŠ è¿™é¡¹åŠŸèƒ½ï¼Œå…·ä½“è¯·å…³æ³¨ <a href=\"https://github.com/Ebookcoin/ebookcoin\">äº¿ä¹¦å¸ç‰ˆæœ¬åº“</a> æœ€æ–°è¿›å±•ã€‚</p>\n<h4>å¤šé‡ç­¾å</h4>\n<p>ä¸Šé¢æˆ‘ä»¬æåˆ°ï¼Œæ¯”ç‰¹å¸çš„åŒ¿åæ€§ï¼Œä½¿äº¤æ˜“å¤„äºä¸å¯ä¿¡ä¹‹ä¸­ï¼Œæœ€ç»ˆå¯¼è‡´ç”¨æˆ·ä¸æ•¢äº¤æ˜“ã€‚æœ‰äº†ç­¾ååŠŸèƒ½ï¼Œå°±æœ‰äº†ç¡®è®¤åŒæ–¹ä¿¡æ¯çš„æœ‰æ•ˆæ‰‹æ®µï¼Œé—®é¢˜æ€»ç®—æœ‰äº†è§£å†³æ–¹æ¡ˆã€‚èªæ˜çš„å°ä¼™ä¼´ä¼šå‘ç°ï¼Œç­¾åå’ŒéªŒè¯è¿‡ç¨‹é™¤äº†ç¹çï¼Œå¹¶æ²¡æœ‰è®©æˆ‘ä»¬è§‰å¾—æ¯”ä½¿ç”¨ç¬¬ä¸‰æ–¹å¹³å°æ›´æœ‰æ•ˆã€æ›´å®‰å…¨ã€‚æœ‰æ²¡æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿå›ç­”æ˜¯ï¼šæœ‰ï¼Œé‚£å°±æ˜¯å¤šé‡ç­¾åã€‚</p>\n<p>ï¼ˆ1ï¼‰åŸºæœ¬æ¦‚å¿µ</p>\n<p>å¤šé‡ç­¾åï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºä¸€ä¸ªæ•°å­—èµ„äº§çš„å¤šä¸ªç­¾åã€‚ç­¾åæ ‡å®šçš„æ˜¯æ•°å­—èµ„äº§æ‰€å±å’Œæƒé™ï¼Œå¤šé‡ç­¾åé¢„ç¤ºç€æ•°å­—èµ„äº§å¯ç”±å¤šäººæ”¯é…å’Œç®¡ç†ã€‚åœ¨åŠ å¯†è´§å¸é¢†åŸŸï¼Œå¦‚æœè¦åŠ¨ç”¨ä¸€ä¸ªåŠ å¯†è´§å¸åœ°å€çš„èµ„é‡‘ï¼Œé€šå¸¸éœ€è¦è¯¥åœ°å€çš„æ‰€æœ‰äººä½¿ç”¨ä»–çš„ç§é’¥ï¼ˆç”±ç”¨æˆ·ä¸“å±ä¿æŠ¤ï¼‰è¿›è¡Œç­¾åã€‚é‚£ä¹ˆï¼Œå¤šé‡ç­¾åï¼Œå°±æ˜¯åŠ¨ç”¨è¿™ç¬”èµ„é‡‘éœ€è¦å¤šä¸ªç§é’¥ç­¾åï¼Œé€šå¸¸è¿™ç¬”èµ„é‡‘æˆ–æ•°å­—èµ„äº§ä¼šä¿å­˜åœ¨ä¸€ä¸ªå¤šé‡ç­¾åçš„åœ°å€æˆ–å¸å·é‡Œã€‚è¿™å°±å¥½æ¯”ï¼Œæˆ‘ä»¬å·¥ä½œä¸­æœ‰ä¸€ä»½æ–‡ä»¶ï¼Œéœ€è¦å¤šä¸ªéƒ¨é—¨ç­¾ç½²æ‰èƒ½ç”Ÿæ•ˆä¸€æ ·ã€‚</p>\n<p>åœ¨å®é™…çš„æ“ä½œè¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå¤šé‡ç­¾ååœ°å€å¯ä»¥å…³è”nä¸ªç§é’¥ï¼Œåœ¨éœ€è¦è½¬è´¦ç­‰æ“ä½œæ—¶ï¼Œåªè¦å…¶ä¸­çš„mä¸ªç§é’¥ç­¾åå°±å¯ä»¥æŠŠèµ„é‡‘è½¬ç§»äº†ï¼Œå…¶ä¸­mè¦å°äºç­‰äºnï¼Œä¹Ÿå°±æ˜¯è¯´m/nå°äº1ï¼Œå¯ä»¥æ˜¯2/3, 3/5ç­‰ç­‰ï¼Œæ˜¯è¦åœ¨å»ºç«‹è¿™ä¸ªå¤šé‡ç­¾ååœ°å€çš„æ—¶å€™ç¡®å®šå¥½çš„ã€‚</p>\n<p>ï¼ˆ2ï¼‰å·¥ä½œåŸç†</p>\n<p>æ•°å­—èµ„äº§åœ¨æŸç§æƒ…å†µä¸‹ï¼Œéœ€è¦å¤šäººæ”¯é…ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨æŸäº›ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œæ•°å­—èµ„äº§å¦‚æœæ— æ³•ç¡®è®¤å½’å±æŸä¸ªç‰¹å®šçš„äººï¼Œé‚£ä¹ˆæœ€å¥½è®©ç›¸å…³äººå…±åŒç­¾ç½²å®ƒçš„æ‰€æœ‰æƒã€‚</p>\n<p>ä»ç„¶ä¸¾ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨Aliceå‘è´§ä¹‹åï¼ŒImflyæ”¶åˆ°è´§ä¹‹å‰ï¼Œè¿™ç¬”é’±åº”è¯¥ç”±ç¬¬ä¸‰æ–¹ä¿¡ç”¨æ¯”è¾ƒé«˜çš„ä¸­ä»‹æš‚æ—¶ä¿å­˜ï¼Œè¿™ä¸ªé˜¶æ®µï¼Œè¿™ç¬”é’±è¦ä¹ˆæ˜¯Aliceçš„ï¼Œè¦ä¹ˆæ˜¯Imflyçš„ï¼Œæœ€ç»ˆçš„å½’å±è¦çœ‹Imflyæ˜¯å¦æ”¶åˆ°è´§ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªç¬¬ä¸‰æ–¹ï¼Œæ— è®ºå¦‚ä½•éƒ½æ˜¯åº”è¯¥æœ‰çš„ï¼Œä¸ç„¶Imflyå°±è¦æ‰¿æ‹…å¤§éƒ¨åˆ†é£é™©ï¼ˆå› ä¸ºæ¯”ç‰¹å¸çš„å•å‘ä¸å¯é€†ï¼ŒImflyå‘é€ä¹‹åå°±æ²¡æœ‰åŠæ³•æ”¶å›äº†ï¼‰</p>\n<p>è¿™æ ·ä¸€æ¥ï¼Œè¿™ç¬”é’±çš„æ‰€å±å…³ç³»ï¼Œåœ¨äº¤æ˜“è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°Aliceã€Imflyå’Œå¹³å°ç¬¬ä¸‰æ–¹ï¼ˆè™½ç„¶ä¸å±äºå®ƒï¼Œä½†å®ƒæœ‰æƒè£å®šèµ„é‡‘å»å‘ï¼‰ï¼Œé‚£ä¹ˆå°±åº”è¯¥ç”±ä»–ä»¬ä¸‰æ–¹ç­¾åï¼Œå› æ­¤ç½‘ä¸Šè´­ç‰©å°±æ˜¯å…¸å‹çš„å¤šé‡ç­¾åçš„ä¾‹å­ã€‚å…¶å¤šé‡ç­¾åæ¨¡å‹å°±æ˜¯2/3ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦ä»–ä»¬ä¸­çš„ä¸¤ä¸ªç­¾åï¼Œèµ„é‡‘å°±å¯ä»¥è¢«è½¬ç§»ã€‚</p>\n<p>å…·ä½“åˆ°è¿™ä¸ªä¾‹å­ï¼ŒImflyæŠŠé’±æ‰“ç»™ä¸€ä¸ªå…³è”ä¸‰æ–¹ç§é’¥çš„å¤šé‡ç­¾ååœ°å€ï¼Œå¦‚æœæ•´ä¸ªäº¤æ˜“è¿‡ç¨‹é¡ºåˆ©ï¼Œåªè¦Aliceå’ŒImflyä¸¤ä¸ªç­¾åï¼Œè¿™ç¬”é’±å°±ä¼šé¡ºåˆ©åˆ°è¾¾Aliceæ‰‹é‡Œã€‚å¦‚æœä¸é¡ºåˆ©ï¼Œä»–ä»¬ä»»ä½•ä¸€äººæå‡ºä»²è£ï¼Œå¹³å°ç¬¬ä¸‰æ–¹è°ƒæŸ¥ä¹‹åï¼Œé€šè¿‡ç­¾åå°±èƒ½æŠŠè¿™ç¬”é’±è½¬ç»™Aliceæˆ–é€€å›Imflyã€‚è¿™éå¸¸ç±»ä¼¼æ·˜å®å’Œäº¬ä¸œçš„æ¨¡å¼ï¼Œä½†æ˜¯æ¯”ä»–ä»¬æ›´åŠ ä¾¿æ·å’Œå®‰å…¨ï¼Œè‡³å°‘ä¸ç”¨æ‹…å¿ƒç¬¬ä¸‰æ–¹å€’é—­ã€æŒªç”¨èµ„é‡‘æˆ–æºæ¬¾è·‘è·¯ã€‚</p>\n<p>ï¼ˆ3ï¼‰åº”ç”¨åœºæ™¯</p>\n<p>å¾ˆæ˜¾ç„¶ï¼Œå¤šé‡ç­¾åç»™äº†åŠ å¯†è´§å¸è…¾é£çš„ç¿…è†€ï¼Œè®©å®ƒå•ä¸€å•é¡¹æ”¯ä»˜çš„èƒ½åŠ›æ›´å…·å¸å¼•åŠ›ï¼Œè®©åŠ å¯†è´§å¸æŠ€æœ¯åº”ç”¨åˆ°å„è¡Œå„ä¸šæˆä¸ºå¯èƒ½ã€‚è¿™é‡Œç®€å•çš„ç½—åˆ—å‡ ä¸ªåº”ç”¨åœºæ™¯ï¼Œä¾›æ¢ç´¢å’Œæ€è€ƒï¼š</p>\n<ul>\n<li>ç”µå­å•†åŠ¡ã€‚æ¯”è¾ƒå¸¸è§çš„æ˜¯2/3çš„æ¨¡å¼ã€‚ä¸Šé¢ç”µå­å•†åŠ¡ç½‘ç«™çš„ä¾‹å­ï¼Œå°±æ˜¯æœ€å…¸å‹çš„åœºæ™¯ä¹‹ä¸€ï¼Œç›®å‰å·²ç»æœ‰æˆåŠŸçš„æ¡ˆä¾‹äº†ã€‚å»¶ä¼¸ä¸€ä¸‹ï¼Œè¿™ç±»åº”ç”¨æœ¬è´¨å°±æ˜¯ä¸­ä»‹ï¼Œæ‰€ä»¥è¿˜å¯ç”¨åœ¨å„ç±»ä¸­ä»‹æœºæ„æ€§è´¨çš„æœåŠ¡ä¸Šã€‚</li>\n<li>è´¢äº§åˆ†å‰²ã€‚æ¯”å¦‚å¤«å¦»åŒæ–¹å…±æœ‰è´¢äº§ï¼Œå¯ä»¥ä½¿ç”¨1/2çš„æ¨¡å¼ï¼Œä¸€ä¸ªè´¦æˆ·è°éƒ½å¯ä»¥ä½¿ç”¨ï¼Œè·Ÿå„è‡ªæ‹¥æœ‰å¸å·ä¸€æ ·ï¼Œå¥½å¤„æ˜¯ç³»ç»Ÿå¿ å®è®°å½•äº†æ¯ä¸ªäººçš„èŠ±é”€ï¼Œé—¹æ°çš„æ—¶å€™å¾ˆå®¹æ˜“æ¸…ç®—ã€‚æ‰©å±•åˆ°å…¬å¸åˆä¼™ç»è¥ï¼Œå¯ä»¥ä½¿ç”¨1/næ¨¡å¼ï¼Œnä¸ªäººåˆä¼™äººï¼Œéƒ½å¯ä»¥ç›´æ¥æ”¯é…å…±æœ‰èµ„é‡‘ï¼Œå…·ä½“æ¸…ç®—æ—¶ï¼Œä¸€ç›®äº†ç„¶ã€‚</li>\n<li>èµ„é‡‘ç›‘ç®¡ã€‚å…¶å®ï¼Œè¿™æ˜¯å¤šé‡ç­¾åçš„æœ€ç›´æ¥ä½œç”¨ï¼Œä¸€ç¬”é’±éœ€è¦å¤šä¸ªäººç­¾åæ‰èƒ½ä½¿ç”¨ï¼Œä»»ä½•ä¸€ä¸ªäººéƒ½æ— æ³•ç›´æ¥åŠ¨ç”¨èµ„é‡‘ï¼Œè¿™åœ¨ç”Ÿæ´»ä¸­å¤ªå¸¸è§äº†ï¼Œåªè¦çµæ´»è®¾ç½®å¤šé‡ç­¾åçš„æ¯”é‡æ¨¡å¼ï¼Œå°±èƒ½è§£å†³ç”Ÿæ´»ä¸­å¾ˆå¤šé—®é¢˜ã€‚æ¯”å¦‚ï¼Œæ¥ç€ä¸Šé¢å¤«å¦»çš„ä¾‹å­ï¼Œå¤«å¦»è¦å‚¨å¤‡ä¸€ç¬”èµ„é‡‘ï¼Œä¾›å­©å­ä¸Šå¤§å­¦ä½¿ç”¨ï¼Œåœ¨è¿™ä¹‹å‰è°éƒ½ä¸èƒ½åŠ¨ï¼Œé‚£ä¹ˆæŠŠæ¨¡å¼æ”¹ä¸º2/2ï¼Œä¸ä»…é™åˆ¶äº†å¤«å¦»åŒæ–¹ï¼Œä¹Ÿç»™é»‘å®¢æ”»å‡»å¢åŠ äº†éš¾åº¦ã€‚</li>\n</ul>\n<p>å¤šé‡ç­¾åçš„è®¾è®¡ï¼Œè®©å„ç§ä¸šåŠ¡å»ä¸­å¿ƒåŒ–å……æ»¡æ— é™å¯èƒ½ã€‚</p>\n<p>ï¼ˆ4ï¼‰äº¿ä¹¦çš„å¤šé‡ç­¾å</p>\n<p><code>å¤šé‡ç­¾å</code>æ–¹æ³•åœ¨<code>modules/multisignatures.js</code>æ–‡ä»¶é‡Œï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>\n<p><img src=\"//dn-cnode.qbox.me/Fl9Su_riyYM3LBSVZcnj9mLxk0A3\" alt=\"multisignatures-class.png\"></p>\n<p>å®ç°Apiçš„ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; 318è¡Œ\nrouter.map(shared, {\n &quot;get &#x2F;pending&quot;: &quot;pending&quot;, &#x2F;&#x2F; Get pending transactions\n &quot;post &#x2F;sign&quot;: &quot;sign&quot;, &#x2F;&#x2F; Sign transaction\n &quot;put &#x2F;&quot;: &quot;addMultisignature&quot;, &#x2F;&#x2F; Add multisignature\n &quot;get &#x2F;accounts&quot;: &quot;getAccounts&quot;\n});\n\n&#x2F;&#x2F; 329è¡Œ\nlibrary.network.app.use(&#x27;&#x2F;api&#x2F;multisignatures&#x27;, router);\n</code></pre><p>è§£æä¸€ä¸‹ï¼Œæœ€åäº§ç”Ÿçš„Apiå¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint\"><code>get &#x2F;api&#x2F;multisignatures&#x2F;pending -&gt; shared.pending &#x2F;&#x2F; æŸ¥è¯¢ç­‰å¾…ä¸­çš„äº¤æ˜“\npost &#x2F;api&#x2F;multisignatures&#x2F;sign -&gt; shared.sign &#x2F;&#x2F; ç­¾åäº¤æ˜“\nput &#x2F;api&#x2F;multisignatures&#x2F; -&gt; shared.addMultisignature &#x2F;&#x2F; åˆ›å»ºå¤šé‡ç­¾åå¸å·\nget &#x2F;api&#x2F;multisignatures&#x2F;accounts -&gt; shared.getAccounts &#x2F;&#x2F; è·å¾—å…³è”çš„å¸å·ï¼ˆå¯¹åº”è€…ç”¨æˆ·ç§é’¥ï¼‰\n</code></pre><p>æä¾›çš„åŠŸèƒ½å¾ˆæ˜¾ç„¶ï¼ŒåŒ…æ‹¬ï¼šå¾…äº¤æ˜“æŸ¥è¯¢ã€å…³è”å¸å·åˆ—è¡¨æŸ¥è¯¢ï¼Œç”¨æˆ·ç­¾åäº¤æ˜“ï¼Œåˆ›å»ºå¤šé‡ç­¾åå¸å·ç­‰4ä¸ªæ ¸å¿ƒåŠŸèƒ½ã€‚æˆ‘ä»¬å…ˆä»åˆ›å»ºå¤šé‡ç­¾åå¸å·å¼€å§‹ï¼Œè¿™ä¸ªApiä½¿ç”¨çš„æ˜¯httpçš„<code>put</code>æ–¹æ³•ï¼Œå¯¹åº”çš„è‡ªç„¶æ˜¯<code>æ›´æ–°</code>æ“ä½œï¼Œä¸æŸ¥çœ‹ä»£ç ä¹Ÿå¯ä»¥çŒœæƒ³åˆ°ï¼Œè¯¥åŠŸèƒ½åº”è¯¥æ˜¯åœ¨å·²æœ‰å¸å·åŸºç¡€ä¸Šçš„æ“ä½œï¼Œä»å®¢æˆ·ç«¯é’±åŒ…<code>è®¾ç½®</code>èœå•é‡Œï¼Œå¯ä»¥çœ‹åˆ°å¦‚å›¾æ“ä½œï¼š</p>\n<p><img src=\"//dn-cnode.qbox.me/Fn8bESMoaWz3rnQAE-OuBD-oy3dD\" alt=\"addMultisignature.png\"></p>\n<p>çœ‹çœ‹<code>shared.addMultisignature</code>çš„æºä»£ç å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; modules&#x2F;multisignatures.jsæ–‡ä»¶\nshared.addMultisignature = function (req, cb) {\n\tvar body = req.body;\n\tlibrary.scheme.validate(body, {\n\t\t...\n\n &#x2F;&#x2F; 732è¡Œ\n\t\trequired: [&#x27;min&#x27;, &#x27;lifetime&#x27;, &#x27;keysgroup&#x27;, &#x27;secret&#x27;]\n\t}, function (err) {\n\t ...\n\n\t\tlibrary.balancesSequence.add(function (cb) {\n\t\t\tmodules.accounts.getAccount({publicKey: keypair.publicKey.toString(&#x27;hex&#x27;)}, function (err, account) {\n\t\t\t\t...\n\n &#x2F;&#x2F; 767è¡Œ\n\t\t\t\ttry {\n\t\t\t\t\tvar transaction = library.logic.transaction.create({\n\t\t\t\t\t\ttype: TransactionTypes.MULTI, &#x2F;&#x2F; 769è¡Œ\n\t\t\t\t\t\tsender: account,\n\t\t\t\t\t\tkeypair: keypair,\n\t\t\t\t\t\tsecondKeypair: secondKeypair,\n\t\t\t\t\t\tmin: body.min,\n\t\t\t\t\t\tkeysgroup: body.keysgroup,\n\t\t\t\t\t\tlifetime: body.lifetime\n\t\t\t\t\t});\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn cb(e.toString());\n\t\t\t\t}\n\n\t\t\t\t...\n};\n</code></pre><p>ä»732è¡Œå¯çŸ¥ï¼Œåˆ›å»ºä¸€ä¸ªå¤šé‡ç­¾åï¼Œå¿…é¡»â€™minâ€™, â€˜lifetimeâ€™, â€˜keysgroupâ€™, 'secretâ€™è¿™å››å‚æ•°ï¼ˆå…¶å®ï¼Œä¸€ä¸ªé»˜è®¤å‚æ•°å°±æ˜¯å½“å‰å¸å·ï¼‰ï¼Œminä»£è¡¨ä¸Šé¢è®²åˆ°çš„<code>m</code>å€¼ï¼Œå³éœ€è¦ç¡®è®¤çš„äººæ•°;lifetimeä»£è¡¨ç”Ÿå‘½å‘¨æœŸ;keysgroupåŒ…å«å¤šé‡ç­¾åå…³è”çš„å…¨éƒ¨å¸å·ï¼Œå®ƒæ˜¯æ•°ç»„ç±»å‹ï¼ŒåŒ…å«çš„å…ƒç´ ä¸ªæ•°å°±æ˜¯<code>n</code>;secretæ˜¯ç”¨æˆ·å¯†ç ï¼Œä¸ç”¨æˆ·ç§é’¥å¯¹åº”ã€‚</p>\n<p>ç»è¿‡ä¸€ç³»åˆ—çš„éªŒè¯ä¹‹åï¼Œä½œä¸ºä¸€ä¸ªäº¤æ˜“ï¼ˆäº¤æ˜“ç±»å‹TransactionTypes.MULTIï¼Œ769è¡Œï¼‰ä¿å­˜åˆ°æ•°æ®åº“(åŒºæ¬¾é“¾)é‡Œã€‚åˆ›å»ºæˆåŠŸçš„å¸å·ï¼Œå¯ä»¥æ˜¾ç¤ºå¤šé‡å¸å·èœå•ï¼Œå¯¹äº¤æ˜“è¿›è¡Œæ“ä½œã€‚æ¥ä¸‹æ¥ï¼Œè‡ªç„¶åº”è¯¥èƒ½å¤ŸæŸ¥çœ‹å…¨éƒ¨å…³è”çš„å¸å·ï¼ˆè¯·çœ‹shared.getAccountsæ–¹æ³•ï¼‰ï¼ŒæŸ¥çœ‹<code>å¾…ç¡®è®¤çš„äº¤æ˜“</code>ï¼ˆè¯·çœ‹shared.pendingæ–¹æ³•ï¼‰ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä»…ä»…æ˜¯ç®€å•çš„æŸ¥è¯¢ï¼Œæ²¡ä»€ä¹ˆéš¾åº¦ï¼Œè¿™é‡Œä¸å†æµªè´¹ç¯‡å¹…ã€‚</p>\n<p>å¦‚æœç”¨æˆ·åŒæ„äº¤æ˜“ï¼Œå°±å¯ä»¥å¯¹<code>å¾…ç¡®è®¤çš„äº¤æ˜“</code>è¿›è¡Œç­¾åï¼ˆshared.signæ–¹æ³•ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•çš„æºç å¦‚ä¸‹ï¼š</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F; 586è¡Œ\nshared.sign = function (req, cb) {\n\tvar body = req.body;\n\tlibrary.scheme.validate(body, {\n\t\t...\n\t\trequired: [&#x27;transactionId&#x27;, &#x27;secret&#x27;]\n\t}, function (err) {\n\t\t...\n\n &#x2F;&#x2F; 632è¡Œ\n\t\tfunction done(cb) {\n\t\t\tlibrary.balancesSequence.add(function (cb) {\n &#x2F;&#x2F; 634è¡Œ\n\t\t\t\tvar transaction = modules.transactions.getUnconfirmedTransaction(body.transactionId);\n\n\t\t\t\tif (!transaction) {\n\t\t\t\t\treturn cb(&quot;Transaction not found&quot;);\n\t\t\t\t}\n\n &#x2F;&#x2F; 640è¡Œ\n\t\t\t\ttransaction.signatures = transaction.signatures || [];\n\t\t\t\ttransaction.signatures.push(sign);\n\n\t\t\t\tlibrary.bus.message(&#x27;signature&#x27;, {\n\t\t\t\t\tsignature: sign,\n\t\t\t\t\ttransaction: transaction.id\n\t\t\t\t}, true);\n\t\t\t\tcb();\n\t\t\t}, function (err) {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn cb(err.toString());\n\t\t\t\t}\n\n\t\t\t\tcb(null, {transactionId: transaction.id});\n\t\t\t});\n\t\t}\n\n\t\t...\n};\n</code></pre><p>è¿™ä¸ªæ–¹æ³•ï¼Œç›¸æ¯”å•ç‹¬çš„ç­¾åæ–¹æ³•ï¼Œä¸åŒçš„æ˜¯å•ç‹¬çš„ç­¾åæ–¹æ³•ç›¸å½“äºä¸€ä¸ªæ–°å»ºäº¤æ˜“ï¼Œè€Œè¿™é‡Œçš„å¤šé‡ç­¾åçš„ç”¨æˆ·ç­¾åï¼Œæ˜¾ç„¶ä»…ä»…æ˜¯å¯¹æœªç¡®è®¤äº¤æ˜“ï¼ˆ634è¡Œï¼‰è¿›è¡Œç­¾åç¡®è®¤ï¼ˆ640è¡Œç»´æŠ¤äº†ä¸€ä¸ªç­¾åæ•°ç»„ï¼Œ641è¡Œçš„pushæ–¹æ³•æŠŠç”¨æˆ·ç­¾åå†™å…¥æ•°ç»„ï¼‰ã€‚è€Œä¸”ï¼Œç›¸æ¯”ç‹¬ç«‹ç­¾åï¼ŒéªŒè¯ä¹Ÿæ›´å¤æ‚ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç¯‡ã€Šäº¤æ˜“ã€‹ä¸€æ–‡ä¸­é›†ä¸­è®¨è®ºéªŒè¯é—®é¢˜ã€‚æ‚¨ä¹Ÿå¯ä»¥ç»“åˆä¸‹ä¸€ç¯‡çš„å†…å®¹ï¼Œé˜…è¯»å’Œç†è§£è¿™é‡Œçš„ç­¾åæ–¹æ³•ã€‚</p>\n<h2>æ€»ç»“</h2>\n<p>åœ¨åŠ å¯†è´§å¸é‡Œï¼Œæ¯ä¸€ä¸ªäº¤æ˜“éƒ½æ¶‰åŠåˆ°ä½¿ç”¨ç§é’¥ç­¾åï¼Œç”¨äºç¡®è®¤æ¯ç¬”èµ„é‡‘æ‰€æœ‰äººã€‚ç¡®å®šäº†æ‰€æœ‰äººï¼Œè‡ªç„¶å°±ç¡®å®šäº†èµ„é‡‘è½¬ç§»çš„æ¡ä»¶ã€ç›®æ ‡å’Œæ–¹å‘ï¼Œå°±ä¸ºæˆ‘ä»¬ä¸‹ä¸€æ­¥è¿›è¡Œèµ„é‡‘è½¬ç§»æ“ä½œå¥ å®šäº†åŸºç¡€ã€‚å¾ˆè‡ªç„¶çš„ï¼Œè¯¥ç ”ç©¶ä¸€ä¸‹äº¿ä¹¦çš„äº¤æ˜“äº†ï¼Œè¯·çœ‹ä¸‹ä¸€ç¯‡ï¼š<strong>ã€Šäº¤æ˜“ã€‹</strong>ã€‚</p>\n<h2>é“¾æ¥</h2>\n<p><strong>æœ¬ç³»åˆ—æ–‡ç« å³æ—¶æ›´æ–°ï¼Œè‹¥è¦æŒæ¡æœ€æ–°å†…å®¹ï¼Œè¯·å…³æ³¨ä¸‹é¢çš„é“¾æ¥</strong></p>\n<p>æœ¬æºæ–‡åœ°å€ï¼š <a href=\"https://github.com/imfly/bitcoin-on-nodejs\">https://github.com/imfly/bitcoin-on-nodejs</a></p>\n<p>åŒºå—é“¾ä¿±ä¹éƒ¨ï¼š <a href=\"http://chainclub.org\">http://chainclub.org</a></p>\n<p>äº¿ä¹¦å®˜æ–¹ç½‘ç«™ï¼š <a href=\"http://ebookchain.org\">http://ebookchain.org</a></p>\n<p>äº¿ä¹¦å¼€å‘QQç¾¤ï¼š 185046161 (äº¿ä¹¦ä¸ºå¼€æºé¡¹ç›®ï¼Œæ¬¢è¿å„ç•Œå°ä¼™ä¼´å‚ä¸ï¼‰</p>\n<h2>å‚è€ƒ</h2>\n<p><a href=\"http://ebookchain.org/ebookchain.pdf\">äº¿ä¹¦ç™½çš®ä¹¦ http://ebookchain.org/ebookchain.pdf</a></p>\n</div>",
"title": "ã€ŠNodejså¼€å‘åŠ å¯†è´§å¸ã€‹ä¹‹åä¸ƒï¼šç­¾åå’Œå¤šé‡ç­¾å",
"last_reply_at": "2016-08-01T12:39:44.911Z",
"good": false,
"top": false,
"reply_count": 12,
"visit_count": 535,
"create_at": "2016-06-28T03:12:32.603Z",
"author": {
"loginname": "imfly",
"avatar_url": "https://avatars.githubusercontent.com/u/12215508?v=3&s=120"
}
},
{
"id": "520dc59899f5db772c01ce1f",
"author_id": "51cbfbde73c638f37039ea00",
"content": "<div class=\"markdown-text\"><p>javascriptå®ç°å•ä¾‹æ¨¡å¼æœ‰å¾ˆå¤šç§æ–¹æ³•</p>\n<p>ä¸€ã€ä½¿ç”¨å…¨å±€å˜é‡ä¿å­˜å•ä¾‹</p>\n<p>è¿™æ˜¯æœ€ç®€å•çš„å®ç°æ–¹æ³•</p>\n<pre class=\"prettyprint\"><code>function Person(){ \n this.createTime=new Date(); \n} \n\nvar instance=new Person(); \nfunction getInstance(){ \n return instance; \n} \n</code></pre><p>åŠ è½½è¯¥jsæ—¶å°±åˆ›å»ºä¸€ä¸ªPersonå¯¹è±¡ï¼Œä¿å­˜åˆ°instanceå…¨å±€å˜é‡ä¸­ï¼Œæ¯æ¬¡ä½¿ç”¨éƒ½å–è¿™ä¸ªå¯¹è±¡ã€‚å¦‚æœä¸€æ¬¡éƒ½æ²¡ä½¿ç”¨ï¼Œé‚£ä¹ˆåˆ›å»ºçš„è¿™ä¸ªå¯¹è±¡åˆ™æµªè´¹äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ï¼Œ</p>\n<pre class=\"prettyprint\"><code>var instance \nfunction getInstance(){ \n if(!instance){ \n instance=new Person(); \n } \n return instance; \n} \n</code></pre><p>è¿™æ ·ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰åˆ›å»ºå¯¹è±¡ã€‚\nè¿™ä¸ªæ–¹æ³•çš„ç¼ºç‚¹æ˜¯ï¼Œinstanceæ˜¯å…¨å±€çš„å˜é‡ï¼Œåœ¨å¤šäººåˆä½œæˆ–è€…å¼€å‘å‘¨æœŸæ¯”è¾ƒé•¿çš„æƒ…å†µä¸‹ï¼Œå¾ˆéš¾ä¿è¯instanceä¸ä¼šè¢«å…¶å®ƒä»£ç ä¿®æ”¹æˆ–è¦†ç›–ï¼Œå¾ˆå¯èƒ½åˆ°è°ƒç”¨çš„æ—¶å€™ï¼Œå‘ç°instanceæ ¹æœ¬å°±ä¸æ˜¯Personå¯¹è±¡ã€‚\næˆ‘ä»¬è€ƒè™‘ä¸‹ä½¿ç”¨é—­åŒ…æ¥å°è£…èµ·instanceï¼Œä½¿å®ƒä¸å†æ˜¯å…¨å±€å˜é‡å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜äº†</p>\n<p>äºŒã€é—­åŒ…åˆ›å»ºå¯¹è±¡</p>\n<pre class=\"prettyprint\"><code>var getInstance(){ \nvar instance; \nreturn function(){ \n if(!instance){ \n instance=new Person(); \n } \n return instance; \n } \n}(); \n</code></pre><p>è¿™æ ·ï¼Œinstanceå°±è¢«å°è£…èµ·æ¥äº†ï¼Œä¸ç”¨æ‹…å¿ƒè¢«ä¿®æ”¹äº†ã€‚\nç°åœ¨é€šè¿‡getInstance()å‡½æ•°å¯ä»¥è·å¾—å•ä¾‹äº†ã€‚æ–°çš„é—®é¢˜ï¼Œå¦‚æœæˆ‘é€šè¿‡new Person()æ¥åˆ›å»ºå¯¹è±¡ï¼Œè·å¾—çš„è¿˜æ˜¯å¤šä¸ªå¯¹è±¡ï¼Œjavascriptåˆä¸å¯ä»¥åƒjavaä¸€æ ·æŠŠæ„é€ å™¨ç§æœ‰åŒ–ã€‚é‚£æ€ä¹ˆæ ·å¯ä»¥è®©å¤šæ¬¡newå‡ºæ¥çš„å¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªå®ä¾‹å‘¢ï¼Ÿ</p>\n<p>ä¸‰ã€æ„é€ å‡½æ•°çš„é™æ€å±æ€§ç¼“å­˜å®ä¾‹</p>\n<p>å…ˆçœ‹ä»£ç </p>\n<pre class=\"prettyprint\"><code>function Person(){ \n &#x2F;&#x2F;å¦‚æœå·²ç»ç¼“å­˜äº†å®ä¾‹ï¼Œåˆ™ç›´æ¥è¿”å›ç¼“å­˜çš„å®ä¾‹ \n if(typeof Person.instance===&#x27;object&#x27;){ \n return Person.instance; \n } \n this.createTime=new Date(); \n &#x2F;&#x2F;ç¼“å­˜å®ä¾‹ \n Person.instance=this; \n return this; \n} \n</code></pre><p>ä»ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€æ¬¡newæ—¶ï¼Œifçš„æ¡ä»¶è¿”å›falseï¼Œä¼šå¾€ä¸‹èµ°ï¼Œåˆå§‹åŒ–å¯¹è±¡ï¼Œç„¶åä¿å­˜å¯¹è±¡åˆ°Person.instanceè¿™ä¸ªé™æ€å±æ€§ä¸­ã€‚\nç¬¬äºŒæ¬¡new æ—¶ï¼Œifçš„æ¡ä»¶è¿”å›trueï¼Œç›´æ¥è¿”å›Person.instanceï¼Œä¸ä¼šå†å¾€ä¸‹è¿è¡Œåˆå§‹åŒ–çš„ä»£ç ã€‚æ‰€ä»¥ä¸ç®¡newå‡ æ¬¡ï¼Œè¿”å›çš„éƒ½æ˜¯ç¬¬ä¸€æ¬¡åˆ›å»ºçš„å¯¹è±¡ã€‚</p>\n<p>è¿™ä¸ªæ–¹æ³•çš„ç¼ºç‚¹å’Œæ–¹æ³•ä¸€çš„ç¼ºç‚¹ä¸€æ ·ï¼ŒPerson.instanceä¹Ÿæ˜¯å…¬å¼€å±æ€§ï¼Œæœ‰å¯èƒ½ä¼šè¢«ä¿®æ”¹ã€‚</p>\n<p>æˆ‘ä»¬å‚è€ƒæ–¹æ³•äºŒï¼Œä½¿ç”¨é—­åŒ…æ¥å°è£…ä¸€ä¸ªï¼Œä¹Ÿè®¸å°±èƒ½è§£å†³è¯¥é—®é¢˜äº†</p>\n<p>å››ã€é‡å†™æ„é€ å‡½æ•°</p>\n<p>è¿™ä¸ªæ–¹æ³•è¦ä½¿ç”¨é—­åŒ…ï¼Œä½†ä¸èƒ½åƒæ–¹æ³•äºŒé‚£ä¹ˆç®€å•ï¼Œæˆ‘ä»¬éœ€è¦é‡å†™æ„é€ å‡½æ•°ã€‚</p>\n<pre class=\"prettyprint\"><code>function Person(){ \n &#x2F;&#x2F;ç¼“å­˜å®ä¾‹ \n var instance=this; \n this.createTime=new Date(); \n &#x2F;&#x2F;é‡å†™æ„é€ å‡½æ•° \n Person=function(){ \n return instance; \n } \n} \n</code></pre><p>ç¬¬ä¸€æ¬¡new æ—¶ï¼Œè°ƒç”¨åŸå§‹æ„é€ å‡½æ•°å…ˆç¼“å­˜è¯¥å®ä¾‹ï¼Œç„¶åå†åˆå§‹åŒ–ï¼ŒåŒæ—¶ï¼Œé‡å†™è¯¥æ„é€ å‡½æ•°ã€‚ä»¥åå†new æ—¶ï¼Œæ°¸è¿œè°ƒç”¨ä¸åˆ°åŸå§‹çš„æ„é€ å‡½æ•°äº†ï¼Œåªèƒ½è°ƒç”¨åˆ°é‡å†™åçš„æ„é€ å‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°æ€»æ˜¯è¿”å›ç¼“å­˜çš„instance.\nä¸Šé¢çš„æ–¹æ³•ä¼¼ä¹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†é€šè¿‡ä¸‹é¢çš„æµ‹è¯•ï¼Œå¯ä»¥å‘ç°é—®é¢˜</p>\n<pre class=\"prettyprint\"><code>&#x2F;&#x2F;å‘åŸå‹æ·»åŠ å±æ€§ \nPerson.prototype.prop1=true; \nvar p1=new Person(); \n&#x2F;&#x2F;åœ¨åˆ›å»ºåˆå§‹åŒ–å¯¹è±¡åï¼Œå†æ¬¡å‘è¯¥åŸå‹æ·»åŠ å±æ€§ \nPerson.prototype.prop2=true; \nvar p2=new Person(); \n\n&#x2F;&#x2F;å¼€å§‹æµ‹è¯• \nconsole.log(p1.prop1);&#x2F;&#x2F;ç»“æœä¸ºtrue \nconsole.log(p2.prop1);&#x2F;&#x2F;ç»“æœä¸ºtrue \n\nconsole.log(p1.prop2);&#x2F;&#x2F;ç»“æœä¸ºundefined \nconsole.log(p2.prop2);&#x2F;&#x2F;ç»“æœä¸ºundefined \n\nconsole.log(p1.constructor===Person);&#x2F;&#x2F;ç»“æœä¸ºfalse \nconsole.log(p2.constructor===Person);&#x2F;&#x2F;ç»“æœä¸ºfalse \n</code></pre><p>æˆ‘ä»¬é¢„æœŸä¸­çš„ç»“æœï¼Œåº”è¯¥æ˜¯å…¨éƒ½æ˜¯trueã€‚\nåˆ†æä¸€ä¸‹ä¸Šè¿°æµ‹è¯•ä»£ç </p>\n<p>Person.prototype.prop1=true;æ˜¯åœ¨åŸå§‹æ„é€ å‡½æ•°çš„åŸå‹ä¸‹å¢åŠ äº†prop1è¿™ä¸ªå±æ€§ï¼Œå¹¶èµ‹å€¼</p>\n<p>è€Œåœ¨æ‰§è¡Œ var p1=new Person();ä¹‹åï¼ŒPersonè¿™ä¸ªæ„é€ å‡½æ•°å·²ç»è¢«é‡å†™äº†</p>\n<p>æ‰€ä»¥Person.prototype.prop2=true;æ˜¯åœ¨æ–°çš„åŸå‹ä¸‹å¢åŠ prop2è¿™ä¸ªå±æ€§</p>\n<p>var p2=new Person(); p2å’Œp1å®é™…ä¸Šæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå³åŸå§‹æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡</p>\n<p>æ‰€ä»¥p1 p2éƒ½æœ‰prop1è¿™ä¸ªå±æ€§ï¼Œè€Œæ²¡æœ‰prop2è¿™ä¸ªå±æ€§</p>\n<p>åŒæ ·çš„ï¼Œp1 p2çš„constructoræŒ‡å‘çš„ä¹Ÿæ˜¯åŸå§‹çš„æ„é€ å‡½æ•°ï¼Œè€ŒPersonæ­¤æ—¶å·²ä¸æ˜¯åŸæ¥é‚£ä¸ªå‡½æ•°äº†</p>\n<p>ä¸ºäº†èƒ½æŒ‰é¢„æœŸçš„ç»“æœé‚£æ ·è¿è¡Œï¼Œå¯ä»¥é€šè¿‡ä¸€äº›ä¿®æ”¹æ¥å®ç°</p>\n<pre class=\"prettyprint\"><code>function Person(){ \n &#x2F;&#x2F;ç¼“å­˜å®ä¾‹ \n var instance=this; \n &#x2F;&#x2F;é‡å†™æ„é€ å‡½æ•° \n Person=function(){ \n return instance; \n } \n &#x2F;&#x2F;ä¿ç•™åŸå‹å±æ€§ \n Person.prototype=this; \n &#x2F;&#x2F;å®ä¾‹ \n instance=new Person(); \n &#x2F;&#x2F;é‡ç½®æ„é€ å‡½æ•°å¼•ç”¨ \n instance.constructor=Person; \n\n &#x2F;&#x2F;å…¶ä»–åˆå§‹åŒ– \n instance.createTime=new Date(); \n \n return instance; \n} \n</code></pre><p>å†è¿è¡Œå‰é¢çš„æµ‹è¯•ä»£ç ï¼Œç»“æœéƒ½æ˜¯trueäº†ã€‚</p>\n<p>åŸæ–‡é“¾æ¥ï¼š<a href=\"http://blog.csdn.net/bluestarjava/article/details/9967527\">http://blog.csdn.net/bluestarjava/article/details/9967527</a></p>\n</div>",
"title": "javascriptå•ä¾‹æ¨¡å¼",
"last_reply_at": "2016-08-01T12:35:49.217Z",
"good": false,
"top": false,
"reply_count": 4,
"visit_count": 3187,
"create_at": "2013-08-16T06:24:24.097Z",
"author": {
"loginname": "luojianjava",
"avatar_url": "//gravatar.com/avatar/e3e4e6a270cc04ccfd618bb9d72efe34?size=48"
}
},
{
"id": "579f21a6da05b9e92af325ec",
"author_id": "568a19253b33070b66270882",
"tab": "job",
"content": "<div class=\"markdown-text\"><p>èŒä½: å‰ç«¯é«˜çº§å·¥ç¨‹å¸ˆ\nåˆ°å²—æ—¶é—´ï¼šè¶Šå¿«è¶Šå¥½\nèŒè´£ï¼šè´Ÿè´£å…¬å¸äº§å“çš„å‰ç«¯å¼€å‘</p>\n<p>ä»»èŒè¦æ±‚</p>\n<p>1 ã€ç†Ÿç»ƒæŒæ¡ HTML ã€ CSS ã€ JS ã€‚\n2 ã€ç†Ÿç»ƒæŒæ¡ jQuery ã€ AngularJS ç­‰ï¼Œç†Ÿæ‚‰ React å¯åŠ åˆ†ã€‚\n3 ã€ç†Ÿæ‚‰ node.js åŠ express,<a href=\"http://socket.io\">socket.io</a> ç­‰ã€‚\n4 ã€ç†Ÿæ‚‰é¡µé¢æ€§èƒ½ä¼˜åŒ–åŠè°ƒè¯•å·¥å…·ä½¿ç”¨ã€‚</p>\n<p>åŠ åˆ†é¡¹</p>\n<p>æœ‰ Github ä½œå“æˆ–è´¡çŒ®è¿‡å¼€æºé¡¹ç›®\nå¯¹äº¤äº’è®¾è®¡æœ‰ç†è§£\næœ‰åœ¨çº¿æ•™è‚²ç±»é¡¹ç›®å‰ç«¯å¼€å‘ç»éªŒ</p>\n<p>å…³äºæˆ‘ä»¬</p>\n<p>å…¬å¸ä¸“æ³¨äºæ‰“é€ é’ˆå¯¹å›½é™…å­¦æ ¡çš„ä¸€ç«™å¼æ•™è‚²æœåŠ¡å¹³å°ï¼Œå¸®åŠ©å›½é™…å­¦æ ¡æä¾›è¯¾ç¨‹ç³»ç»Ÿï¼Œç»™å›½é™…å­¦æ ¡å­¦ç”Ÿæä¾›moocç³»ç»Ÿ, æ›´ä¸“ä¸šçš„åœ¨çº¿è¾…å¯¼ï¼Œå›½å¤–å¤§å­¦ç”³è¯·ï¼Œæ¸¸å­¦ç­‰æœåŠ¡ã€‚</p>\n<p>å…¬å¸è€æ€»çº¿ä¸‹æœ‰3æ‰€æ ¡åŒº, å¤§çº¦1000å­¦ç”Ÿå·¦å³, å†…å®¹åˆä¼™äººä¹‹å‰ä¸ºç²¾é”å›½é™…å­¦æ ¡å‰¯æ ¡é•¿, æŠ€æœ¯åˆä¼™äººä¸ºé˜¿é‡Œå·´å·´, ç™¾åº¦å’Œæºç¨‹å‡ºèº«.</p>\n<p>æˆ‘ä»¬æä¾›:\næ¯å¤©ä¸‹åˆæ°´æœ,\næ¯å‘¨ä¸¤æ¬¡ç¾½æ¯›çƒç­‰çƒç±»æ´»åŠ¨,\næ¯å‘¨è‡³å°‘2æ¬¡ä»¥ä¸Šèšé¤.\nä¹°ä¹¦æŠ¥é”€,\nMBP\næœºæ¢°é”®ç›˜\nå¯è§‚çš„è‚¡æƒ</p>\n<p>è”ç³»æˆ‘\n<a href=\"mailto:jiwengang@qingmiaoer.com\">jiwengang@qingmiaoer.com</a></p>\n</div>",
"title": "[ä¸Šæµ·æµ¦ä¸œæ–°åŒº]é«˜è–ªè¯šè˜å‰ç«¯leader, 20-30kæœˆè–ªåŠ è‚¡æƒ",
"last_reply_at": "2016-08-01T10:17:10.482Z",
"good": false,
"top": false,
"reply_count": 0,
"visit_count": 123,
"create_at": "2016-08-01T10:17:10.482Z",
"author": {
"loginname": "jeffreyji666",
"avatar_url": "https://avatars.githubusercontent.com/u/2270558?v=3&s=120"
}
},
{
"id": "579f019723e454cd2af8180c",
"author_id": "578c7c7b6d3f2b2014113f3f",
"tab": "ask",
"content": "<div class=\"markdown-text\"><p>ä¼¼ä¹åœ¨issueæœ‰äººé—®äº†å…³äºphantomjsæ‰“åŒ…çš„é—®é¢˜ï¼Œä¼¼ä¹æ˜¯å¯ä»¥æ‰“åŒ…çš„ï¼Œä½†æ˜¯ç½‘ä¸Šåˆæ²¡æœ‰ç›¸å…³çš„èµ„æ–™ï¼Œåˆæœ‰äººè¯´electronä¸æ”¯æŒphantomjsçš„æ”¯æŒç¯å¢ƒã€‚ç°åœ¨å°±æ˜¯æœ‰ä¸¤é—®é¢˜ï¼›\n1.phantomjsä½œä¸ºå…¥å£æ–‡ä»¶å¯ä»¥æ‰“åŒ…å—ï¼Ÿ\n2.phantomjsä½œä¸ºnodejsçš„child_processæ‰§è¡Œï¼Œå¯ä»¥æ‰“åŒ…å—ï¼Ÿ</p>\n</div>",
"title": "Electronå¯ä»¥æ‰“åŒ…énodejsä»£ç ä¹ˆï¼Œæ¯”å¦‚phantomjs",
"last_reply_at": "2016-08-01T09:22:32.877Z",
"good": false,
"top": false,
"reply_count": 6,
"visit_count": 136,
"create_at": "2016-08-01T08:00:23.625Z",
"author": {
"loginname": "Cherokeeli",
"avatar_url": "https://avatars.githubusercontent.com/u/17857090?v=3&s=120"
}
}
]
}
